"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["38454"],{95252(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var o=s(49346),t=s(74848),i=s(28453);let r={title:"AWS CodeCommit \uC0AC\uC6A9\uD558\uAE30",authors:"me",tags:["server","aws","git"],date:new Date("2017-08-18T22:34:22.000Z")},l,a={authorsImageUrls:[void 0]},c=[{value:"\uC124\uC815",id:"\uC124\uC815",level:2},{value:"IAM \uC720\uC800 \uC0DD\uC131",id:"iam-\uC720\uC800-\uC0DD\uC131",level:3},{value:"\uD0A4 \uD30C\uC77C \uC5C5\uB85C\uB4DC",id:"\uD0A4-\uD30C\uC77C-\uC5C5\uB85C\uB4DC",level:3},{value:"config",id:"config",level:3},{value:"\uD14C\uC2A4\uD2B8",id:"\uD14C\uC2A4\uD2B8",level:3},{value:"\uC5F0\uB3D9",id:"\uC5F0\uB3D9",level:2},{value:"ssh \uC5F0\uB3D9\uC774 \uC798 \uB418\uC9C0 \uC54A\uC744\uC2DC",id:"ssh-\uC5F0\uB3D9\uC774-\uC798-\uB418\uC9C0-\uC54A\uC744\uC2DC",level:3},{value:"Webhook",id:"webhook",level:2},{value:"Lambda",id:"lambda",level:3},{value:"Lambda \uC124\uC815",id:"lambda-\uC124\uC815",level:4},{value:"\uC18C\uC2A4",id:"\uC18C\uC2A4",level:4},{value:"\uB85C\uADF8",id:"\uB85C\uADF8",level:3},{value:"\uC5EC\uB2F4",id:"\uC5EC\uB2F4",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"AWS \uC5D0\uC11C \uC81C\uACF5\uD558\uB294 Cloud Git Repository \uC778 CodeCommit \uC73C\uB85C \uC18C\uC2A4\uCF54\uB4DC\uB97C \uAD00\uB9AC\uD574\uBCF4\uC790."}),"\n",(0,t.jsx)(n.h2,{id:"\uC124\uC815",children:"\uC124\uC815"}),"\n",(0,t.jsx)(n.p,{children:"\uACF5\uC2DD \uBB38\uC11C\uAC00 \uC544\uC8FC \uC798 \uB418\uC5B4\uC788\uB2E4. \uBB38\uC11C\uB97C \uBCF4\uACE0 \uC2DC\uC791\uD574\uB3C4 \uB41C\uB2E4."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"http://docs.aws.amazon.com/ko_kr/codecommit/latest/userguide/setting-up-ssh-unixes.html",children:"Mac"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"http://docs.aws.amazon.com/ko_kr/codecommit/latest/userguide/setting-up-ssh-windows.html",children:"Windows"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"iam-\uC720\uC800-\uC0DD\uC131",children:"IAM \uC720\uC800 \uC0DD\uC131"}),"\n",(0,t.jsxs)(n.p,{children:["IAM \uC5D0\uC11C \uC720\uC800\uB97C \uB9CC\uB4E0 \uB4A4\uC5D0 ",(0,t.jsx)(n.strong,{children:"AWSCodeCommitFullAccess"})," \uAD8C\uD55C\uC744 \uCD94\uAC00\uD55C\uB2E4."]}),"\n",(0,t.jsx)(n.h3,{id:"\uD0A4-\uD30C\uC77C-\uC5C5\uB85C\uB4DC",children:"\uD0A4 \uD30C\uC77C \uC5C5\uB85C\uB4DC"}),"\n",(0,t.jsxs)(n.p,{children:["ssh \uD0A4\uB97C \uC0DD\uC131\uD558\uACE0 Public Key \uD30C\uC77C(id_rsa.pub)\uC744 \uD574\uB2F9 \uC720\uC800\uC758 ",(0,t.jsx)(n.strong,{children:"Security credentials"})," \uBA54\uB274\uC5D0\uC11C \uC5C5\uB85C\uB4DC\uD55C\uB2E4.\n\uD0A4\uAC00 \uB4F1\uB85D\uB418\uBA74 ",(0,t.jsx)(n.strong,{children:"SSH key ID"}),"\uAC00 \uBCF4\uC774\uB294\uB370 \uBA54\uBAA8\uD574 \uB193\uC790."]}),"\n",(0,t.jsx)(n.h3,{id:"config",children:"config"}),"\n",(0,t.jsxs)(n.p,{children:["\uC0AC\uC6A9\uD560 \uC720\uC800\uC758 ssh config \uB97C \uC124\uC815\uD574\uC918\uC57C\uD55C\uB2E4.\nUser \uC5D0 \uB4E4\uC5B4\uAC00\uB294 \uAC12\uC740 \uC704\uC5D0\uC11C \uC801\uC5B4\uB193\uC740 ",(0,t.jsx)(n.strong,{children:"SSH key ID"})," \uAC12\uC774\uB2E4."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ vi ~/.ssh/config\n\n## \uC544\uB798 \uB0B4\uC6A9\uC744 \uB9E8 \uC704\uC5D0 \uB123\uC5B4\uC8FC\uC790.\nHost git-codecommit.*.amazonaws.com\n  User EXAMPLEEXAMPLEEXAMPLE\n  IdentityFile ~/.ssh/id_rsa\n\n## \uC800\uC7A5\uD55C \uB4A4 \uAD8C\uD55C\uC744 \uBC14\uAFD4\uC900\uB2E4.\nchmod 600 ~/.ssh/config\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\uD14C\uC2A4\uD2B8",children:"\uD14C\uC2A4\uD2B8"}),"\n",(0,t.jsx)(n.p,{children:"\uC124\uC815\uC774 \uC644\uB8CC\uB41C \uD6C4\uC5D0 \uC11C\uC6B8\uB9AC\uC83C\uC73C\uB85C ssh \uC5F0\uACB0\uC744 \uC2DC\uB3C4\uD574\uBCF4\uC790."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ ssh git-codecommit.ap-northeast-2.amazonaws.com\n\n## \uB2E4\uC74C\uACFC \uAC19\uC740 \uBA54\uC138\uC9C0\uAC00 \uB9AC\uD134\uB418\uBA74 \uC131\uACF5\uC774\uB2E4.\nYou have successfully authenticated over SSH. You can use Git to interact with AWS CodeCommit. Interactive shells are not supported.Connection to git-codecommit.\nap-northeast-2.amazonaws.com closed by remote host.\nConnection to git-codecommit.ap-northeast-2.amazonaws.com closed.\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\uC5F0\uB3D9",children:"\uC5F0\uB3D9"}),"\n",(0,t.jsx)(n.p,{children:"\uC774\uC81C AWS CodeCommit \uACFC \uB0B4 \uC18C\uC2A4\uB97C \uC5F0\uACB0\uC2DC\uCF1C\uBCF4\uC790."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"## \uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uD504\uB85C\uC81D\uD2B8\uC758 \uACBD\uC6B0\n$ git remote remove origin\n$ git remote add origin ssh://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/\uB808\uD30C\uC9C0\uD1A0\uB9AC\uBA85\n\n## \uCC98\uC74C \uC2DC\uC791\uD558\uB294 \uACBD\uC6B0\n$ git clone ssh://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/\uB808\uD30C\uC9C0\uD1A0\uB9AC\uBA85\n\n## \uAD8C\uD55C\uC774 \uC5C6\uAC70\uB098 ssh \uACC4\uC815\uC744 \uBB3C\uC5B4\uBCFC \uB54C\n## origin\uC758 path \uC55E\uC5D0 SSH key ID\uB97C \uCD94\uAC00\uD558\uC790\n$ git remote add origin ssh://EXAMPLEEXAMPLEEXAMPLE@git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/\uB808\uD30C\uC9C0\uD1A0\uB9AC\uBA85\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"git pull origin master"}),"\uC2DC\uC5D0 \uC815\uC0C1\uC801\uC73C\uB85C \uAC00\uC838\uC624\uB294 \uAC78 \uD655\uC778\uD560 \uC218 \uC788\uB2E4."]}),"\n",(0,t.jsx)(n.h3,{id:"ssh-\uC5F0\uB3D9\uC774-\uC798-\uB418\uC9C0-\uC54A\uC744\uC2DC",children:"ssh \uC5F0\uB3D9\uC774 \uC798 \uB418\uC9C0 \uC54A\uC744\uC2DC"}),"\n",(0,t.jsxs)(n.p,{children:["\uBA54\uB274\uC5BC\uB300\uB85C \uB530\uB77C\uD574\uB3C4 \uC5F0\uB3D9\uC774 \uC548\uB420 \uB54C\uB294 \uB2F9\uD669\uD558\uC9C0 \uB9D0\uACE0 ",(0,t.jsx)(n.code,{children:"IAM > Users > Security credentials"}),"\uC5D0\uC11C ",(0,t.jsx)(n.code,{children:"HTTPS Git credentials for AWS CodeCommit"}),"\uB97C \uB9CC\uB4E4\uC5B4\uC8FC\uACE0 CodeCommit Repository \uC5F0\uACB0\uC744 ",(0,t.jsx)(n.code,{children:"http"}),"\uB85C \uD558\uBA74 \uB41C\uB2E4."]}),"\n",(0,t.jsx)(n.h2,{id:"webhook",children:"Webhook"}),"\n",(0,t.jsx)(n.p,{children:"Github, Bitbucket \uC640 \uB2EC\uB9AC Webhook \uC124\uC815\uD558\uB294 \uBC95\uC774 \uC870\uAE08\uC740 \uBCF5\uC7A1\uD558\uB2E4. (GCP \uC758 Pub/Sub \uC640 \uBE44\uC2B7\uD55C \uB290\uB08C)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"CodeDeploy \uC11C\uBE44\uC2A4\uB97C \uC0AC\uC6A9\uD558\uBA74 \uC26C\uC6CC\uC9C8 \uAC83 \uAC19\uC740\uB370, \uADF8\uB7FC CodePipeline \uB3C4 \uC4F0\uACE0 \uC2F6\uC744 \uAC83 \uAC19\uACE0 CI \uC138\uD305\uC744 \uD574\uC57C\uB418\uACE0 \uB2E4\uC74C \uAE30\uD68C\uC5D0"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"lambda",children:"Lambda"}),"\n",(0,t.jsx)(n.p,{children:"\uB78C\uB2E4\uB294 \uC6F9(URL)\uC73C\uB85C \uD638\uCD9C\uD560 \uC218 \uC788\uB294 Javascript function \uC774\uB2E4."}),"\n",(0,t.jsx)(n.h4,{id:"lambda-\uC124\uC815",children:"Lambda \uC124\uC815"}),"\n",(0,t.jsxs)(n.p,{children:["\uBA3C\uC800 ",(0,t.jsx)(n.strong,{children:"Lambda > \uD568\uC218 > \uD568\uC218\uC0DD\uC131 > \uC0C8\uB85C \uC791\uC131"})," \uBA54\uB274\uC5D0\uC11C webhook \uC774\uB780 \uC774\uB984\uC758 \uD568\uC218\uB97C \uC0DD\uC131\uD55C\uB2E4.\n",(0,t.jsx)(n.strong,{children:"\uD2B8\uB9AC\uAC70 \uAD6C\uC131"})," \uBA54\uB274\uC5D0\uC11C CodeCommit \uC744 \uC120\uD0DD\uD558\uACE0 \uC785\uB825 \uD3FC\uC744 \uC798 \uCC44\uC6CC\uC8FC\uC790."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://i.imgur.com/qpDqsjv.png",alt:"image from hexo"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\uAE30\uC874 \uBE0C\uB79C\uCE58\uB85C \uD478\uC2DC, master \uBE0C\uB79C\uCE58"}),"\uB97C \uC120\uD0DD\uD588\uB2E4.\n",(0,t.jsx)(n.strong,{children:"\uC0AC\uC6A9\uC790 \uC9C0\uC815\uB370\uC774\uD130"}),"\uC5D0\uB294 webhook \uC744 \uAC78 URL \uACBD\uB85C\uB97C \uB123\uC5B4\uC900\uB2E4. (\uC608: ",(0,t.jsx)(n.code,{children:"https://yourdomain.com/webhook"}),")"]}),"\n",(0,t.jsx)(n.h4,{id:"\uC18C\uC2A4",children:"\uC18C\uC2A4"}),"\n",(0,t.jsxs)(n.p,{children:["\uC774\uBBF8 \uC138\uD305\uB41C ",(0,t.jsx)(n.a,{href:"https://gist.github.com/babelop/42e5580b7898719887516649b3053bc7",children:"\uD568\uC218"}),"\uB97C \uC0AC\uC6A9\uD558\uC790."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'"use strict";\n\nconst url = require("url");\nconst https = require("https");\n\nexports.handler = (event, context, callback) => {\n  const webhook_url = event.Records[0].customData;\n\n  if (!webhook_url) {\n    const error = new Error("Web-hook URL not provided as custom data.");\n    callback(error);\n  } else {\n    console.log("POST web-hook to " + webhook_url);\n    const options = url.parse(webhook_url);\n    options["method"] = "POST";\n\n    const req = https.request(options, (res) => {\n      let body = "";\n      console.log("Status:", res.statusCode);\n      console.log("Headers:", JSON.stringify(res.headers));\n      res.setEncoding("utf8");\n      res.on("data", (chunk) => (body += chunk));\n      res.on("end", () => {\n        console.log("Successfully triggered web-hook.");\n        // If we know it\'s JSON, parse it.\n        if (res.headers["content-type"] === "application/json") {\n          body = JSON.parse(body);\n        }\n        callback(null, body);\n      });\n    });\n\n    req.on("error", callback);\n    req.end();\n  }\n};\n'})}),"\n",(0,t.jsxs)(n.p,{children:["https \uCEE4\uB125\uC158\uC774 \uC544\uB2CC \uACBD\uC6B0 ",(0,t.jsx)(n.code,{children:"http"})," \uBAA8\uB4C8\uC744 \uC0AC\uC6A9\uD574\uC11C request \uB97C \uBCF4\uB0B4\uBA74 \uB420 \uAC83 \uAC19\uB2E4."]}),"\n",(0,t.jsxs)(n.p,{children:["\uB4F1\uB85D \uD6C4\uC5D4 ",(0,t.jsx)(n.strong,{children:"CodeCommit > \uD2B8\uB9AC\uAC70 > webhook > \uD2B8\uB9AC\uAC70 \uD14C\uC2A4\uD2B8"}),"\uB97C \uC9C4\uD589\uD558\uBA74 \uC815\uC0C1\uC801\uC73C\uB85C \uD638\uCD9C\uC774 \uB41C\uB2E4."]}),"\n",(0,t.jsx)(n.h3,{id:"\uB85C\uADF8",children:"\uB85C\uADF8"}),"\n",(0,t.jsxs)(n.p,{children:["\uD638\uCD9C \uB85C\uADF8\uB294 ",(0,t.jsx)(n.strong,{children:"CloudWatch > \uB85C\uADF8"}),"\uC5D0\uC11C \uC0DD\uC131\uD55C Lambda \uBA85\uC73C\uB85C \uD655\uC778\uD560 \uC218 \uC788\uB2E4."]}),"\n",(0,t.jsxs)(n.p,{children:["\uB85C\uADF8 \uC2A4\uD2B8\uB9BC\uC774 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC744 \uACBD\uC6B0\uC5D4 ",(0,t.jsx)(n.strong,{children:"Lambda > \uAD6C\uC131 > \uAE30\uC874 \uC5ED\uD560"}),"\uC5D0 \uD45C\uC2DC\uB41C \uC5ED\uD560(Rule)\uC774 \uD574\uB2F9 Lambda \uD568\uC218\uB97C \uC7A1\uACE0 \uC788\uB294\uC9C0 \uD655\uC778\uD574\uC57C\uD55C\uB2E4.\n",(0,t.jsx)(n.strong,{children:"IAM > Rules > \uD574\uB2F9 \uB8F0 > Permissions"}),"\uC5D0\uC11C ",(0,t.jsx)(n.strong,{children:"Show policy"}),"\uB97C \uB204\uB974\uBA74 ",(0,t.jsx)(n.strong,{children:"Resource \uC18D\uC131"}),"\uC5D0\uC11C \uD655\uC778\uD560 \uC218 \uC788\uACE0 \uB2E4\uB974\uB2E4\uBA74 \uC81C\uB300\uB85C \uC5F0\uACB0\uC2DC\uCF1C\uC8FC\uBA74 \uB41C\uB2E4."]}),"\n",(0,t.jsx)(n.h2,{id:"\uC5EC\uB2F4",children:"\uC5EC\uB2F4"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://aws.amazon.com/ko/blogs/korea/week-in-review-28-08-17/",children:"AWS Korea week in review"}),"\uC5D0 \uC18C\uAC1C\uB418\uC5C8\uB2E4."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var o=s(96540);let t={},i=o.createContext(t);function r(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:n},e.children)}},49346(e){e.exports=JSON.parse('{"permalink":"/2017/08/18/AWS-CodeCommit-\uC0AC\uC6A9\uD558\uAE30","source":"@site/blog/2017/08/18/AWS-CodeCommit-\uC0AC\uC6A9\uD558\uAE30.md","title":"AWS CodeCommit \uC0AC\uC6A9\uD558\uAE30","description":"AWS \uC5D0\uC11C \uC81C\uACF5\uD558\uB294 Cloud Git Repository \uC778 CodeCommit \uC73C\uB85C \uC18C\uC2A4\uCF54\uB4DC\uB97C \uAD00\uB9AC\uD574\uBCF4\uC790.","date":"2017-08-18T22:34:22.000Z","tags":[{"inline":true,"label":"server","permalink":"/tags/server"},{"inline":true,"label":"aws","permalink":"/tags/aws"},{"inline":true,"label":"git","permalink":"/tags/git"}],"readingTime":3.01,"hasTruncateMarker":false,"authors":[{"name":"Eunkwang Shin","title":"Owner","url":"https://github.com/gracefullight","socials":{"linkedin":"https://www.linkedin.com/in/gracefullight/","github":"https://github.com/gracefullight","email":"mailto:gracefullight.dev@gmail.com"},"description":"Full Stack JavaScript Developer | Half-time Open Sourcerer.","page":{"permalink":"/authors/me"},"imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me"}],"frontMatter":{"title":"AWS CodeCommit \uC0AC\uC6A9\uD558\uAE30","authors":"me","tags":["server","aws","git"],"date":"2017-08-18T22:34:22.000Z"},"unlisted":false,"prevItem":{"title":"Cannot start container iptables failed","permalink":"/2017/08/19/Cannot-start-container-iptables-failed"},"nextItem":{"title":"Laravel 5.5 - Log Permission \uBB38\uC81C","permalink":"/2017/08/18/Laravel-5-4-Log-Permission-Denied"}}')}}]);