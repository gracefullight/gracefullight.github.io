"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["37722"],{83:function(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>h});var a=l(55196),i=l(69979),t=l(59338);let s={title:"SSHD \uBCF4\uC548 - fail2ban, port \uBCC0\uACBD",authors:"me",tags:["fail2ban","linux"],date:new Date("2017-09-22T07:50:15.000Z")},r=void 0,c={authorsImageUrls:[void 0]},h=[{value:"\uC2E4\uD328\uD55C \uB85C\uADF8\uC778 IP \uD655\uC778",id:"\uC2E4\uD328\uD55C-\uB85C\uADF8\uC778-ip-\uD655\uC778",level:2},{value:"SSH \uD3EC\uD2B8 \uBCC0\uACBD",id:"ssh-\uD3EC\uD2B8-\uBCC0\uACBD",level:2},{value:"SSH \uC124\uC815 \uBCC0\uACBD",id:"ssh-\uC124\uC815-\uBCC0\uACBD",level:3},{value:"SElinux \uD3EC\uD2B8 \uCD94\uAC00",id:"selinux-\uD3EC\uD2B8-\uCD94\uAC00",level:3},{value:"\uBC29\uD654\uBCBD \uD3EC\uD2B8 \uCD94\uAC00",id:"\uBC29\uD654\uBCBD-\uD3EC\uD2B8-\uCD94\uAC00",level:3},{value:"SSH \uC7AC\uC2DC\uC791",id:"ssh-\uC7AC\uC2DC\uC791",level:3},{value:"Fail2ban",id:"fail2ban",level:2},{value:"\uC124\uCE58",id:"\uC124\uCE58",level:3},{value:"SSH \uC124\uC815 \uCD94\uAC00",id:"ssh-\uC124\uC815-\uCD94\uAC00",level:3},{value:"\uC11C\uBE44\uC2A4 \uC2DC\uC791",id:"\uC11C\uBE44\uC2A4-\uC2DC\uC791",level:3},{value:"\uB354 \uC26C\uC6B4 \uBC29\uBC95",id:"\uB354-\uC26C\uC6B4-\uBC29\uBC95",level:2}];function d(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\uC2E4\uD328\uD55C-\uB85C\uADF8\uC778-ip-\uD655\uC778",children:"\uC2E4\uD328\uD55C \uB85C\uADF8\uC778 IP \uD655\uC778"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ cat /var/log/secure | grep 'sshd.*Failed' | grep -Po \"[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+\" | sort | uniq -c\n\n## \uC2E4\uD328 \uCE74\uC6B4\uD2B8\uC640 IP\n6 100.34.214.24\n6 101.109.152.219\n6 101.164.141.36\n"})}),"\n",(0,i.jsx)(n.p,{children:"\uAE30\uBCF8 \uD3EC\uD2B8\uB97C \uC0AC\uC6A9 \uC911\uC774\uB77C\uBA74 \uC5B4\uB9C8\uC5B4\uB9C8\uD55C IP \uBAA9\uB85D\uC774 \uB098\uC62C \uAC83\uC774\uB2E4."}),"\n",(0,i.jsx)(n.h2,{id:"ssh-\uD3EC\uD2B8-\uBCC0\uACBD",children:"SSH \uD3EC\uD2B8 \uBCC0\uACBD"}),"\n",(0,i.jsx)(n.h3,{id:"ssh-\uC124\uC815-\uBCC0\uACBD",children:"SSH \uC124\uC815 \uBCC0\uACBD"}),"\n",(0,i.jsx)(n.p,{children:"/etc/ssh/sshd_config \uC5D0 \uD3EC\uD2B8 \uC124\uC815\uC744 \uBCC0\uACBD\uD55C\uB2E4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/ssh/sshd_config"',children:"Port 2020\n"})}),"\n",(0,i.jsx)(n.h3,{id:"selinux-\uD3EC\uD2B8-\uCD94\uAC00",children:"SElinux \uD3EC\uD2B8 \uCD94\uAC00"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"semanage port -a -t ssh_port_t -p tcp 2020\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\uBC29\uD654\uBCBD-\uD3EC\uD2B8-\uCD94\uAC00",children:"\uBC29\uD654\uBCBD \uD3EC\uD2B8 \uCD94\uAC00"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"firewall-cmd --permanent --zone=public --add-port=2020/tcp\nfirewall-cmd --reload\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ssh-\uC7AC\uC2DC\uC791",children:"SSH \uC7AC\uC2DC\uC791"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"systemctl restart sshd\n"})}),"\n",(0,i.jsx)(n.h2,{id:"fail2ban",children:"Fail2ban"}),"\n",(0,i.jsx)(n.p,{children:"\uC77C\uC815 \uC2DC\uB3C4 \uC774\uC0C1\uC744 \uC2E4\uD328\uD558\uBA74 \uD574\uB2F9 IP \uB97C \uCC28\uB2E8\uC2DC\uD0A4\uB294 Fail2ban \uC744 \uC124\uCE58\uD558\uC790"}),"\n",(0,i.jsx)(n.h3,{id:"\uC124\uCE58",children:"\uC124\uCE58"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"## repo\uAC00 \uC5C6\uB2E4\uBA74\n## $ yum install -y epel-release\n\n$ yum install -y fail2ban\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ssh-\uC124\uC815-\uCD94\uAC00",children:"SSH \uC124\uC815 \uCD94\uAC00"}),"\n",(0,i.jsx)(n.p,{children:"/etc/fail2ban/jail.local \uB610\uB294 jail.conf \uB97C \uC5F4\uC5B4 [sshd] \uC758 enabled \uC18D\uC131\uC744 true \uB85C \uBCC0\uACBD\uD55C\uB2E4."}),"\n",(0,i.jsx)(n.h3,{id:"\uC11C\uBE44\uC2A4-\uC2DC\uC791",children:"\uC11C\uBE44\uC2A4 \uC2DC\uC791"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"systemctl enable fail2ban\nsystemctl start fail2ban\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uB354-\uC26C\uC6B4-\uBC29\uBC95",children:"\uB354 \uC26C\uC6B4 \uBC29\uBC95"}),"\n",(0,i.jsx)(n.p,{children:"\uC258\uC2A4\uD06C\uB9BD\uD2B8\uB85C \uD3EC\uD2B8\uBCC0\uACBD, \uBC29\uD654\uBCBD \uB8F0 \uCD94\uAC00, Fail2ban \uAE4C\uC9C0 \uD55C \uBC29\uC5D0 \uB05D\uB0B4\uBC84\uB9AC\uC790."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"wget https://raw.githubusercontent.com/FunctionClub/Fail2ban/master/fail2ban.sh && bash fail2ban.sh 2>&1 | tee fail2ban.log\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\uBA85\uB839\uBB38\uC5D0 \uB530\uB77C \uC785\uB825\uB9CC \uD574\uC8FC\uBA74 \uB41C\uB2E4. \uC790\uC138\uD55C \uC124\uBA85\uC740 ",(0,i.jsx)(n.a,{href:"https://github.com/FunctionClub/Fail2ban",children:"FunctionClub/Fail2ban"})," \uCC38\uACE0\uD558\uC790."]})]})}function u(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},59338:function(e,n,l){l.d(n,{Z:()=>r,a:()=>s});var a=l(52136);let i={},t=a.createContext(i);function s(e){let n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(t.Provider,{value:n},e.children)}},55196:function(e){e.exports=JSON.parse('{"permalink":"/2017/09/22/SSHD-\uBCF4\uC548-fail2ban-port-\uBCC0\uACBD","source":"@site/blog/2017/09/22/SSHD-\uBCF4\uC548-fail2ban-port-\uBCC0\uACBD.md","title":"SSHD \uBCF4\uC548 - fail2ban, port \uBCC0\uACBD","description":"\uC2E4\uD328\uD55C \uB85C\uADF8\uC778 IP \uD655\uC778","date":"2017-09-22T07:50:15.000Z","tags":[{"inline":true,"label":"fail2ban","permalink":"/tags/fail-2-ban"},{"inline":true,"label":"linux","permalink":"/tags/linux"}],"readingTime":0.95,"hasTruncateMarker":false,"authors":[{"name":"Eunkwang Shin","title":"Owner","url":"https://github.com/gracefullight","socials":{"linkedin":"https://www.linkedin.com/in/gracefullight/","github":"https://github.com/gracefullight"},"description":"Full Stack JavaScript Developer | Half-time Open Sourcerer.","page":{"permalink":"/authors/me"},"imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me"}],"frontMatter":{"title":"SSHD \uBCF4\uC548 - fail2ban, port \uBCC0\uACBD","authors":"me","tags":["fail2ban","linux"],"date":"2017-09-22T07:50:15.000Z"},"unlisted":false,"prevItem":{"title":"Alpine Linux AWS Cli \uC124\uCE58","permalink":"/2017/09/22/Alpine-Linux-AWS-Cli-\uC124\uCE58"},"nextItem":{"title":"\uCEF4\uD4E8\uD130\uC2DC\uC2A4\uD15C\uAD6C\uC870","permalink":"/2017/09/19/\uCEF4\uD4E8\uD130\uC2DC\uC2A4\uD15C\uAD6C\uC870"}}')}}]);