"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[32735],{4865:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(70090),l=n(50189);function r(e){const t=new DataView(e);let n=8;const a=[];for(;n<t.byteLength;){const l=t.getUint32(n);n+=4;const r=String.fromCharCode(t.getUint8(n),t.getUint8(n+1),t.getUint8(n+2),t.getUint8(n+3));n+=4;const c=new Uint8Array(e,n,l);n+=l;const o=t.getUint32(n);n+=4,a.push({type:r,data:c,crc:o})}return a}function c(e){let t=8;return e.forEach((e=>{t+=12+e.data.length})),t}function o(e,t){const n="zTXt",r=`${e}\0\0${t}`,c=(new TextEncoder).encode(r),o=(0,l.Wt)(c),i=new Uint8Array(4+o.length);i.set((new TextEncoder).encode(n),0),i.set(o,4);return{type:n,data:o,crc:(0,a.buf)(i)}}function i(e,t,n){const a=new ArrayBuffer(e),l=new Uint8Array(a);l.set(new Uint8Array(t,0,8),0);let r=8;return n.forEach((e=>{let{type:t,data:n,crc:c}=e;const o=new DataView(a,r,12+n.length);o.setUint32(0,n.length),l.set((new TextEncoder).encode(t),r+4),l.set(n,r+8),o.setUint32(8+n.length,c),r+=12+n.length})),a}var s=n(71975),u=n(31715),m=n(87199),d=n(59496);function g(){const e=(0,d.useRef)(null),[t,n]=(0,d.useState)(null),[a,l]=(0,d.useState)(""),[g,f]=(0,d.useState)("-1379962171"),[p,h]=(0,d.useState)("Eargasm"),[y,x]=(0,d.useState)(!1),[E,b]=(0,d.useState)(.2),[w,v]=(0,d.useState)("#F58D16");(0,d.useEffect)((()=>{if(t){const n=new Image;n.src=t,n.onload=()=>{const t=e.current;if(t){t.width=n.width,t.height=n.height;const e=t.getContext("2d");e.drawImage(n,0,0),U(e),D(e,w)}}}return()=>{t&&URL.revokeObjectURL(t)}}),[t]);const U=e=>{const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),n=t.data;for(let a=0;a<n.length;a+=4)255===n[a]&&255===n[a+1]&&255===n[a+2]&&(n[a+2]=254);e.putImageData(t,0,0)},D=(e,t)=>{const n=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16),r=e.getImageData(0,0,e.canvas.width,e.canvas.height),c=r.data,o=[];for(let u=0;u<c.length;u+=4)o.push([c[u],c[u+1],c[u+2]]);const i=(0,m.a)(o,4,{}),s=i.centroids.map((e=>({r:e[0],g:e[1],b:e[2]})));if(y){let e=0,t=Number.MAX_SAFE_INTEGER;for(let c=0;c<s.length;c++){const r=s[c],o=Math.sqrt(Math.pow(n-r.r,2)+Math.pow(a-r.g,2)+Math.pow(l-r.b,2));o<t&&(t=o,e=c)}const r=s[e];r.r=r.r*(1-E)+n*E,r.g=r.g*(1-E)+a*E,r.b=r.b*(1-E)+l*E}for(let u=0;u<c.length;u+=4){const e=s[i.clusters[Math.floor(u/4)]];c[u]=e.r,c[u+1]=e.g,c[u+2]=e.b}e.putImageData(r,0,0)};return d.createElement(s.Z,{title:"\uadf8\ub9bc\ub300\ud654"},d.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",color:"#f49f3f"}},d.createElement("h1",{style:{margin:"2rem 0",color:"#f49f3f"}},"\uadf8\ub9bc\ub300\ud654 \uc0dd\uc131\uae30"),d.createElement("div",{style:{width:"400px",background:"#242526",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}},d.createElement("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"}},d.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},d.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,"\uace0\uc720\uc544\uc774\ub514"),d.createElement("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"AuthID",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f"}})),d.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,"\uc81c\uc791\uc790"),d.createElement("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"Author",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f"}}))),d.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,"\uad6c\ubd84\ud560 \ud30c\uc77c\uba85"),d.createElement("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Custom File Name",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f"}})),d.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,d.createElement("input",{type:"checkbox",checked:y,onChange:e=>x(e.target.checked)}),"\uc0c9\uc0c1 \uac00\uc911\uce58 \uc0ac\uc6a9\ud558\uae30")),y&&d.createElement(d.Fragment,null,d.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,"\uac00\uc911\uce58 \uc124\uc815 (0.2 ~ 0.5)"),d.createElement("input",{type:"range",min:"0.2",max:"0.5",step:"0.01",value:E,onChange:e=>b(parseFloat(e.target.value)),title:"\uac00\uc911\uce58 \uc124\uc815"})),d.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,"\uac00\uc911\uce58 \uc0c9\uc0c1 \uc120\ud0dd"),d.createElement("input",{type:"color",value:w,onChange:e=>v(e.target.value),title:"\uac00\uc911\uce58 \uc0c9\uc0c1"}))),d.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"}},d.createElement("label",null,"\uc774\ubbf8\uc9c0 \ucd94\uac00 *"),d.createElement("input",{type:"file",accept:"image/png",onChange:async e=>{const t=e.target.files[0];if(!t||"image/png"!==t.type)return void alert("PNG \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");const a=await async function(e){let{file:t,maxWidth:n,maxHeight:a}=e;return new Promise((e=>{const l=URL.createObjectURL(t),r=new Image;r.src=l,r.onload=()=>{URL.revokeObjectURL(l),e(r.width<=n&&r.height<=a)},r.onerror=()=>{URL.revokeObjectURL(l),e(!1)}}))}({file:t,maxWidth:256,maxHeight:96});if(!a)return alert("\uc774\ubbf8\uc9c0 \ud06c\uae30\uac00 256x96 \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4."),void n(null);const l=function(e){let t=r(e);return t=t.filter((e=>{let{type:t}=e;return"tEXt"!==t})),i(c(t),e,t)}(await t.arrayBuffer()),s=function(e,t,n){const a=r(e),l=o("authid",t),s=o("author",n),u=a.findIndex((e=>{let{type:t}=e;return"IHDR"===t||"PLTE"===t}))+1;return a.splice(u,0,l,s),i(c(a),e,a)}(l,g,p),u=new Blob([s],{type:"image/png"});n(URL.createObjectURL(u))},title:"Upload Image",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f",cursor:"pointer"}}),d.createElement("small",{style:{color:"#7f8c8d"}},"\ucd5c\ub300 256x96px, PNG \ud30c\uc77c\ub9cc \uac00\ub2a5")),t&&d.createElement("button",{type:"button",onClick:()=>{const t=e.current;if(t){const e=`chat_${u.ou.now().toFormat("yyyyMMdd_HHmmss")}_${a||"\uadf8\ub9bc\ub300\ud654"}.webp`;!function(e){let{href:t,name:n}=e;const a=document.createElement("a");a.download=n,a.href=t,a.click()}({href:t.toDataURL("image/webp"),name:e})}},style:{backgroundColor:"#f28913",color:"white",padding:"0.5rem",borderRadius:"0.25rem",cursor:"pointer"}},"\uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc"))),t&&d.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"2rem",textAlign:"center"}},d.createElement("h3",null,"\ubbf8\ub9ac\ubcf4\uae30"),d.createElement("canvas",{ref:e}))))}}}]);