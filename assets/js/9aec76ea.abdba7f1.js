"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["46887"],{98829:function(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>u});var r=t(98200),i=t(74132),l=t(89447);let s={title:"Laravel 5.5\uC5D0 JWT (Json Web Token) Auth \uCD94\uAC00\uD558\uAE30",authors:"me",tags:["php","laravel","jwt","oauth2"],date:new Date("2017-11-03T07:59:40.000Z")},a=void 0,o={authorsImageUrls:[void 0]},u=[{value:"\uC124\uCE58",id:"\uC124\uCE58",level:2},{value:"jwt-auth",id:"jwt-auth",level:3},{value:"service provider \uB4F1\uB85D",id:"service-provider-\uB4F1\uB85D",level:3},{value:"\uC124\uC815\uD30C\uC77C publish",id:"\uC124\uC815\uD30C\uC77C-publish",level:3},{value:"secret key \uC0DD\uC131",id:"secret-key-\uC0DD\uC131",level:3},{value:"\uC5F0\uB3D9",id:"\uC5F0\uB3D9",level:2},{value:"API Route \uC124\uC815",id:"api-route-\uC124\uC815",level:3},{value:"Member Model \uC124\uC815",id:"member-model-\uC124\uC815",level:3},{value:"\uC0AC\uC6A9\uD558\uAE30",id:"\uC0AC\uC6A9\uD558\uAE30",level:2},{value:"login",id:"login",level:3},{value:"Authorized Routes",id:"authorized-routes",level:3},{value:"Accept Header",id:"accept-header",level:4},{value:"token \uD0DC\uC6B0\uAE30",id:"token-\uD0DC\uC6B0\uAE30",level:4},{value:"routes",id:"routes",level:4},{value:"logout",id:"logout",level:3},{value:"refresh",id:"refresh",level:3},{value:"\uC5EC\uB2F4",id:"\uC5EC\uB2F4",level:2}];function h(e){let n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\uAC80\uC0C9\uD574 \uB098\uC628 \uD3EC\uC2A4\uD2B8\uB4E4\uC740 5.4\uBC84\uC804\uC5D0 \uB300\uD574\uC11C\uB9CC \uB098\uC640\uC788\uC5B4\uC11C, 5.5\uC5D0\uC11C\uB294 \uC544\uBB34\uC9DD\uC5D0 \uC4F8\uBAA8\uAC00 \uC5C6\uC5C8\uB2E4.\n\uB77C\uB77C\uBCA8\uC5D0\uC11C \uC883\uC778\uC99D\uC744 \uC2DC\uC791\uD574\uBCF4\uC790."}),"\n",(0,i.jsx)(n.h2,{id:"\uC124\uCE58",children:"\uC124\uCE58"}),"\n",(0,i.jsx)(n.h3,{id:"jwt-auth",children:"jwt-auth"}),"\n",(0,i.jsx)(n.p,{children:"171103 \uAE30\uC900\uC73C\uB85C dev-develop \uBC84\uC804\uC758 \uD328\uD0A4\uC9C0\uB97C \uC124\uCE58\uD574\uC57C\uD55C\uB2E4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"composer require tymon/jwt-auth:1.0.0-rc.1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"service-provider-\uB4F1\uB85D",children:"service provider \uB4F1\uB85D"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="config/app.php"',children:"<?php\n\n'providers' => [\n  ...\n  Tymon\\JWTAuth\\Providers\\LaravelServiceProvider::class,\n],\n\n'alias' => [\n  ...\n  'JWTAuth' => Tymon\\JWTAuth\\Facades\\JWTAuth::class\n],\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\uC124\uC815\uD30C\uC77C-publish",children:"\uC124\uC815\uD30C\uC77C publish"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'php artisan vendor:publish --provider="Tymon\\JWTAuth\\Providers\\LaravelServiceProvider" --force\n'})}),"\n",(0,i.jsx)(n.h3,{id:"secret-key-\uC0DD\uC131",children:"secret key \uC0DD\uC131"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"php artisan jwt:secret\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uC5F0\uB3D9",children:"\uC5F0\uB3D9"}),"\n",(0,i.jsx)(n.h3,{id:"api-route-\uC124\uC815",children:"API Route \uC124\uC815"}),"\n",(0,i.jsx)(n.p,{children:"API \uAC00\uB4DC\uC640 \uC720\uC800 \uBAA8\uB378\uC744 \uC124\uC815\uD558\uB2E4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="config/auth.php"',children:"<?php\nreturn [\n  'defaults' => [\n    'guard' => 'api', // \uAE30\uBCF8 \uAC00\uB4DC\uB97C api\uB85C \uBCC0\uACBD\n    'passwords' => 'users',\n  ],\n\n  'guards' => [\n    ...\n    'api' => [\n      'driver' => 'jwt', // api \uAC00\uB4DC\uB97C jwt \uC778\uC99D\uC744 \uC0AC\uC6A9\n      'provider' => 'users',\n    ],\n  ],\n\n  'providers' => [\n    'users' => [\n      'driver' => 'eloquent',\n      'model' => App\\Models\\Member::class, // \uC720\uC800 \uBAA8\uB378\uC744 \uD574\uB2F9 \uBAA8\uB378\uB85C \uBCC0\uACBD\n    ],\n  ],\n  ...\n];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"member-model-\uC124\uC815",children:"Member Model \uC124\uC815"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="app/Models/Member.php"',children:"<?php\n...\n// jwt\uB97C \uBAA8\uB378\uC5D0\uC11C \uC0AC\uC6A9\uD558\uAE30 \uC704\uD574 \uCD94\uAC00\uD55C\uB2E4.\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;\nuse Tymon\\JWTAuth\\Contracts\\JWTSubject;\n...\n\nclass Member extends Authenticatable implements JWTSubject\n{\n  // \uC544\uB798 \uB450 \uBA54\uC18C\uB4DC\uAC00 \uAD6C\uD604\uB418\uC5B4\uC57C \uC2E4\uD589\uB41C\uB2E4.\n  public function getJWTIdentifier() {\n    return $this->getKey();\n  }\n\n  public function getJWTCustomClaims() {\n    return [];\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uC0AC\uC6A9\uD558\uAE30",children:"\uC0AC\uC6A9\uD558\uAE30"}),"\n",(0,i.jsx)(n.h3,{id:"login",children:"login"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="app/Http/MemberController.php"',children:"<?php\npublic function login(Request $request) {\n  $credentials = $this->validate($request, [\n    'id' => 'required|string',\n    'password' => 'required|string'\n  ]);\n\n  if ($token = $this->guard()->attempt($credentials)) {\n    return $this->respondWithToken($token);\n  }\n\n  return response()->json(['message' => 'Unauthorized'], 401);\n}\n\nprotected function respondWithToken($token) {\n  return response()->json([\n    'access_token' => $token,\n    'token_type' => 'bearer',\n    'expires_in' => $this->guard()->factory()->getTTL() * 60\n  ]);\n}\n\npublic function guard() {\n  return Auth::guard();\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"authorized-routes",children:"Authorized Routes"}),"\n",(0,i.jsx)(n.h4,{id:"accept-header",children:"Accept Header"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"application/json"})," \uB85C \uC124\uC815\uD574\uC57C \uC624\uB958\uAC00 \uC608\uC058\uAC8C \uBC18\uD658\uB41C\uB2E4."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"token-\uD0DC\uC6B0\uAE30",children:"token \uD0DC\uC6B0\uAE30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"## header \uC774\uC6A9\uD55C \uBC29\uBC95\nAuthorization: Bearer yourtokens...\n\n## Querystring\uC73C\uB85C\uB3C4 \uC778\uC99D \uAC00\uB2A5\nhttps://gracefullight.github.io/me?token=yourtokens...\n"})}),"\n",(0,i.jsx)(n.h4,{id:"routes",children:"routes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="routes/api.php"',children:"Route::group(['middleware' => 'auth:api'], function() {\n  Route::get('member/logout', 'MemberController@logout');\n  Route::get('member/me', 'MemberController@me');\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"logout",children:"logout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="app/Http/MemberController.php"',children:"<?php\npublic function logout(Request $request) {\n  $this->guard()->logout();\n  return response(null, 204);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"refresh",children:"refresh"}),"\n",(0,i.jsxs)(n.p,{children:["refresh\uB294 auth",":api"," \uBBF8\uB4E4\uC6E8\uC5B4 \uC5C6\uC774 \uCC98\uB9AC\uB418\uC5B4\uC57C\uD55C\uB2E4."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",metastring:'title="app/Http/MemberController.php"',children:"<?php\npublic function refresh() {\n  return $this->respondWithToken($this->guard()->refresh());\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uC5EC\uB2F4",children:"\uC5EC\uB2F4"}),"\n",(0,i.jsx)(n.p,{children:"Expired\uAC70\uB098 Unauthoriezed\uACBD\uC6B0 status code\uB85C \uCCB4\uD06C\uD558\uBA74 \uB41C\uB2E4.\n5.5\uBC84\uC804 \uBA54\uB274\uC5BC\uC774 \uBD80\uC871\uD558\uB2E4."})]})}function p(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},89447:function(e,n,t){t.d(n,{Z:()=>a,a:()=>s});var r=t(39546);let i={},l=r.createContext(i);function s(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}},98200:function(e){e.exports=JSON.parse('{"permalink":"/2017/11/03/Laravel-5-5-JWT-Auth-Guide","source":"@site/blog/2017/11/03/Laravel-5-5-JWT-Auth-Guide.md","title":"Laravel 5.5\uC5D0 JWT (Json Web Token) Auth \uCD94\uAC00\uD558\uAE30","description":"\uAC80\uC0C9\uD574 \uB098\uC628 \uD3EC\uC2A4\uD2B8\uB4E4\uC740 5.4\uBC84\uC804\uC5D0 \uB300\uD574\uC11C\uB9CC \uB098\uC640\uC788\uC5B4\uC11C, 5.5\uC5D0\uC11C\uB294 \uC544\uBB34\uC9DD\uC5D0 \uC4F8\uBAA8\uAC00 \uC5C6\uC5C8\uB2E4.","date":"2017-11-03T07:59:40.000Z","tags":[{"inline":true,"label":"php","permalink":"/tags/php"},{"inline":true,"label":"laravel","permalink":"/tags/laravel"},{"inline":true,"label":"jwt","permalink":"/tags/jwt"},{"inline":true,"label":"oauth2","permalink":"/tags/oauth-2"}],"readingTime":1.7,"hasTruncateMarker":false,"authors":[{"name":"Eunkwang Shin","title":"Owner","url":"https://github.com/gracefullight","socials":{"linkedin":"https://www.linkedin.com/in/gracefullight/","github":"https://github.com/gracefullight"},"description":"Full Stack JavaScript Developer | Half-time Open Sourcerer.","page":{"permalink":"/authors/me"},"imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me"}],"frontMatter":{"title":"Laravel 5.5\uC5D0 JWT (Json Web Token) Auth \uCD94\uAC00\uD558\uAE30","authors":"me","tags":["php","laravel","jwt","oauth2"],"date":"2017-11-03T07:59:40.000Z"},"unlisted":false,"prevItem":{"title":"Vue multi page app\uC5D0\uC11C \uCF54\uB4DC\uAC00 \uBBF8\uB9AC\uBCF4\uC774\uB294 \uD604\uC0C1 \uC81C\uAC70","permalink":"/2017/11/08/Vue-multi-page-app\uC5D0\uC11C-\uCF54\uB4DC\uAC00-\uBBF8\uB9AC\uBCF4\uC774\uB294-\uD604\uC0C1-\uC81C\uAC70"},"nextItem":{"title":"Docker jenkins \uC124\uCE58\uC2DC permission \uC624\uB958","permalink":"/2017/10/28/Docker-jenkins-\uC124\uCE58\uC2DC-permission-\uC624\uB958"}}')}}]);