"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[1905],{26071:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(68633),l=n(63815);function a(e){const t=new DataView(e);let n=8;const r=[];for(;n<t.byteLength;){const l=t.getUint32(n);n+=4;const a=String.fromCodePoint(t.getUint8(n),t.getUint8(n+1),t.getUint8(n+2),t.getUint8(n+3));n+=4;const i=new Uint8Array(e,n,l);n+=l;const s=t.getUint32(n);n+=4,r.push({type:a,data:i,crc:s})}return r}function i(e){let t=8;for(const n of e)t+=12+n.data.length;return t}function s(e,t){const n="zTXt",a=(new TextEncoder).encode(e),i=new Uint8Array([0]),s=(new TextEncoder).encode(t),c=(0,l.Kc)(s),o=new Uint8Array(a.length+1+1+c.length);o.set(a,0),o.set([0],a.length),o.set(i,a.length+1),o.set(c,a.length+2);const d=new Uint8Array(4+o.length);d.set((new TextEncoder).encode(n),0),d.set(o,4);return{type:n,data:o,crc:(0,r.buf)(d)}}function c(e,t,n){const r=new ArrayBuffer(e),l=new Uint8Array(r);l.set(new Uint8Array(t,0,8),0);let a=8;for(const{type:i,data:s,crc:c}of n){const e=new DataView(r,a,12+s.length);e.setUint32(0,s.length),l.set((new TextEncoder).encode(i),a+4),l.set(s,a+8),e.setUint32(8+s.length,c),a+=12+s.length}return r}var o=n(65374),d=n(61333),u=n(9063),g=n(30758),h=n(86070);function f(){const e=(0,g.useRef)(null),[t,n]=(0,g.useState)(null),[r,l]=(0,g.useState)(""),[f,p]=(0,g.useState)("-1379962171"),[x,m]=(0,g.useState)("Eargasm"),[y,b]=(0,g.useState)(!1),[j,v]=(0,g.useState)(.2),[w,U]=(0,g.useState)("#F58D16"),I=(0,g.useId)(),D=(0,g.useId)(),R=(0,g.useId)(),C=(0,g.useId)(),k=(0,g.useId)(),L=(0,g.useId)(),E=(0,g.useCallback)((e=>{const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),n=t.data;for(let r=0;r<n.length;r+=4)255===n[r]&&255===n[r+1]&&255===n[r+2]&&(n[r+2]=254);e.putImageData(t,0,0)}),[]),A=(0,g.useCallback)(((e,t)=>{const n={b:Number.parseInt(t.slice(5,7),16),g:Number.parseInt(t.slice(3,5),16),r:Number.parseInt(t.slice(1,3),16)},r=e.getImageData(0,0,e.canvas.width,e.canvas.height),l=r.data,a=[];for(let d=0;d<l.length;d+=4)a.push([l[d],l[d+1],l[d+2]]);const i=(0,u.Y)(a,4,{}),s=i.centroids.map((e=>({b:e[2],g:e[1],r:e[0]})));if(y){let e=0,t=Number.MAX_SAFE_INTEGER;for(let l=0;l<s.length;l++){const r=s[l],a=(c=n,o=r,Math.sqrt((c.r-o.r)**2+(c.g-o.g)**2+(c.b-o.b)**2));a<t&&(t=a,e=l)}const r=s[e];r.r=r.r*(1-j)+n.r*j,r.g=r.g*(1-j)+n.g*j,r.b=r.b*(1-j)+n.b*j}var c,o;for(let d=0;d<l.length;d+=4){const e=s[i.clusters[Math.floor(d/4)]];l[d]=e.r,l[d+1]=e.g,l[d+2]=e.b}e.putImageData(r,0,0)}),[y,j]);(0,g.useEffect)((()=>{if(t){const n=new Image;n.src=t,n.addEventListener("load",(()=>{const t=e.current;if(t){t.width=n.width,t.height=n.height;const e=t.getContext("2d");e&&(e.drawImage(n,0,0),E(e),A(e,w))}}))}return()=>{t&&URL.revokeObjectURL(t)}}),[t,w,E,A]);const F=(0,g.useCallback)((async e=>{const t=e.target.files?.[0];if(!t||"image/png"!==t.type)return void alert("PNG \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");const r=await function(e){let{file:t,maxWidth:n,maxHeight:r}=e;return new Promise((e=>{const l=URL.createObjectURL(t),a=new Image;a.src=l,a.addEventListener("load",(()=>{URL.revokeObjectURL(l),e(a.width<=n&&a.height<=r)})),a.addEventListener("error",(()=>{URL.revokeObjectURL(l),e(!1)}))}))}({file:t,maxHeight:96,maxWidth:256});if(!r)return alert("\uc774\ubbf8\uc9c0 \ud06c\uae30\uac00 256x96 \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4."),void n(null);const l=function(e){let t=a(e);return t=t.filter((e=>{let{type:t}=e;return"tEXt"!==t})),c(i(t),e,t)}(await t.arrayBuffer()),o=function(e,t,n){const r=a(e),l=s("authid",t),o=s("author",n),d=r.findIndex((e=>{let{type:t}=e;return"IHDR"===t}))+1;return"PLTE"===r[d]?.type?r.splice(d+1,0,l,o):r.splice(d,0,l,o),c(i(r),e,r)}(l,f,x),d=new Blob([o],{type:"image/png"});n(URL.createObjectURL(d))}),[f,x]),S=(0,g.useCallback)((()=>{const t=e.current;if(t){const e=`chat_${d.c9.now().toFormat("yyyyMMdd_HHmmss")}_${r||"\uadf8\ub9bc\ub300\ud654"}.png`;!function(e){let{href:t,name:n}=e;const r=document.createElement("a");r.download=n,r.href=t,r.click()}({href:t.toDataURL("image/png"),name:e})}}),[r]);return(0,h.jsx)(o.A,{children:(0,h.jsxs)("div",{style:{alignItems:"center",color:"#f49f3f",display:"flex",flexDirection:"column"},children:[(0,h.jsx)("h1",{style:{color:"#f49f3f",margin:"2rem 0"},children:"\uadf8\ub9bc\ub300\ud654 \uc0dd\uc131\uae30"}),(0,h.jsx)("div",{style:{background:"#242526",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:"1rem",width:"400px"},children:(0,h.jsxs)("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,h.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"space-between"},children:[(0,h.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{htmlFor:I,children:"\uace0\uc720\uc544\uc774\ub514"}),(0,h.jsx)("input",{id:I,onChange:e=>p(e.target.value),placeholder:"AuthID",style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",padding:"0.5rem"},type:"text",value:f})]}),(0,h.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{htmlFor:D,children:"\uc81c\uc791\uc790"}),(0,h.jsx)("input",{id:D,onChange:e=>m(e.target.value),placeholder:"Author",style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",padding:"0.5rem"},type:"text",value:x})]})]}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{htmlFor:R,children:"\uad6c\ubd84\ud560 \ud30c\uc77c\uba85"}),(0,h.jsx)("input",{id:R,onChange:e=>l(e.target.value),placeholder:"Custom File Name",style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",padding:"0.5rem"},type:"text",value:r})]}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{checked:y,onChange:e=>b(e.target.checked),type:"checkbox"}),"\uc0c9\uc0c1 \uac00\uc911\uce58 \uc0ac\uc6a9\ud558\uae30"]})}),y&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{htmlFor:C,children:"\uac00\uc911\uce58 \uc124\uc815 (0.2 ~ 0.5)"}),(0,h.jsx)("input",{id:C,max:"0.5",min:"0.2",onChange:e=>v(Number.parseFloat(e.target.value)),step:"0.01",title:"\uac00\uc911\uce58 \uc124\uc815",type:"range",value:j})]}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{htmlFor:k,children:"\uac00\uc911\uce58 \uc0c9\uc0c1 \uc120\ud0dd"}),(0,h.jsx)("input",{id:k,onChange:e=>U(e.target.value),title:"\uac00\uc911\uce58 \uc0c9\uc0c1",type:"color",value:w})]})]}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{htmlFor:L,children:"\uc774\ubbf8\uc9c0 \ucd94\uac00 *"}),(0,h.jsx)("input",{accept:"image/png",id:L,onChange:F,style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",cursor:"pointer",padding:"0.5rem"},title:"Upload Image",type:"file"}),(0,h.jsx)("small",{style:{color:"#7f8c8d"},children:"\ucd5c\ub300 256x96px, PNG \ud30c\uc77c\ub9cc \uac00\ub2a5"})]}),t&&(0,h.jsx)("button",{onClick:S,style:{backgroundColor:"#f28913",borderRadius:"0.25rem",color:"white",cursor:"pointer",padding:"0.5rem"},type:"button",children:"\uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc"})]})}),t&&(0,h.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:"2rem",textAlign:"center"},children:[(0,h.jsx)("h3",{children:"\ubbf8\ub9ac\ubcf4\uae30"}),(0,h.jsx)("canvas",{ref:e})]})]})})}}}]);