"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[36437],{87960:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>h});var s=t(95658),i=t(86070),r=t(14036);const l={title:"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\ub205\uc2a4 \ucee4\ub110 \ud29c\ub2dd\ud558\uae30",authors:"me",tags:["k8s","docker","linux"],date:new Date("2020-01-24T23:43:55.000Z")},c=void 0,a={authorsImageUrls:[void 0]},h=[{value:"\ubcc0\uacbd\uac00\ub2a5\ud55c \ucee4\ub110 \uc124\uc815",id:"\ubcc0\uacbd\uac00\ub2a5\ud55c-\ucee4\ub110-\uc124\uc815",level:2},{value:"ARP \uce90\uc2dc",id:"arp-\uce90\uc2dc",level:3},{value:"\uc608\uc2dc",id:"\uc608\uc2dc",level:2},{value:"\uc5ec\ub2f4",id:"\uc5ec\ub2f4",level:2},{value:"\ucc38\uc870",id:"\ucc38\uc870",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\ubcc0\uacbd\uac00\ub2a5\ud55c-\ucee4\ub110-\uc124\uc815",children:"\ubcc0\uacbd\uac00\ub2a5\ud55c \ucee4\ub110 \uc124\uc815"}),"\n",(0,i.jsx)(n.p,{children:"\ub178\ub4dc \ub808\ubca8\uc758 sysctl\uacfc \ub124\uc784\uc2a4\ud398\uc774\uc2a4 sysctl\uacfc \uac19\uc740 \ucee4\ub110 \ud30c\ub77c\ubbf8\ud130\ub97c sysctl \uc778\ud130\ud398\uc774\uc2a4\ub85c \ubcc0\uacbd\ud560 \uc218 \uc788\ub2e4.\n\ubcc0\uacbd \uac00\ub2a5\ud55c \ud30c\ub77c\ubbf8\ud130\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"abi"}),": \uc2e4\ud589 \ub3c4\uba54\uc778 \ud2b9\uc131"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"fs"}),": \ud2b9\uc815 \ud30c\uc77c \uc2dc\uc2a4\ud15c, \ud30c\uc77c \ud578\ub4e4\ub9c1, inode, dentry, \ucffc\ud130 \uc870\uc815"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"kernel"}),": \uc804\uc5ed \ucee4\ub110 \uc124\uc815 \ubcc0\uacbd"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"net"}),": \ub124\ud2b8\uc6cc\ud0b9"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"sunrpc"}),": SUN rpc \ud638\ucd9c"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"vm"}),": \uba54\ubaa8\ub9ac \uc870\uc815, \ubc84\ud37c \ubc0f \uce90\uc2dc \uad00\ub9ac"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"user"}),": \uc0ac\uc6a9\uc790\ubcc4 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc81c\ud55c"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"taint, toleration"})," \uc744 \uac19\uc774 \uc0ac\uc6a9\ud574 \uc0ac\uc774\ub4dc\uc774\ud399\uc744 \ubc29\uc9c0\ud558\ub77c\uace0 \uad8c\ud558\uace0 \uc788\ub2e4."]}),"\n",(0,i.jsx)(n.h3,{id:"arp-\uce90\uc2dc",children:"ARP \uce90\uc2dc"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"neighbour: arp_cache: neighbor table overflow!"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\ucfe0\ubc84\ub124\ud2f0\uc2a4\uac00 \ub300\ub7c9\uc758 IP\ub97c \uc18c\ube44\ud558\uba74\uc11c ARP \uce90\uc2dc \uacf5\uac04\uc744 \ubaa8\ub450 \uc0ac\uc6a9\ud560 \uacbd\uc6b0 ARP \uce90\uc2dc \uad00\ub828 \ubcc0\uc218 \uc870\uc808\uc774 \uac00\ub2a5\ud558\ub2e4.\n\ub300\uaddc\ubaa8 HPC \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c\ub294 \ud754\ud55c \uc77c\uc774\uba70 \ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \uc8fc\uc18c \uc18c\uc9c4\uc744 \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4.\n\uc774 \uc624\ub958\ub294 ",(0,i.jsx)(n.code,{children:"nodes with 40+ cores"})," && ",(0,i.jsx)(n.code,{children:"more than 16 segments in each node"})," \uc815\ub3c4\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ub4ef \ud558\ub2e4."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"net.ipv4.neigh.default.gc_thresh1"}),": gc_thresh1 represents the minimum number of entries that may be in the ARP cache. Garbage collection will not be triggered if the number of entries is below this setting."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"net.ipv4.neigh.default.gc_thresh2"}),": gc_thresh2 represents the soft maximum number of entries that may be in the ARP cache. This setting is arguably the most important, as ARP garbage collection will be triggered ~5s after reaching this soft maximum."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"net.ipv4.neigh.default.gc_thresh3"}),": gc_thresh3 represents the hard maximum number of entries in the ARP cache."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"net.ipv4.neigh.default.gc_thresh1 = 80000\nnet.ipv4.neigh.default.gc_thresh2 = 90000\nnet.ipv4.neigh.default.gc_thresh3 = 100000\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uc608\uc2dc",children:"\uc608\uc2dc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: sysctl-example\nspec:\n  securityContext:\n    sysctls:\n      - name: kernel.shm_rmid_forced\n        value: "0"\n      - name: net.core.somaxconn\n        value: "10000"\n      - name: kernel.msgmax\n        value: "65536"\n      - name: fs.file-max\n        value: "2097152"\n      - name: net.ipv4.ip_local_port_range\n        value: "1024 65536"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\uc5ec\ub2f4",children:"\uc5ec\ub2f4"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\ud30c\uba74 \ud314\uc218\ub85d \ub9ac\ub205\uc2a4\ubd80\ud130 \ub2e4\uc2dc \uc815\ub9ac\ud574\uc57c\ub418\uaca0\ub2e4\ub294 \ub290\ub08c\uc774 \ub4e0\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\ucc38\uc870",children:"\ucc38\uc870"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/administer-cluster/sysctl-cluster/",children:"Using sysctls in a Kubernetes Cluster"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://meetup.toast.com/posts/54",children:"\ub9ac\ub205\uc2a4 \uc11c\ubc84\uc758 TCP \ub124\ud2b8\uc6cc\ud06c \uc131\ub2a5\uc744 \uacb0\uc815\uc9d3\ub294 \ucee4\ub110 \ud30c\ub77c\ubbf8\ud130 \uc774\uc57c\uae30 - 2\ud3b8"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://success.docker.com/article/how-to-increase-the-arp-cache-collection-threshold",children:"How to increase the ARP cache garbage collection threshold"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://openai.com/blog/scaling-kubernetes-to-2500-nodes/",children:"Scaling Kubernetes to 2,500 nodes"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},14036:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var s=t(30758);const i={},r=s.createContext(i);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},95658:e=>{e.exports=JSON.parse('{"permalink":"/2020/01/24/k8s-linux-kernel-tuning","source":"@site/blog/2020/01/24/k8s-linux-kernel-tuning.md","title":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\ub205\uc2a4 \ucee4\ub110 \ud29c\ub2dd\ud558\uae30","description":"\ubcc0\uacbd\uac00\ub2a5\ud55c \ucee4\ub110 \uc124\uc815","date":"2020-01-24T23:43:55.000Z","tags":[{"inline":true,"label":"k8s","permalink":"/tags/k-8-s"},{"inline":true,"label":"docker","permalink":"/tags/docker"},{"inline":true,"label":"linux","permalink":"/tags/linux"}],"readingTime":2.43,"hasTruncateMarker":false,"authors":[{"name":"Eunkwang Shin","title":"Owner","url":"https://github.com/gracefullight","socials":{"linkedin":"https://www.linkedin.com/in/gracefullight/","github":"https://github.com/gracefullight"},"description":"Full Stack JavaScript Developer | Half-time Open Sourcerer.","page":{"permalink":"/authors/me"},"imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me"}],"frontMatter":{"title":"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\ub205\uc2a4 \ucee4\ub110 \ud29c\ub2dd\ud558\uae30","authors":"me","tags":["k8s","docker","linux"],"date":"2020-01-24T23:43:55.000Z"},"unlisted":false,"prevItem":{"title":"Pythonic - \ud578\ub4e4\ub9c1","permalink":"/2020/01/27/Pythonic-handling"},"nextItem":{"title":"\uc11c\ube44\uc2a4\uc6cc\ucee4\ub85c POST Request \uce90\uc2f1\ud558\uae30","permalink":"/2020/01/16/Serviceworker-cache-POST-requests"}}')}}]);