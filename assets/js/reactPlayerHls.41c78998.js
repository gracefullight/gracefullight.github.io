"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["80107"],{90133(e,t,i){let a;i.r(t),i.d(t,{default:()=>f});var s=i(96540),l=i(61121),n=i(86501),o=i(64945);let r=(a=(0,n.u6)(l.lB),class extends a{static shadowRootOptions={...a.shadowRootOptions};static getTemplateHTML=(e,t={})=>{let{src:i,...s}=e;return`
        <script type="application/json" id="config">
          ${JSON.stringify(t.config||{})}
        </script>
        ${a.getTemplateHTML(s)}
      `};#e=null;#t=null;constructor(){super(),this.#i("config")}get config(){return this.#t}set config(e){this.#t=e}attributeChangedCallback(e,t,i){"src"!==e&&super.attributeChangedCallback(e,t,i),"src"===e&&t!=i&&this.load()}#a(){var e,t;null==(e=this.#e)||e.remove(),null==(t=this.nativeEl)||t.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.#s),this.api&&(this.api.detachMedia(),this.api.destroy(),this.api=null)}async load(){var e,t;let i=!this.api;if(this.#a(),this.src){if(i&&!this.#t&&(this.#t=JSON.parse((null==(e=this.shadowRoot.getElementById("config"))?void 0:e.textContent)||"{}")),o.Ay.isSupported()){switch(await Promise.resolve(),this.api=new o.Ay({liveDurationInfinity:!0,autoStartLoad:!1,...this.config}),this.api.loadSource(this.src),this.api.attachMedia(this.nativeEl),this.nativeEl.preload){case"none":{let e=()=>this.api.startLoad();this.nativeEl.addEventListener("play",e,{once:!0}),this.api.on(o.Ay.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",e)});break}case"metadata":{let e=this.api.config.maxBufferLength,t=this.api.config.maxBufferSize;this.api.config.maxBufferLength=1,this.api.config.maxBufferSize=1;let i=()=>{this.api.config.maxBufferLength=e,this.api.config.maxBufferSize=t};this.nativeEl.addEventListener("play",i,{once:!0}),this.api.on(o.Ay.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",i)}),this.api.startLoad();break}default:this.api.startLoad()}this.nativeEl.webkitCurrentPlaybackTargetIsWireless&&this.api.stopLoad(),this.nativeEl.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.#s),this.#e=document.createElement("source"),this.#e.setAttribute("type","application/x-mpegURL"),this.#e.setAttribute("src",this.src),this.nativeEl.disableRemotePlayback=!1,this.nativeEl.append(this.#e);let e=new WeakMap;this.api.on(o.Ay.Events.MANIFEST_PARSED,(t,i)=>{this.nativeEl.autoplay&&this.nativeEl.paused&&this.nativeEl.play().catch(e=>{console.warn("Autoplay failed:",e)}),s();let a=this.videoTracks.getTrackById("main");for(let[t,s]of(a||((a=this.addVideoTrack("main")).id="main",a.selected=!0),i.levels.entries())){let i=a.addRendition(s.url[0],s.width,s.height,s.videoCodec,s.bitrate);e.set(s,`${t}`),i.id=`${t}`}for(let[e,t]of i.audioTracks.entries()){let i=t.default?"main":"alternative",a=this.addAudioTrack(i,t.name,t.lang);a.id=`${e}`,t.default&&(a.enabled=!0)}}),this.audioTracks.addEventListener("change",()=>{var e;let t=+(null==(e=[...this.audioTracks].find(e=>e.enabled))?void 0:e.id),i=this.api.audioTracks.map(e=>e.id);t!=this.api.audioTrack&&i.includes(t)&&(this.api.audioTrack=t)}),this.api.on(o.Ay.Events.LEVELS_UPDATED,(t,i)=>{let a=this.videoTracks[this.videoTracks.selectedIndex??0];if(!a)return;let s=i.levels.map(t=>e.get(t));for(let e of this.videoRenditions)e.id&&!s.includes(e.id)&&a.removeRendition(e)});let i=null;this.api.on(o.Ay.Events.ERROR,(e,t)=>{t.type===o.Ay.ErrorTypes.NETWORK_ERROR&&t.details===o.Ay.ErrorDetails.FRAG_LOAD_ERROR&&(i=t.frag.level)}),this.api.on(o.Ay.Events.LEVEL_SWITCHED,(e,t)=>{let a=t.level;null!==i&&a<i&&(console.warn(`\u26A0\uFE0F hls.js downgraded quality from level ${i} to ${a} due to fragment load failure.`),this.videoRenditions.selectedIndex=a,i=null)});let a=e=>{let t=e.target.selectedIndex;t!=this.api.nextLevel&&(this.api.nextLevel=t)};null==(t=this.videoRenditions)||t.addEventListener("change",a);let s=()=>{for(let e of this.videoTracks)this.removeVideoTrack(e);for(let e of this.audioTracks)this.removeAudioTrack(e)};this.api.once(o.Ay.Events.DESTROYING,s);return}await Promise.resolve(),this.nativeEl.canPlayType("application/vnd.apple.mpegurl")&&(this.nativeEl.src=this.src)}}#s=()=>{var e,t,i;(null==(e=this.nativeEl)?void 0:e.webkitCurrentPlaybackTargetIsWireless)?null==(t=this.api)||t.stopLoad():null==(i=this.api)||i.startLoad()};#i(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}}});globalThis.customElements&&!globalThis.customElements.get("hls-video")&&globalThis.customElements.define("hls-video",r);var d=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),u={className:"class",htmlFor:"for"};function c(e){return e.toLowerCase()}function h(e){return"boolean"==typeof e?e?"":void 0:"function"==typeof e?void 0:"object"!=typeof e||null===e?e:void 0}function p(e,t,i){var a;e[t]=i,null==i&&t in((null==(a=globalThis.HTMLElement)?void 0:a.prototype)??{})&&e.removeAttribute(t)}var f=function({react:e,tagName:t,elementClass:i,events:a,displayName:s,defaultProps:l,toAttributeName:n=c,toAttributeValue:o=h}){let r=Number.parseInt(e.version)>=19,f=e.forwardRef((s,c)=>{var f,v;let g=e.useRef(null),E=e.useRef(new Map),y={},m={},T={},L={};for(let[e,t]of Object.entries(s)){if(d.has(e)){T[e]=t;continue}let a=n(u[e]??e);if(i.prototype&&e in i.prototype&&!(e in((null==(f=globalThis.HTMLElement)?void 0:f.prototype)??{}))&&!(null==(v=i.observedAttributes)?void 0:v.some(e=>e===a))){L[e]=t;continue}if(e.startsWith("on")){y[e]=t;continue}let s=o(t);a&&null!=s&&(m[a]=String(s),r||(T[a]=s)),a&&r&&(s!==h(t)?T[a]=s:T[a]=t)}if("u">typeof window){for(let t in y){let i=y[t],s=t.endsWith("Capture"),l=((null==a?void 0:a[t])??t.slice(2).toLowerCase()).slice(0,s?-7:void 0);e.useLayoutEffect(()=>{let e=null==g?void 0:g.current;if(e&&"function"==typeof i)return e.addEventListener(l,i,s),()=>{e.removeEventListener(l,i,s)}},[null==g?void 0:g.current,i])}e.useLayoutEffect(()=>{if(null===g.current)return;let e=new Map;for(let t in L)p(g.current,t,L[t]),E.current.delete(t),e.set(t,L[t]);for(let[e,t]of E.current)p(g.current,e,void 0);E.current=e})}if("u"<typeof window&&(null==i?void 0:i.getTemplateHTML)&&(null==i?void 0:i.shadowRootOptions)){let{mode:t,delegatesFocus:a}=i.shadowRootOptions;T.children=[e.createElement("template",{shadowrootmode:t,shadowrootdelegatesfocus:a,dangerouslySetInnerHTML:{__html:i.getTemplateHTML(m,s)},key:"ce-la-react-ssr-template-shadow-root"}),T.children]}return e.createElement(t,{...l,...T,ref:e.useCallback(e=>{g.current=e,"function"==typeof c?c(e):null!==c&&(c.current=e)},[c])},T.children)});return f.displayName=s??i.name,f}({react:s,tagName:"hls-video",elementClass:r,toAttributeName:e=>"muted"===e?"":"defaultMuted"===e?"muted":c(e)})}}]);