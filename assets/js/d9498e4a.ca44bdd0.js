"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[79306],{85225:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var t=i(52676),a=i(75635);const o={title:"Vimeo Upload API - 2. PHP API",authors:"me",tags:["php","vimeo"],date:new Date("2017-01-18T10:50:14.000Z")},r=void 0,l={permalink:"/2017/01/18/Vimeo-Upload-API-2-PHP-API",source:"@site/blog/2017/01/18/Vimeo-Upload-API-2-PHP-API.md",title:"Vimeo Upload API - 2. PHP API",description:"Vimeo Developers \ub4f1\ub85d\uc5d0\uc11c \uc774\uc5b4\uc9d1\ub2c8\ub2e4.",date:"2017-01-18T10:50:14.000Z",tags:[{inline:!0,label:"php",permalink:"/tags/php"},{inline:!0,label:"vimeo",permalink:"/tags/vimeo"}],readingTime:7.205,hasTruncateMarker:!1,authors:[{name:"Eunkwang Shin",title:"Owner",url:"https://github.com/gracefullight",socials:{linkedin:"https://www.linkedin.com/in/gracefullight/",github:"https://github.com/gracefullight"},description:"Full Stack JavaScript Developer | Half-time Open Sourcerer.",page:{permalink:"/authors/me"},imageURL:"https://avatars.githubusercontent.com/u/11773683?v=4",key:"me"}],frontMatter:{title:"Vimeo Upload API - 2. PHP API",authors:"me",tags:["php","vimeo"],date:"2017-01-18T10:50:14.000Z"},unlisted:!1,prevItem:{title:"id\uc5d0 .(pariod)\uc774 \uc788\ub294 element querySelector",permalink:"/2017/01/18/querySelector-escape-pariod"},nextItem:{title:"Vimeo Upload API - 1. Vimeo Developers",permalink:"/2017/01/16/Vimeo-Upload-API-1-Vimeo-Developers"}},s={authorsImageUrls:[void 0]},d=[{value:"PHP API \uc124\uce58",id:"php-api-\uc124\uce58",level:2},{value:"composer",id:"composer",level:3},{value:"\uc9c1\uc811 \uc124\uce58",id:"\uc9c1\uc811-\uc124\uce58",level:3},{value:"\uc124\uc815 \ubcc0\uacbd",id:"\uc124\uc815-\ubcc0\uacbd",level:2},{value:"Upload API \uc0ac\uc6a9",id:"upload-api-\uc0ac\uc6a9",level:2},{value:"\uae30\ubcf8 \uc608\uc81c \uc18c\uc2a4",id:"\uae30\ubcf8-\uc608\uc81c-\uc18c\uc2a4",level:3},{value:"\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",id:"\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",level:3},{value:"video_data endpoint",id:"video_data-endpoint",level:3},{value:"\uc5ec\ub2f4",id:"\uc5ec\ub2f4",level:2}];function p(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:"/2017/01/16/Vimeo-Upload-API-1-Vimeo-Developers/",children:"Vimeo Developers \ub4f1\ub85d"}),"\uc5d0\uc11c \uc774\uc5b4\uc9d1\ub2c8\ub2e4."]}),"\n",(0,t.jsx)(e.h2,{id:"php-api-\uc124\uce58",children:"PHP API \uc124\uce58"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:"https://developer.vimeo.com/api/libraries",children:"Vimeo Libraries"}),"\uc5d0\uc11c \uc6d0\ud558\ub294 API\ub97c \uc120\ud0dd\ud558\uba74 \ub41c\ub2e4.\n",(0,t.jsx)(e.strong,{children:"Server Libraries PHP"}),"\uc5d0\uc11c Download\ub97c \ud074\ub9ad\ud558\uba74 Github\ub85c \uc774\ub3d9\ud558\uace0 ",(0,t.jsx)(e.a,{href:"https://github.com/vimeo/vimeo.php#installation",children:"Installation"}),"\uc744 \ucc38\uc870\ud558\uba74 \ub41c\ub2e4."]}),"\n",(0,t.jsx)(e.h3,{id:"composer",children:"composer"}),"\n",(0,t.jsx)(e.p,{children:"composer\uac00 \uc788\uc73c\uba74 \uc27d\uac8c \uc124\uce58\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"composer require vimeo/vimeo-api\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\uc9c1\uc811-\uc124\uce58",children:"\uc9c1\uc811 \uc124\uce58"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:"https://github.com/vimeo/vimeo.php/archive/1.2.5.zip",children:"v1.2.5"}),"\ub97c \ub2e4\uc6b4 \ubc1b\uace0 \uc6d0\ud558\ub294 \uacf3\uc5d0 \uc555\ucd95\uc744 \ud47c \ub4a4 class\ub97c load\ud55c\ub2e4."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:'<?php\n    require("/path/to/vimeo.php/autoload.php");\n?>\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\uc124\uc815-\ubcc0\uacbd",children:"\uc124\uc815 \ubcc0\uacbd"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"vimeo.php\\config.json"})," \ud30c\uc77c\uc744 \uc5f4\uc5b4 ",(0,t.jsx)(e.strong,{children:"client_id, client_secret, access_token"})," \uac12\uc744 \uc218\uc815\ud558\uc790."]}),"\n",(0,t.jsx)(e.h2,{id:"upload-api-\uc0ac\uc6a9",children:"Upload API \uc0ac\uc6a9"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"vimeo.php\\example\\upload.php"}),"\ub97c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \ud574\ubcf4\uc790."]}),"\n",(0,t.jsx)(e.h3,{id:"\uae30\ubcf8-\uc608\uc81c-\uc18c\uc2a4",children:"\uae30\ubcf8 \uc608\uc81c \uc18c\uc2a4"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",metastring:'title="example\\upload.php"',children:"<?php\nuse Vimeo\\Vimeo;\nuse Vimeo\\Exceptions\\VimeoUploadException;\n\n$config = require(__DIR__ . '/init.php');\nif (empty($config['access_token'])) {\n    // \uc561\uc138\uc2a4 \ud1a0\ud070\uc774 \uc5c6\uc744\uc2dc \ub85c\uae45 \ub85c\uc9c1 \ucd94\uac00\n    // throw new Exception('\uc561\uc138\uc2a4 \ud1a0\ud070 \uc5c6\uc774 \uc5c5\ub85c\ub4dc \ud560 \uc218 \uc5c6\ub2e4.\n    // \uac1c\ubc1c\uc790 \uc571 \ud398\uc774\uc9c0\uc5d0\uc11c \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \ubc1c\uae09 \ubc1b\uac70\ub098 auth.php\ub97c \uc774\uc6a9\ud574\ub77c.');\n}\n$lib = new Vimeo($config['client_id'], $config['client_secret'], $config['access_token']);\n// argv \ub300\uc2e0 \uc5c5\ub85c\ub4dc\ud560 \ud30c\uc77c\uacbd\ub85c\uc758 \ubc30\uc5f4\uc744 \ub123\uc73c\uba74 \ub41c\ub2e4.\n$files = $argv;\narray_shift($files);\n// \uc5c5\ub85c\ub4dc\ub41c \ud2b8\ub799\uc744 \uccb4\ud06c\ud558\ub294 \ubc30\uc5f4\n$uploaded = array();\n// \uc5c5\ub85c\ub4dc \ub85c\uc9c1 \uc2dc\uc791\nforeach ($files as $file_name) {\n    // \uc5c5\ub85c\ub4dc \uc2dc\uc791 \ub85c\uae45\n    // print 'Uploading ' . $file_name . \"\\n\";\n    try {\n        // Vimeo \uc11c\ubc84\uc5d0 \uc5c5\ub85c\ub4dc\ud558\uace0 \ud574\ub2f9 \ud30c\uc77c\uc758 uri\uc744 \ubc1b\ub294\ub2e4.\n        $uri = $lib->upload($file_name);\n        // \ud574\ub2f9 \ud30c\uc77c\uc758 \uc815\ubcf4\ub97c \uc694\uccad\ud55c\ub2e4.\n        $video_data = $lib->request($uri);\n        // \uc5c5\ub85c\ub4dc\uac00 \uc131\uacf5\ud55c \ud30c\uc77c\uc758 \ub9c1\ud06c\ub97c \ubc1b\ub294\ub2e4.\n        $link = '';\n        if($video_data['status'] == 200) {\n            $link = $video_data['body']['link'];\n        }\n        // \ub85c\uae45\uc744 \uc704\ud574 \uc800\uc7a5\n        $uploaded[] = array('file' => $file_name, 'api_video_uri' => $uri, 'link' => $link);\n    }\n    catch (VimeoUploadException $e) {\n        //  \uc5c5\ub85c\ub4dc \uc624\ub958 \ubc1c\uc0dd\uc2dc \uc608\uc678\ucc98\ub9ac\n        // print 'Error uploading ' . $file_name . \"\\n\";\n        // print 'Server reported: ' . $e->getMessage() . \"\\n\";\n    }\n}\n// \uacb0\uacfc \ub85c\uae45 \ubc0f \ud30c\uc77c \ub9c1\ud06c \ud45c\uc2dc\n// print 'Uploaded ' . count($uploaded) . \" files.\\n\\n\";\n// foreach ($uploaded as $site_video) {\n//   extract($site_video);\n//    print \"$file is at $link.\\n\";\n// }\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",children:"\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5"}),"\n",(0,t.jsxs)(e.p,{children:["25\ubc88\uc9f8 \uc904\uc758 ",(0,t.jsx)(e.a,{href:"https://github.com/vimeo/vimeo.php#make-requests",children:"request \uc694\uccad"}),"\uc5d0 \ucd94\uac00\ub85c \uc601\uc0c1\uc815\ubcf4\ub97c \ubcc0\uacbd\ud558\uac8c \uc694\uccad\ud560 \uc218 \uc788\ub2e4.\n\uc601\uc0c1\uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294\uac74 \ubcc0\ud558\uc9c0 \uc54a\ub294\ub2e4."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:"<?php\n/**\n * [lib->request function]\n * \ud574\ub2f9 URI\ub97c \ub300\uc0c1\uc73c\ub85c \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc624\uace0\n * PATCH \uba54\uc18c\ub4dc\ub97c \uc774\uc6a9\ud574\uc11c \uadf8 \ub3d9\uc601\uc0c1\uc758 Metadata\ub97c \uc218\uc815\ud558\ub294 \ud568\uc218\n *\n * @param  {[string]}   uri         [\uc5c5\ub85c\ub4dc \ub41c \ub3d9\uc601\uc0c1 \uc8fc\uc18c]\n * @param  {[array]}    options     [\ud30c\ub77c\ubbf8\ud130 \ubc30\uc5f4(json \ud615\uc2dd\uc758 \ubc30\uc5f4\ud0c0\uc785)]\n * @param  {[string]}   method      [\uc694\uccad\ud560 \uba54\uc18c\ub4dc \ud0c0\uc785(\uc218\uc815\uc740 PATCH)]\n * @return {[video]}    video_data  [\ube44\ub514\uc624 \ub370\uc774\ud130]\n */\n$video_data = $lib->request($uri, array(\n                'name'                          => '\ub3d9\uc601\uc0c1 \uc774\ub984',\n                'description'                   => '\ub3d9\uc601\uc0c1 \uc124\uba85',\n                'embed'  => array(                        // embed\uc2dc\uc758 \uc635\uc158\n                            'buttons' => array(\n                                    'like'      => false, // \uc88b\uc544\uc694 \ubc84\ud2bc\n                                    'watchlater'=> false, // \ub098\uc911\uc5d0\ubcf4\uae30 \ubc84\ud2bc\n                                    'share'     => false, // \uacf5\uc720 \ubc84\ud2bc\n                                    'embed'     => false, // embed \ubc84\ud2bc\n                                    'fullscreen'=> false  // \uc804\uccb4\ud654\uba74 \ubc84\ud2bc\n                            ),\n                            'logos' => array(\n                                    'vimeo'     => false  // \ube44\uba54\ub85c \ub85c\uace0\n                            ),\n                            'title' => array(\n                                    'owner'     => 'hide', // \uc81c\uc791\uc790 \uc815\ubcf4\n                                    'portrait'  => 'hide', // \uc81c\uc791\uc790 \ub85c\uace0\n                                    'name'      => 'hide'  // \uc81c\uc791\uc790 \uc774\ub984\n                            ),\n                            'playbar' => false             // \uc7ac\uc0dd\ubc14\n                )\n), 'PATCH');\n?>\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\uc635\uc158\uc740 ",(0,t.jsx)(e.a,{href:"https://developer.vimeo.com/api/endpoints/videos#PATCH/videos/%7Bvideo_id%7D",children:"\ud574\ub2f9 endpoints"})," \ucc38\uc870\ud558\uc790.\n",(0,t.jsx)(e.img,{src:"https://i.imgur.com/EsTv4Ld.png",alt:"image from hexo"})]}),"\n",(0,t.jsx)(e.h3,{id:"video_data-endpoint",children:"video_data endpoint"}),"\n",(0,t.jsxs)(e.p,{children:["\uc5c5\ub85c\ub4dc\ub41c \ud30c\uc77c\uc758 response data\uc5d0\ub294 \ud30c\uc77c metadata\uac00 \ub4e4\uc5b4\uc788\ub2e4.\n",(0,t.jsx)(e.strong,{children:"$video_data['body']['\ud0a4\uac12']"})," \uc73c\ub85c \uc811\uadfc\ud558\uba74 \ub41c\ub2e4. \uc785\ub9db\uc5d0 \ub9de\uac8c \uc0ac\uc6a9\ud574\ubcf4\uc790."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n    "uri": "\uc601\uc0c1 vimeo \ub9c1\ud06c",\n    "name": "\uc601\uc0c1 \uc81c\ubaa9",\n    "description": "\uc601\uc0c1 \uc124\uba85",\n    "link": "\uc601\uc0c1 vimeo \ub9c1\ud06c",\n    "duration": \uc7ac\uc0dd \uc2dc\uac04,\n    "width": \uac00\ub85c \ud06c\uae30,\n    "language": \uc5b8\uc5b4,\n    "height": \uc138\ub85c \ud06c\uae30,\n    "embed": {\n        "uri": null,\n        "html": "iframe \uc601\uc0c1 \ub9c1\ud06c",\n        "buttons": {\n            "like": \uc88b\uc544\uc694 \ubc84\ud2bc \uc5ec\ubd80,\n            "watchlater": \ub098\uc911\uc5d0\ubcf4\uae30 \ubc84\ud2bc \uc5ec\ubd80,\n            "share": \uacf5\uc720 \ubc84\ud2bc \uc5ec\ubd80,\n            "embed": embed \ubc84\ud2bc \uc5ec\ubd80,\n            "hd": \uace0\ud654\uc9c8 \ubc84\ud2bc \uc5ec\ubd80,\n            "fullscreen": \uc804\uccb4\ud654\uba74 \ubc84\ud2bc \uc5ec\ubd80,\n            "scaling": \uc2a4\ucf00\uc77c\ub9c1 \ubc84\ud2bc \uc5ec\ubd80\n        },\n        "logos": {\n            "vimeo": \ube44\uba54\uc624 \ub85c\uace0 \uc5ec\ubd80,\n            "custom": {\n                "active": \ucee4\uc2a4\ud140 \ub85c\uace0 \uc5ec\ubd80,\n                "link": \ucee4\uc2a4\ud140 \ub85c\uace0 \ub9c1\ud06c,\n                "sticky": sticky \uc5ec\ubd80\n            }\n        },\n        "title": {\n            "name": \uc81c\uc791\uc790 \uc774\ub984 display \uc124\uc815,\n            "owner": \uc81c\uc791\uc790 \uc815\ubcf4 display \uc124\uc815,\n            "portrait": \uc81c\uc791\uc790 \ub85c\uace0 display \uc124\uc815\n        },\n        "playbar": \uc7ac\uc0dd\ubc14 \uc5ec\ubd80,\n        "volume": \ubcfc\ub968\ubc14 \uc5ec\ubd80,\n        "color": "\uc0c9\uc0c1 \ud5e5\uc2a4\ucf54\ub4dc"\n    },\n    "created_time": "\uc0dd\uc131\uc77c\uc2dc gmt",\n    "modified_time": "\ubcc0\uacbd\uc77c\uc2dc gmt",\n    "release_time": "\ub178\ucd9c\uc77c\uc2dc gmt",\n    "content_rating": [\n        "safe"\n    ],\n    "license": "\ub77c\uc774\uc13c\uc2a4",\n    "privacy": {\n        "view": "\ub178\ucd9c \uc124\uc815",\n        "embed": "embed \ub178\ucd9c \uc124\uc815",\n        "download": \ub2e4\uc6b4\ub85c\ub4dc \uc5ec\ubd80,\n        "add": \ucd94\uac00 \uc5ec\ubd80,\n        "comments": "\ub313\uae00 \ud5c8\uc6a9 \uc124\uc815"\n    },\n    "pictures": {\n        "uri": "\uc601\uc0c1 \ub300\ud45c \uc0ac\uc9c4 \ub9c1\ud06c",\n        "active": \uc0ac\uc9c4 \uc5ec\ubd80,\n        "type": "custom",\n        "sizes": [\n            {\n                "width": 100,\n                "height": 75,\n                "link": "\uc0ac\uc774\uc988\ubcc4 \ub9c1\ud06c"\n            },\n            ...\n        ],\n        "resource_key": "\uc811\uadfc \ud0a4"\n    },\n    "tags": [\ud0dc\uadf8 \ubc30\uc5f4],\n    "stats": {\n        "plays": \uc7ac\uc0dd \uc218\n    },\n    "metadata": {\n        "connections": {\n            "comments": {\n                "uri": "\ub313\uae00 \ub9c1\ud06c",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "credits": {\n                "uri": "\ud06c\ub808\ub527 \ub9c1\ud06c",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "likes": {\n                "uri": "\uc88b\uc544\uc694 \ub9c1\ud06c",\n                "options": [\n                    "GET"\n                ],\n                "total": 0\n            },\n            "pictures": {\n                "uri": "\uc0ac\uc9c4 \ub9c1\ud06c",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "texttracks": {\n                "uri": "\ud14d\uc2a4\ud2b8 \ud2b8\ub799 \ub9c1\ud06c",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "related": null\n        },\n        "interactions": {\n            "watchlater": {\n                "added": false,\n                "added_time": null,\n                "uri": "\ub098\uc911\uc5d0\ubcf4\uae30 \ub9c1\ud06c"\n            }\n        }\n    },\n    "user": {\n        "\uc720\uc800\uc815\ubcf4 \ubc0f \uc811\uadfc \uacbd\ub85c"\n    },\n    "review_link": "\ub9ac\ubdf0 \ub2e4\uc774\ub809\ud2b8 \ub9c1\ud06c",\n    "files": [\n        {\n            "quality": "\ud30c\uc77c \ud654\uc9c8",\n            "type": "\ud30c\uc77c \ud0c0\uc785",\n            "width": \ud30c\uc77c \uac00\ub85c,\n            "height": \ud30c\uc77c \uc138\ub85c,\n            "link": "\ud30c\uc77c \ub2e4\uc774\ub809\ud2b8 \ub9c1\ud06c",\n            "created_time": "\ud30c\uc77c \uc0dd\uc131\uc77c\uc2dc",\n            "fps": \uc8fc\uc0ac\uc728,\n            "size": \ud30c\uc77c \ud06c\uae30,\n            "md5": "\ud1a0\ud070",\n            "link_secure": "\ud30c\uc77c \ub2e4\uc774\ub809\ud2b8 \uc2dc\ud050\uc5b4 \ub9c1\ud06c"\n        },\n        ...\n    ],\n    "download": [\n        {\n            "quality": "\ub2e4\uc6b4\ub85c\ub4dc \ud30c\uc77c \ud654\uc9c8",\n            "type": "\ud30c\uc77c \ud0c0\uc785",\n            "width": \ud30c\uc77c \uac00\ub85c,\n            "height": \ud30c\uc77c \uc138\ub85c,\n            "expires": "\ub9cc\ub8cc\uc77c\uc2dc",\n            "link": "\ub2e4\uc6b4\ub85c\ub4dc \ub2e4\uc774\ub809\ud2b8 \ub9c1\ud06c",\n            "created_time": "\uc0dd\uc131\uc77c\uc2dc",\n            "fps": \uc8fc\uc0ac\uc728,\n            "size": \ud30c\uc77c \ud06c\uae30,\n            "md5": "\ud1a0\ud070"\n        },\n        ...\n    ],\n    "app": {\n        "name": "\uc571 \uc774\ub984",\n        "uri": "\uc571 \ub9c1\ud06c"\n    },\n    "status": "\uc601\uc0c1 \uc0c1\ud0dc",\n    "resource_key": "\ub9ac\uc18c\uc2a4 \ud0a4",\n    "embed_presets": null\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\uc5ec\ub2f4",children:"\uc5ec\ub2f4"}),"\n",(0,t.jsx)(e.p,{children:"API\uc758 \ub0b4\ubd80 \uad6c\uc870\ub294 \ud5e4\ub354\ucd94\uac00\uc640 curl\ub85c\ub9cc \uc774\ub8e8\uc5b4\uc838\uc788\ub2e4.\nOAuth2.0\uacfc RESTful\ub97c \uc774\ud574\ud588\ub2e4\uba74 \uc544\uc8fc \uc26c\uc6b8 \uac83\uc774\ub2e4."})]})}function c(n={}){const{wrapper:e}={...(0,a.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},75635:(n,e,i)=>{i.d(e,{Z:()=>l,a:()=>r});var t=i(75271);const a={},o=t.createContext(a);function r(n){const e=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);