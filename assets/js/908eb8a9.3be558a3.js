"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[62025],{53251:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>o,frontMatter:()=>c,metadata:()=>i,toc:()=>a});var i=t(72301),r=t(86070),s=t(56192);const c={title:"nodejs triple des \uc554\ud638\ud654",authors:"me",tags:["nodejs","javascript","crypto"],date:new Date("2019-05-12T20:29:20.000Z")},l=void 0,d={authorsImageUrls:[void 0]},a=[{value:"\uc554\ud638\ud654",id:"\uc554\ud638\ud654",level:2},{value:"\uc18c\uc2a4",id:"\uc18c\uc2a4",level:2},{value:"\uc0ac\uc6a9\ubc95",id:"\uc0ac\uc6a9\ubc95",level:2},{value:"\ucc38\uc870",id:"\ucc38\uc870",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"triple des \uc54c\uace0\ub9ac\uc998\uc73c\ub85c \uc554\ud638\ud654\ud558\ub294 \uc77c\uc740 \uc694\uc0c8\ub294 \ub4dc\ubb38\ub370, \ub4dc\ubb3c\uc5b4\uc11c \uadf8\ub7f0\uc9c0 \uad6c\uae00\ub9c1\ud574\ub3c4 \uc544\ubb34 \uac83\ub3c4 \ub098\uc624\uc9c0 \uc54a\uc558\ub2e4."}),"\n",(0,r.jsxs)(n.p,{children:["\ub808\uac70\uc2dc \uc5b8\uc5b4\ub4e4\uc5d0\ub294 ",(0,r.jsx)(n.strong,{children:"3des"})," \uc554\ud638\ud654\ub41c \ub85c\uc9c1\uc774 \ub9ce\uc740\ub370, \ud3ec\ud305\ud558\uba74\uc11c \uac1c\ubc1c\ud574\uc57c\ub420 \ud544\uc694\uc131\uc774 \uc0dd\uacbc\ub2e4."]}),"\n",(0,r.jsx)(n.h2,{id:"\uc554\ud638\ud654",children:"\uc554\ud638\ud654"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"nodejs \uc758 \uc554\ud638\ud654 \ud328\ud0a4\uc9c0\ub294 crypto \uc548\uc5d0 \ub4e4\uc5b4\uc788\ub2e4."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"crypto.getCiphers();"})," \uba54\uc18c\ub4dc\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc54c\uace0\ub9ac\uc998\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ciphers.filter(cipher => cipher.includes('des'));"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["3des \uc54c\uace0\ub9ac\uc998\uc740 ",(0,r.jsx)(n.code,{children:"des-ede3"})," \ub85c \uc2dc\uc791\ud55c\ub2e4."]}),"\n",(0,r.jsx)(n.li,{children:"\ud0a4\ub294 24bytes \uc774\uba70, iv \ub294 8bytes \ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\uc18c\uc2a4",children:"\uc18c\uc2a4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import crypto from "node:crypto";\n\nclass TripleDes {\n  // #iv;\n  // #key;\n\n  constructor(key, iv) {\n    this.key = key;\n    this.iv = iv;\n  }\n\n  getKey() {\n    return this.key.padEnd(24, String.fromCharCode(0));\n  }\n\n  getIv() {\n    return this.iv;\n  }\n\n  encrypt(plain, iv) {\n    if (!iv) {\n      iv = this.iv ? Buffer.from(this.iv, "hex") : crypto.randomBytes(8);\n    }\n\n    const cipher3des = crypto.createCipheriv(\n      "des-ede3-cfb8",\n      this.getKey(),\n      iv,\n    );\n    let encrypted = cipher3des.update(plain, "utf8", "hex");\n    encrypted += cipher3des.final("hex");\n\n    this.iv = iv.toString("hex");\n    return encrypted;\n  }\n\n  decrypt(encrypted, iv) {\n    if (!iv) {\n      iv = this.iv;\n    }\n\n    const decipher3des = crypto.createDecipheriv(\n      "des-ede3-cfb8",\n      this.getKey(),\n      Buffer.from(iv, "hex"),\n    );\n    let decrypted = decipher3des.update(encrypted, "hex", "utf8");\n    decrypted += decipher3des.final("utf8");\n\n    return decrypted;\n  }\n}\n\nmodule.exports = TripleDes;\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\uc704\uc758 ",(0,r.jsx)(n.code,{children:"encrypt"})," \uba54\uc18c\ub4dc\ub294 \uc544\ub798\ucc98\ub7fc \ubc84\ud37c\ub97c \ud569\uce5c \ud6c4\uc5d0 \ud5e5\uc2a4\ub85c \ubc14\uafb8\ub294 \uac83\uacfc \ub3d9\uc77c\ud558\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'let encrypted = Buffer.concat([\n  cipher3des.update(plain, "utf8"),\n  cipher3des.final("utf8"),\n]);\n\nencrypted = encrypted.toString("hex");\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\uc0ac\uc6a9\ubc95",children:"\uc0ac\uc6a9\ubc95"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const TripleDes = require("./TripleDes");\n\nconst tripleDes = new TripleDes("encryptionKey");\n// \uc554\ud638\ud654\nconst encrypted = tripleDes.encrypt("yummy");\n// \ubcf5\ud638\ud654\nconst decrypted = tripleDes.decrypt(encrypted);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\ucc38\uc870",children:"\ucc38\uc870"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://nodejs.org/api/crypto.html",children:"nodejs.crypto"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},56192:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>l});var i=t(30758);const r={},s=i.createContext(r);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(s.Provider,{value:n},e.children)}},72301:e=>{e.exports=JSON.parse('{"permalink":"/2019/05/12/nodejs-triple-des-encryption","source":"@site/blog/2019/05/12/nodejs-triple-des-encryption.md","title":"nodejs triple des \uc554\ud638\ud654","description":"triple des \uc54c\uace0\ub9ac\uc998\uc73c\ub85c \uc554\ud638\ud654\ud558\ub294 \uc77c\uc740 \uc694\uc0c8\ub294 \ub4dc\ubb38\ub370, \ub4dc\ubb3c\uc5b4\uc11c \uadf8\ub7f0\uc9c0 \uad6c\uae00\ub9c1\ud574\ub3c4 \uc544\ubb34 \uac83\ub3c4 \ub098\uc624\uc9c0 \uc54a\uc558\ub2e4.","date":"2019-05-12T20:29:20.000Z","tags":[{"inline":true,"label":"nodejs","permalink":"/tags/nodejs"},{"inline":false,"label":"javascript","permalink":"/tags/javascript","description":"Any application that can be written in JavaScript, will eventually be written in JavaScript"},{"inline":true,"label":"crypto","permalink":"/tags/crypto"}],"readingTime":1.66,"hasTruncateMarker":false,"authors":[{"name":"Eunkwang Shin","title":"Owner","url":"https://github.com/gracefullight","socials":{"linkedin":"https://www.linkedin.com/in/gracefullight/","github":"https://github.com/gracefullight"},"description":"Full Stack JavaScript Developer | Half-time Open Sourcerer.","page":{"permalink":"/authors/me"},"imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me"}],"frontMatter":{"title":"nodejs triple des \uc554\ud638\ud654","authors":"me","tags":["nodejs","javascript","crypto"],"date":"2019-05-12T20:29:20.000Z"},"unlisted":false,"prevItem":{"title":"Mac\uc5d0\uc11c lsd \uc124\uce58\ud558\uae30 (ls \uba85\ub839\uc5b4 \uafb8\ubbf8\uae30)","permalink":"/2019/05/27/install-lsd-on-mac"},"nextItem":{"title":"DEV \ub3c4\uba54\uc778\uacfc Github Pages \uc5f0\uacb0\ud558\uae30","permalink":"/2019/05/07/connecting-a-DEV-domain-to-github-pages"}}')}}]);