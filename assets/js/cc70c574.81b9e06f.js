"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[5734],{49613:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>g});var a=r(59496);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,l=function(e,t){if(null==e)return{};var r,a,l={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var p=a.createContext({}),u=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,l=e.mdxType,n=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),c=u(r),m=l,g=c["".concat(p,".").concat(m)]||c[m]||k[m]||n;return r?a.createElement(g,i(i({ref:t},s),{},{components:r})):a.createElement(g,i({ref:t},s))}));function g(e,t){var r=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var n=r.length,i=new Array(n);i[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[c]="string"==typeof e?e:l,i[1]=o;for(var u=2;u<n;u++)i[u]=r[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},27799:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>k,frontMatter:()=>n,metadata:()=>o,toc:()=>u});var a=r(31966),l=(r(59496),r(49613));const n={title:"Dockerfile\uc758 \ubaa8\ub4e0 \uac83",authors:"me",tags:["k8s","docker","notes"],date:new Date("2020-01-13T22:36:44.000Z")},i="\uc778\uc2a4\ud2b8\ub7ed\uc158",o={permalink:"/2020/01/13/Dockerfile\uc758-\ubaa8\ub4e0-\uac83",source:"@site/blog/2020/01/13/Dockerfile\uc758-\ubaa8\ub4e0-\uac83.md",title:"Dockerfile\uc758 \ubaa8\ub4e0 \uac83",description:"- FROM: \ube4c\ub4dc\ud558\ub294 \uc774\ubbf8\uc9c0\uc758 \uae30\ubc18 \uc774\ubbf8\uc9c0 \uc9c0\uc815",date:"2020-01-13T22:36:44.000Z",formattedDate:"2020\ub144 1\uc6d4 13\uc77c",tags:[{label:"k8s",permalink:"/tags/k-8-s"},{label:"docker",permalink:"/tags/docker"},{label:"notes",permalink:"/tags/notes"}],readingTime:6.705,hasTruncateMarker:!1,authors:[{name:"Gracefullight",title:"Owner",url:"https://github.com/gracefullight",imageURL:"https://avatars.githubusercontent.com/u/11773683?v=4",key:"me"}],frontMatter:{title:"Dockerfile\uc758 \ubaa8\ub4e0 \uac83",authors:"me",tags:["k8s","docker","notes"],date:"2020-01-13T22:36:44.000Z"},prevItem:{title:"\uc11c\ube44\uc2a4\uc6cc\ucee4\ub85c POST Request \uce90\uc2f1\ud558\uae30",permalink:"/2020/01/16/Serviceworker-cache-POST-requests"},nextItem:{title:"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub85c\uadf8 \uc544\ud0a4\ud14d\uccd0",permalink:"/2020/01/01/kubernetes-log-architecture"}},p={authorsImageUrls:[void 0]},u=[{value:"\ub9b0\ud305",id:"\ub9b0\ud305",level:2},{value:"\uae30\ubc18 \uc774\ubbf8\uc9c0",id:"\uae30\ubc18-\uc774\ubbf8\uc9c0",level:2},{value:"\uba40\ud2f0\uc2a4\ud14c\uc774\uc9c0 \ube4c\ub4dc",id:"\uba40\ud2f0\uc2a4\ud14c\uc774\uc9c0-\ube4c\ub4dc",level:2},{value:"distroless \uc774\ubbf8\uc9c0",id:"distroless-\uc774\ubbf8\uc9c0",level:2},{value:"chucksum \uac80\uc99d",id:"chucksum-\uac80\uc99d",level:2},{value:"dockerigonore",id:"dockerigonore",level:2},{value:"\uc774\ubbf8\uc9c0 \ud14c\uc2a4\ud2b8",id:"\uc774\ubbf8\uc9c0-\ud14c\uc2a4\ud2b8",level:2},{value:"\uc774\ubbf8\uc9c0 \ubcf4\uc548",id:"\uc774\ubbf8\uc9c0-\ubcf4\uc548",level:2},{value:"user",id:"user",level:3},{value:"secret",id:"secret",level:3}],s={toc:u},c="wrapper";function k(e){let{components:t,...r}=e;return(0,l.kt)(c,(0,a.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"FROM"),": \ube4c\ub4dc\ud558\ub294 \uc774\ubbf8\uc9c0\uc758 \uae30\ubc18 \uc774\ubbf8\uc9c0 \uc9c0\uc815"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"RUN"),": \uc774\ubbf8\uc9c0 \ube4c\ub4dc \uc2dc \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc2e4\ud589\ud560 \uba85\ub839\uc5b4 \uc815\uc758"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"COPY"),": \ud638\uc2a4\ud2b8\uc5d0\uc11c \ucee8\ud14c\uc774\ub108\ub85c \ud30c\uc77c \ubc0f \ub514\ub809\ud1a0\ub9ac \ubcf5\uc0ac"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ADD"),": COPY + \uc555\ucd95 \ud574\uc81c + URL \ub2e4\uc6b4\ub85c\ub4dc",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc6b4\uc601 \uccb4\uc81c\ub97c \ub2f4\uc740 \uae30\ubc18 \uc774\ubbf8\uc9c0\ub97c \ub9cc\ub4dc\ub294 \uacbd\uc6b0\ucc98\ub7fc \ud2b9\uc218\ud55c \uacbd\uc6b0\uc5d0\ub9cc \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\uc548\uc815\uc131 \ubcf4\uc7a5\uc774 \ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c COPY \ub97c \uc0ac\uc6a9\ud558\uc790."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"CMD"),": \ucee8\ud14c\uc774\ub108\uc5d0\uc11c foreground\ub85c \uc2e4\ud589\ud560 \uba85\ub839\uc5b4 \uc815\uc758"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ENTRYPOINT"),": \ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589 \uac00\ub2a5 \ud30c\uc77c\ub85c \uc0ac\uc6a9\ud560 \ub54c \uc815\uc758\ud558\ub294 \uba85\ub839",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"CMD \uc640 ENTRYPOINT \ub458 \ub2e4 \uc0ac\uc6a9 \uac00\ub2a5"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ARG"),": docker image build\ub97c \uc2e4\ud589\ud560 \ub54c \uc0ac\uc6a9\ud558\ub294 \ubcc0\uc218"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ENV"),": \ucee8\ud14c\uc774\ub108 \uc548\uc758 \ud658\uacbd\ubcc0\uc218 \uc815\uc758"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"EXPOSE"),": \ucee8\ud14c\uc774\ub108\uac00 \ub178\ucd9c\ud558\ub294 \ud3ec\ud2b8"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"VOLUME"),": \ud638\uc2a4\ud2b8\ub098 \ub2e4\ub978 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \ub9c8\uc6b4\ud2b8\ud560 \uc218 \uc788\ub294 \ud3ec\uc778\ud2b8 \uc0dd\uc131"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"LABEL"),": \uc774\ubbf8\uc9c0\uc5d0 \ucd94\uac00\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"STOPSIGNAL"),": \ucee8\ud14c\uc774\ub108\uc5d0 \uc804\ub2ec\ub418\uba74 \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\ud558\ub294 \uc2dc\uc2a4\ud15c \uc2dc\uadf8\ub110 \uc124\uc815"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"HEALTHCHECK"),": \ucee8\ud14c\uc774\ub108 \uc548\uc5d0\uc11c \uba85\ub839\uc744 \uc2e4\ud589 \ud6c4 \uacb0\uacfc\ub97c \ud5ec\uc2a4 \uccb4\ud06c\uc5d0 \uc0ac\uc6a9"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"USER"),": \ucee8\ud14c\uc774\ub108 \uc2e4\ud589 \uc2dc \ucee8\ud14c\uc774\ub108 \uc0ac\uc6a9\uc790",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc774\ubbf8\uc9c0 \ube4c\ub4dc\uc2dc USER \ub4a4\uc5d0 \ub098\uc624\ub294 RUN \uc778\uc2a4\ud2b8\ub7ed\uc158\ub3c4 \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc758 \uad8c\ud55c\uc73c\ub85c \uc2e4\ud589\ub41c\ub2e4."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"WORKDIR"),": \ucee8\ud14c\uc774\ub108\uc758 \uc791\uc5c5 \ub514\ub809\ud1a0\ub9ac"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ONBUILD"),": \ucee8\ud14c\uc774\ub108 \uc548\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uba85\ub839 \uc815\uc758, \uc774\ubbf8\uc9c0\uc5d0\uc11c \uc2e4\ud589\ub418\uc9c0 \uc54a\ub294\ub2e4.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"ONBUILD \ub97c \uc815\uc758\ud55c \uc774\ubbf8\uc9c0\ub97c \uae30\ubc18 \uc774\ubbf8\uc9c0\ub85c \uc0bc\uc544 \ub2e4\ub978 \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud560 \ub54c \uc2e4\ud589\ub41c\ub2e4.")))),(0,l.kt)("h1",{id:"\uc774\ubbf8\uc9c0"},"\uc774\ubbf8\uc9c0"),(0,l.kt)("h2",{id:"\ub9b0\ud305"},"\ub9b0\ud305"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/hadolint/hadolint"},"hadolint")," \ub97c \uc124\uce58\ud574 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/"},"Dockerfile best practices")," \uc5d0 \uae30\ubc18\ud574 \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud588\ub294\uc9c0 \uac80\uc99d\ud558\uc790."),(0,l.kt)("h2",{id:"\uae30\ubc18-\uc774\ubbf8\uc9c0"},"\uae30\ubc18 \uc774\ubbf8\uc9c0"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"scratch: \uc544\ubb34 \uac83\ub3c4 \uc5c6\ub294 \uc774\ubbf8\uc9c0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"https \ud1b5\uc2e0\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 cacert.pem \uc744 /etc/ssl/certs \uc5d0 \ucd94\uac00\ud574\uc57c\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\ub514\ubc84\uae45\ub3c4 \ud798\ub4e4\ub2e4"))),(0,l.kt)("li",{parentName:"ul"},"busybox: \uae30\ubcf8 \uc720\ud2f8\ub9ac\ud2f0 (echo, ls \ub4f1) \uc774 \uc788\ub294 \uc774\ubbf8\uc9c0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\ud328\ud0a4\uc9c0 \uad00\ub9ac\uc790\uac00 \uc5c6\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\ub514\ubc84\uae45\uc740 \uc880 \ub0ab\ub2e4."))),(0,l.kt)("li",{parentName:"ul"},"alpine: busybox \uae30\ubc18\uc73c\ub85c 4MB \uc9c0\ub9cc ",(0,l.kt)("inlineCode",{parentName:"li"},"apk")," \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800\uac00 \uc788\ub2e4.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"glibc")," \ub300\uc2e0 ",(0,l.kt)("inlineCode",{parentName:"li"},"musl"),"\uc744 \uc4f4\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"apk add --no-cache package")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"apk add --no-cache --virtual=ailas package")," && ",(0,l.kt)("inlineCode",{parentName:"li"},"apk del --no-cache ailas"))))),(0,l.kt)("h2",{id:"\uba40\ud2f0\uc2a4\ud14c\uc774\uc9c0-\ube4c\ub4dc"},"\uba40\ud2f0\uc2a4\ud14c\uc774\uc9c0 \ube4c\ub4dc"),(0,l.kt)("p",null,"golang\uacfc \uac19\uc740 \ube4c\ub4dc\uac00 \ud544\uc694\ud55c \uc774\ubbf8\uc9c0\uc5d0\uc11c\ub294 \uba40\ud2f0\uc2a4\ud14c\uc774\uc9c0 \ube4c\ub4dc\ub97c \uc774\uc6a9\ud574 \ube4c\ub4dc \ud658\uacbd\uacfc \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc744 \ub2e4\ub974\uac8c \uac00\uc838\uac08 \uc218 \uc788\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-dockerfile"},'FROM golang:1.9 AS build\n\nWORKDIR /\nCOPY . /go/src/github.com/...\nRUN go get gokpg.in/gorp.v1\nRUN cd /go/src/github.com/... && go build -o bin/start main.go\n\nFROM alpine:3.7\nCOPY --from=build /go/src/.../bin/start /usr/local/bin/\nCMD ["start"]\n')),(0,l.kt)("h2",{id:"distroless-\uc774\ubbf8\uc9c0"},"distroless \uc774\ubbf8\uc9c0"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\uc6b4\uc601\uccb4\uc81c \uae30\ub2a5\uc740 \uc5c6\uc774 \uc5b8\uc5b4\uc5d0 \uc911\uc810\uc744 \ub454 \uc774\ubbf8\uc9c0\uc774\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/GoogleContainerTools/distroless"},"distroless")," \uc5d0\uc11c \ud655\uc778 \uac00\ub2a5\ud558\uba70 \uc8fc\ub85c \uad6c\uae00\uc774 \ubc30\ud3ec\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"gcr.io/distroless/base \uc774\ubbf8\uc9c0\ub294 glibc \uae30\ubc18\uc774\uba70 \ucef4\ud30c\uc77c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\ud558\ub294 \ub370\uc5d0 \uc801\ud569\ud558\ub2e4. (Go)"),(0,l.kt)("li",{parentName:"ul"},"ca-certificates \ubc0f TLS/SSL \uad00\ub828 \ub77c\uc774\ube0c\ub7ec\ub9ac \ub4f1 \ucd5c\uc18c\ud55c\uc758 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub9cc \uc788\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"CVE \ucde8\uc57d\uc810\ub3c4 \uc5c5\ub370\uc774\ud2b8 \ub41c\ub2e4\uace0 \ud55c\ub2e4.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-dockerfile"},'FROM node:10.17.0 AS build-env\nADD . /app\nWORKDIR /app\n\nFROM gcr.io/distroless/nodejs\nCOPY --from=build-env /app /app\nWORKDIR /app\nCMD ["hello.js"]\n')),(0,l.kt)("h2",{id:"chucksum-\uac80\uc99d"},"chucksum \uac80\uc99d"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"ADD")," \uc778\uc2a4\ud2b8\ub7ed\uc158\uc73c\ub85c \ucd94\uac00 \ub41c \ud30c\uc77c\uc740 \ud574\uc2dc\uae30\ubc18 \uccb4\ud06c\uc12c \uac80\uc99d\uc744 \ud574\uc8fc\ub294 \uac83\uc774 \uc88b\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-dockerfile"},"ADD library.zip .\nADD library_SHA256 .\nADD library_SHA256.sig .\n\n# Import PGP public key\nRUN curl https://.../pgp_keys.asc | gpg --import\n\n# \ub77c\uc774\ube0c\ub7ec\ub9ac \uc804\uc790 \uc11c\uba85 \uac80\uc99d\nRUN gpg --verify library_SHA256.sig library_SHA256\n\n# Verify checksum\nRUN cat library_SHA256 | grep linux_amd64 | sha256sum -cs\nRUN unzip libary.zip\nRUN mv library /usr/local/bin\n# \uc2e4\ud589\n")),(0,l.kt)("h2",{id:"dockerigonore"},"dockerigonore"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Dockerfile \ube4c\ub4dc \uc2dc\uc5d0 \ub530\ub77c \ub4e4\uc5b4\uac00\uc9c0 \uc54a\uac8c \ub41c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"Dockerfile \uacfc \uac19\uc740 \ub808\ubca8 \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc788\uc5b4\uc57c\ud55c\ub2e4.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini",metastring:'title=".dockerignore"',title:'".dockerignore"'},".git\n.idea\n.vscode\n.github\n*.log\n")),(0,l.kt)("h2",{id:"\uc774\ubbf8\uc9c0-\ud14c\uc2a4\ud2b8"},"\uc774\ubbf8\uc9c0 \ud14c\uc2a4\ud2b8"),(0,l.kt)("p",null,"\ube4c\ub4dc \ud6c4\uc758 \uc774\ubbf8\uc9c0 \ub0b4\ubd80\uc5d0 \uc0c1\ud0dc\uac00 \uc801\uc808\ud55c\uc9c0 \ud14c\uc2a4\ud2b8\ud558\uae30 \uc704\ud574 \uc544\ub798 \ub450 \uac00\uc9c0 yaml \uae30\ubc18\uc758 \ud14c\uc2a4\ud2b8 \ud234\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/GoogleContainerTools/container-structure-test"},"container-structure-test")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/aelsabbahy/goss"},"goss"))),(0,l.kt)("p",null,"\uc774 \uc911 ",(0,l.kt)("strong",{parentName:"p"},"goss"),"\ub294 \uc2e4\uc81c \ud3ec\ud2b8 \ubc0f \uc11c\ube44\uc2a4\uac00 \uc11c\ube59 \uc911\uc778\uc9c0 \ud655\uc778\uc774 \uac00\ub2a5\ud574 \ub354 \uc720\uc6a9\ud560 \uac83\uc73c\ub85c \ubcf4\uc778\ub2e4."),(0,l.kt)("h2",{id:"\uc774\ubbf8\uc9c0-\ubcf4\uc548"},"\uc774\ubbf8\uc9c0 \ubcf4\uc548"),(0,l.kt)("h3",{id:"user"},"user"),(0,l.kt)("p",null,"\ud638\uc2a4\ud2b8\uc758 \ub9ac\uc18c\uc2a4\ub97c \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uacf5\uc720\ud558\ub294 Docker\ub294 \uc0ac\uc6a9\uc790 UID\ub3c4 0\uc73c\ub85c \uac19\uc774 \uacf5\uc720\ub418\ubbc0\ub85c \uac19\uc740 \uad8c\ud55c\uc744 \uac16\uac8c \ub41c\ub2e4.\n\uc774 \ubb38\uc81c\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 ",(0,l.kt)("inlineCode",{parentName:"p"},"useradd")," \ub85c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc2e4\ud589 \uc720\uc800\ub97c \ub9cc\ub4e4\uc5b4 \uc8fc\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"USER")," \uc778\uc2a4\ud2b8\ub7ed\uc158\uc744 \uc0ac\uc6a9\ud574 \uc2e4\ud589\uc744 \ud574\uc918\uc57c\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-dockerfile"},'FROM golang:1.10\n\nRUN mkdir /app\nCOPY main.go /app\n\nRUN useradd gracefullight\nUSER gracefullight\n\nCMD ["go", "RUN", "/app/main.go"]\n')),(0,l.kt)("h3",{id:"secret"},"secret"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.vaultproject.io/docs/install/"},"Vault"))),(0,l.kt)("h1",{id:"dockerd-\ud29c\ub2dd"},"dockerd \ud29c\ub2dd"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"max-concurrent-downloads: \uae30\ubcf8\uac12\uc740 3\uc774\uba70, ",(0,l.kt)("inlineCode",{parentName:"li"},"docker image pull")," \ub85c \ud55c \ubc88\uc5d0 \ub2e4\uc6b4\ub85c\ub4dc \ub418\ub294 \uc774\ubbf8\uc9c0 \uc2a4\ub808\ub4dc \uc218\ub97c \uc99d\uac00\uc2dc\ucf1c\uc900\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"max-concurrent-uploads: \uae30\ubcf8\uac12\uc740 5\uc774\uba70, ",(0,l.kt)("inlineCode",{parentName:"li"},"docker image push")," \uc2dc\uc5d0 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2a4\ub808\ub4dc \uc218\ub97c \uc99d\uac00\uc2dc\ucf1c\uc900\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"registry-mirrors: Docker hub\uc758 \ubbf8\ub7ec \ub808\uc9c0\uc2a4\ud2b8\ub9ac\ub97c \ub9cc\ub4e4\uc5b4 \ud2b8\ub798\ud53d \ud5a5\uc0c1\uc5d0 \uc774\uc810\uc744 \uc904 \uc218 \uc788\ub2e4.")),(0,l.kt)("h1",{id:"private-registry"},"private registry"),(0,l.kt)("p",null,"\ube60\ub978 \uc774\ubbf8\uc9c0 \ud478\uc26c/\ud480\uacfc \uc18c\uc2a4 \ub54c\ubb38\uc774\ub77c\ub3c4 private registry \ub294 \ud544\uc218\uc801\uc774\ub2e4.\ndocker \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 registry \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4."),(0,l.kt)("p",null,"GUI \uae30\ubc18\uc73c\ub85c \ud655\uc778\ud560 \uc218 \uc788\ub294 \ud234\uc740 \uc544\ub798\uc640 \uac19\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/goharbor/harbor"},"Harbor"),": \ud504\ub77c\uc774\ube57 \ub808\ud3ec\uc9c0\ud1a0\ub9ac\ub97c \uc704\ud55c \ubaa8\ub4e0 \uae30\ub2a5\uc774 \ub2e4 \uc788\ub2e4. \uc4f0\uc790."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/SUSE/Portus"},"Portus"),": \uc778\uc99d \ud3ec\ud568, \ud558\uc9c0\ub9cc \ub8e8\ube44\ub77c \uc18c\uc2a4 \uac1c\uc120\uc774 \ud798\ub4e4\ub4ef"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/Joxit/docker-registry-ui"},"docker-registry-ui"),": 20\ub144 \ucd5c\uadfc\uae4c\uc9c0 \uac1c\uc120 \uc911")))}k.isMDXComponent=!0}}]);