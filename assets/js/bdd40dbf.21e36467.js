"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[32735],{54574:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(70090),l=n(50189);function a(e){const t=new DataView(e);let n=8;const r=[];for(;n<t.byteLength;){const l=t.getUint32(n);n+=4;const a=String.fromCharCode(t.getUint8(n),t.getUint8(n+1),t.getUint8(n+2),t.getUint8(n+3));n+=4;const i=new Uint8Array(e,n,l);n+=l;const s=t.getUint32(n);n+=4,r.push({type:a,data:i,crc:s})}return r}function i(e){let t=8;return e.forEach((e=>{t+=12+e.data.length})),t}function s(e,t){const n="zTXt",a=(new TextEncoder).encode(e),i=new Uint8Array([0]),s=(new TextEncoder).encode(t),c=(0,l.Wt)(s),o=new Uint8Array(a.length+1+1+c.length);o.set(a,0),o.set([0],a.length),o.set(i,a.length+1),o.set(c,a.length+2);const d=new Uint8Array(4+o.length);d.set((new TextEncoder).encode(n),0),d.set(o,4);return{type:n,data:o,crc:(0,r.buf)(d)}}function c(e,t,n){const r=new ArrayBuffer(e),l=new Uint8Array(r);l.set(new Uint8Array(t,0,8),0);let a=8;return n.forEach((e=>{let{type:t,data:n,crc:i}=e;const s=new DataView(r,a,12+n.length);s.setUint32(0,n.length),l.set((new TextEncoder).encode(t),a+4),l.set(n,a+8),s.setUint32(8+n.length,i),a+=12+n.length})),r}var o=n(18139),d=n(32603),u=n(87199),g=n(75271),h=n(52676);function f(){const e=(0,g.useRef)(null),[t,n]=(0,g.useState)(null),[r,l]=(0,g.useState)(""),[f,p]=(0,g.useState)("-1379962171"),[x,m]=(0,g.useState)("Eargasm"),[y,b]=(0,g.useState)(!1),[j,w]=(0,g.useState)(.2),[v,U]=(0,g.useState)("#F58D16");(0,g.useEffect)((()=>{if(t){const n=new Image;n.src=t,n.onload=()=>{const t=e.current;if(t){t.width=n.width,t.height=n.height;const e=t.getContext("2d");e.drawImage(n,0,0),D(e),R(e,v)}}}return()=>{t&&URL.revokeObjectURL(t)}}),[t]);const D=e=>{const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),n=t.data;for(let r=0;r<n.length;r+=4)255===n[r]&&255===n[r+1]&&255===n[r+2]&&(n[r+2]=254);e.putImageData(t,0,0)},R=(e,t)=>{const n={r:Number.parseInt(t.slice(1,3),16),g:Number.parseInt(t.slice(3,5),16),b:Number.parseInt(t.slice(5,7),16)},r=e.getImageData(0,0,e.canvas.width,e.canvas.height),l=r.data,a=[];for(let d=0;d<l.length;d+=4)a.push([l[d],l[d+1],l[d+2]]);const i=(0,u.a)(a,4,{}),s=i.centroids.map((e=>({r:e[0],g:e[1],b:e[2]})));if(y){let e=0,t=Number.MAX_SAFE_INTEGER;for(let l=0;l<s.length;l++){const r=s[l],a=(c=n,o=r,Math.sqrt(Math.pow(c.r-o.r,2)+Math.pow(c.g-o.g,2)+Math.pow(c.b-o.b,2)));a<t&&(t=a,e=l)}const r=s[e];r.r=r.r*(1-j)+n.r*j,r.g=r.g*(1-j)+n.g*j,r.b=r.b*(1-j)+n.b*j}var c,o;for(let d=0;d<l.length;d+=4){const e=s[i.clusters[Math.floor(d/4)]];l[d]=e.r,l[d+1]=e.g,l[d+2]=e.b}e.putImageData(r,0,0)};return(0,h.jsx)(o.Z,{children:(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",color:"#f49f3f"},children:[(0,h.jsx)("h1",{style:{margin:"2rem 0",color:"#f49f3f"},children:"\uadf8\ub9bc\ub300\ud654 \uc0dd\uc131\uae30"}),(0,h.jsx)("div",{style:{width:"400px",background:"#242526",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:(0,h.jsxs)("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[(0,h.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{children:"\uace0\uc720\uc544\uc774\ub514"}),(0,h.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"AuthID",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f"}})]}),(0,h.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{children:"\uc81c\uc791\uc790"}),(0,h.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Author",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f"}})]})]}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{children:"\uad6c\ubd84\ud560 \ud30c\uc77c\uba85"}),(0,h.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Custom File Name",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f"}})]}),(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{type:"checkbox",checked:y,onChange:e=>b(e.target.checked)}),"\uc0c9\uc0c1 \uac00\uc911\uce58 \uc0ac\uc6a9\ud558\uae30"]})}),y&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{children:"\uac00\uc911\uce58 \uc124\uc815 (0.2 ~ 0.5)"}),(0,h.jsx)("input",{type:"range",min:"0.2",max:"0.5",step:"0.01",value:j,onChange:e=>w(Number.parseFloat(e.target.value)),title:"\uac00\uc911\uce58 \uc124\uc815"})]}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{children:"\uac00\uc911\uce58 \uc0c9\uc0c1 \uc120\ud0dd"}),(0,h.jsx)("input",{type:"color",value:v,onChange:e=>U(e.target.value),title:"\uac00\uc911\uce58 \uc0c9\uc0c1"})]})]}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,h.jsx)("label",{children:"\uc774\ubbf8\uc9c0 \ucd94\uac00 *"}),(0,h.jsx)("input",{type:"file",accept:"image/png",onChange:async e=>{const t=e.target.files[0];if(!t||"image/png"!==t.type)return void alert("PNG \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");const r=await async function(e){let{file:t,maxWidth:n,maxHeight:r}=e;return new Promise((e=>{const l=URL.createObjectURL(t),a=new Image;a.src=l,a.onload=()=>{URL.revokeObjectURL(l),e(a.width<=n&&a.height<=r)},a.onerror=()=>{URL.revokeObjectURL(l),e(!1)}}))}({file:t,maxWidth:256,maxHeight:96});if(!r)return alert("\uc774\ubbf8\uc9c0 \ud06c\uae30\uac00 256x96 \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4."),void n(null);const l=function(e){let t=a(e);return t=t.filter((e=>{let{type:t}=e;return"tEXt"!==t})),c(i(t),e,t)}(await t.arrayBuffer()),o=function(e,t,n){const r=a(e),l=s("authid",t),o=s("author",n),d=r.findIndex((e=>{let{type:t}=e;return"IHDR"===t}))+1;return"PLTE"===r[d]?.type?r.splice(d+1,0,l,o):r.splice(d,0,l,o),c(i(r),e,r)}(l,f,x),d=new Blob([o],{type:"image/png"});n(URL.createObjectURL(d))},title:"Upload Image",style:{padding:"0.5rem",borderRadius:"0.25rem",border:"1px solid #f49f3f",cursor:"pointer"}}),(0,h.jsx)("small",{style:{color:"#7f8c8d"},children:"\ucd5c\ub300 256x96px, PNG \ud30c\uc77c\ub9cc \uac00\ub2a5"})]}),t&&(0,h.jsx)("button",{type:"button",onClick:()=>{const t=e.current;if(t){const e=`chat_${d.ou.now().toFormat("yyyyMMdd_HHmmss")}_${r||"\uadf8\ub9bc\ub300\ud654"}.png`;!function(e){let{href:t,name:n}=e;const r=document.createElement("a");r.download=n,r.href=t,r.click()}({href:t.toDataURL("image/png"),name:e})}},style:{backgroundColor:"#f28913",color:"white",padding:"0.5rem",borderRadius:"0.25rem",cursor:"pointer"},children:"\uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc"})]})}),t&&(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"2rem",textAlign:"center"},children:[(0,h.jsx)("h3",{children:"\ubbf8\ub9ac\ubcf4\uae30"}),(0,h.jsx)("canvas",{ref:e})]})]})})}}}]);