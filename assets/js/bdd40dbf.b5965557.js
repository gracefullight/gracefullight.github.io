"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["22020"],{2472:function(e,t,l){l.r(t),l.d(t,{default:()=>f});var r=l(74132),n=l(70090),a=l(77345);function i(e){let t=new DataView(e),l=8,r=[];for(;l<t.byteLength;){let n=t.getUint32(l);l+=4;let a=String.fromCodePoint(t.getUint8(l),t.getUint8(l+1),t.getUint8(l+2),t.getUint8(l+3)),i=new Uint8Array(e,l+=4,n);l+=n;let s=t.getUint32(l);l+=4,r.push({crc:s,data:i,type:a})}return r}function s(e){let t=8;for(let l of e)t+=12+l.data.length;return t}function d(e,t){let l="zTXt",r=new TextEncoder().encode(e),i=new Uint8Array([0]),s=new TextEncoder().encode(t),d=(0,a.Wt)(s),o=new Uint8Array(r.length+1+1+d.length);o.set(r,0),o.set([0],r.length),o.set(i,r.length+1),o.set(d,r.length+2);let c=new Uint8Array(4+o.length);return c.set(new TextEncoder().encode(l),0),c.set(o,4),{crc:(0,n.buf)(c),data:o,type:l}}function o(e,t,l){let r=new ArrayBuffer(e),n=new Uint8Array(r);n.set(new Uint8Array(t,0,8),0);let a=8;for(let{type:e,data:t,crc:i}of l){let l=new DataView(r,a,12+t.length);l.setUint32(0,t.length),n.set(new TextEncoder().encode(e),a+4),n.set(t,a+8),l.setUint32(8+t.length,i),a+=12+t.length}return r}var c=l(78856),u=l(40600),g=l(90555),h=l(39546);function f(){let e=(0,h.useRef)(null),[t,l]=(0,h.useState)(null),[n,a]=(0,h.useState)(""),[f,p]=(0,h.useState)("-1379962171"),[x,m]=(0,h.useState)("Eargasm"),[y,b]=(0,h.useState)(!1),[j,v]=(0,h.useState)(.2),[w,U]=(0,h.useState)("#F58D16"),R=(0,h.useId)(),I=(0,h.useId)(),D=(0,h.useId)(),L=(0,h.useId)(),k=(0,h.useId)(),C=(0,h.useId)(),E=(0,h.useCallback)(e=>{let t=e.getImageData(0,0,e.canvas.width,e.canvas.height),l=t.data;for(let e=0;e<l.length;e+=4)255===l[e]&&255===l[e+1]&&255===l[e+2]&&(l[e+2]=254);e.putImageData(t,0,0)},[]),A=(0,h.useCallback)((e,t)=>{let l={b:Number.parseInt(t.slice(5,7),16),g:Number.parseInt(t.slice(3,5),16),r:Number.parseInt(t.slice(1,3),16)},r=e.getImageData(0,0,e.canvas.width,e.canvas.height),n=r.data,a=[];for(let e=0;e<n.length;e+=4)a.push([n[e],n[e+1],n[e+2]]);let i=(0,g.a)(a,4,{}),s=i.centroids.map(e=>({b:e[2],g:e[1],r:e[0]}));if(y){let e=0,t=Number.MAX_SAFE_INTEGER;for(let r=0;r<s.length;r++){let n=s[r],a=Math.sqrt((l.r-n.r)**2+(l.g-n.g)**2+(l.b-n.b)**2);a<t&&(t=a,e=r)}let r=s[e];r.r=r.r*(1-j)+l.r*j,r.g=r.g*(1-j)+l.g*j,r.b=r.b*(1-j)+l.b*j}for(let e=0;e<n.length;e+=4){let t=s[i.clusters[Math.floor(e/4)]];n[e]=t.r,n[e+1]=t.g,n[e+2]=t.b}e.putImageData(r,0,0)},[y,j]);(0,h.useEffect)(()=>{if(t){let l=new Image;l.src=t,l.addEventListener("load",()=>{let t=e.current;if(t){t.width=l.width,t.height=l.height;let e=t.getContext("2d");e&&(e.drawImage(l,0,0),E(e),A(e,w))}})}return()=>{t&&URL.revokeObjectURL(t)}},[t,w,E,A]);let F=async e=>{let t=e.target.files?.[0];if(!t||"image/png"!==t.type)return void alert("PNG \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC \uAC00\uB2A5\uD569\uB2C8\uB2E4.");if(!await function(e){let{file:t,maxWidth:l,maxHeight:r}=e;return new Promise(e=>{let n=URL.createObjectURL(t),a=new Image;a.src=n,a.addEventListener("load",()=>{URL.revokeObjectURL(n),e(a.width<=l&&a.height<=r)}),a.addEventListener("error",()=>{URL.revokeObjectURL(n),e(!1)})})}({file:t,maxHeight:96,maxWidth:256})){alert("\uC774\uBBF8\uC9C0 \uD06C\uAE30\uAC00 256x96 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4."),l(null);return}let r=new Blob([await t.arrayBuffer()],{type:"image/png"});l(URL.createObjectURL(r))};return(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{style:{alignItems:"center",color:"#f49f3f",display:"flex",flexDirection:"column"},children:[(0,r.jsx)("h1",{style:{color:"#f49f3f",margin:"2rem 0"},children:"\uADF8\uB9BC\uB300\uD654 \uC0DD\uC131\uAE30"}),(0,r.jsx)("div",{style:{background:"#242526",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:"1rem",width:"400px"},children:(0,r.jsxs)("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",gap:"0.2rem"},children:[(0,r.jsx)("label",{htmlFor:R,children:"\uACE0\uC720\uC544\uC774\uB514"}),(0,r.jsx)("input",{id:R,onChange:e=>p(e.target.value),placeholder:"AuthID",style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",padding:"0.5rem"},type:"text",value:f})]}),(0,r.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column",gap:"0.2rem"},children:[(0,r.jsx)("label",{htmlFor:I,children:"\uC81C\uC791\uC790"}),(0,r.jsx)("input",{id:I,onChange:e=>m(e.target.value),placeholder:"Author",style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",padding:"0.5rem"},type:"text",value:x})]})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,r.jsx)("label",{htmlFor:D,children:"\uAD6C\uBD84\uD560 \uD30C\uC77C\uBA85"}),(0,r.jsx)("input",{id:D,onChange:e=>a(e.target.value),placeholder:"Custom File Name",style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",padding:"0.5rem"},type:"text",value:n})]}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{checked:y,onChange:e=>b(e.target.checked),type:"checkbox"}),"\uC0C9\uC0C1 \uAC00\uC911\uCE58 \uC0AC\uC6A9\uD558\uAE30"]})}),y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,r.jsx)("label",{htmlFor:L,children:"\uAC00\uC911\uCE58 \uC124\uC815 (0.2 ~ 0.5)"}),(0,r.jsx)("input",{id:L,max:"0.5",min:"0.2",onChange:e=>v(Number.parseFloat(e.target.value)),step:"0.01",title:"\uAC00\uC911\uCE58 \uC124\uC815",type:"range",value:j})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,r.jsx)("label",{htmlFor:k,children:"\uAC00\uC911\uCE58 \uC0C9\uC0C1 \uC120\uD0DD"}),(0,r.jsx)("input",{id:k,onChange:e=>U(e.target.value),title:"\uAC00\uC911\uCE58 \uC0C9\uC0C1",type:"color",value:w})]})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[(0,r.jsx)("label",{htmlFor:C,children:"\uC774\uBBF8\uC9C0 \uCD94\uAC00 *"}),(0,r.jsx)("input",{accept:"image/png",id:C,onChange:F,style:{border:"1px solid #f49f3f",borderRadius:"0.25rem",cursor:"pointer",padding:"0.5rem"},title:"Upload Image",type:"file"}),(0,r.jsx)("small",{style:{color:"#7f8c8d"},children:"\uCD5C\uB300 256x96px, PNG \uD30C\uC77C\uB9CC \uAC00\uB2A5"})]}),t&&(0,r.jsx)("button",{onClick:()=>{let t=e.current;if(t){let e=u.ou.now().toFormat("yyyyMMdd_HHmmss"),l=`chat_${e}_${n||"\uADF8\uB9BC\uB300\uD654"}.png`;t.toBlob(e=>{if(e){let t=new FileReader;t.onload=()=>{var e;let r,n=new Blob([function(e,t,l){let r=i(e),n=d("authid",t),a=d("author",l),c=r.findIndex(e=>{let{type:t}=e;return"IHDR"===t})+1;return r[c]?.type==="PLTE"?r.splice(c+1,0,n,a):r.splice(c,0,n,a),o(s(r),e,r)}(o(s(r=(r=i(e=t.result)).filter(e=>{let{type:t}=e;return"tEXt"!==t})),e,r),f,x)],{type:"image/png"}),a=URL.createObjectURL(n);!function(e){let{href:t,name:l}=e,r=document.createElement("a");r.download=l,r.href=t,r.click()}({href:a,name:l}),URL.revokeObjectURL(a)},t.readAsArrayBuffer(e)}},"image/png")}},style:{backgroundColor:"#f28913",borderRadius:"0.25rem",color:"white",cursor:"pointer",padding:"0.5rem"},type:"button",children:"\uC774\uBBF8\uC9C0 \uB2E4\uC6B4\uB85C\uB4DC"})]})}),t&&(0,r.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:"2rem",textAlign:"center"},children:[(0,r.jsx)("h3",{children:"\uBBF8\uB9AC\uBCF4\uAE30"}),(0,r.jsx)("canvas",{ref:e})]})]})})}}}]);