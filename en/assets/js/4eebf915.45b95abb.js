"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["683"],{93363(e,d,s){s.r(d),s.d(d,{assets:()=>h,contentTitle:()=>l,default:()=>j,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var i=s(70723),r=s(74848),n=s(28453);let t={title:"node-redis vs ioredis",authors:"me",tags:["nodejs","redis"],date:new Date("2022-01-29T22:16:22.000Z")},l,h={authorsImageUrls:[void 0]},c=[{value:"\uC804\uC81C\uC870\uAC74",id:"\uC804\uC81C\uC870\uAC74",level:2},{value:"node-redis",id:"node-redis",level:2},{value:"\uBCA4\uCE58\uB9C8\uD06C",id:"\uBCA4\uCE58\uB9C8\uD06C",level:2},{value:"\uD14C\uC2A4\uD2B8",id:"\uD14C\uC2A4\uD2B8",level:3},{value:"dropBufferSuppport: true",id:"dropbuffersuppport-true",level:4},{value:"dropBufferSuppport: false",id:"dropbuffersuppport-false",level:4},{value:"\uACB0\uB860",id:"\uACB0\uB860",level:2}];function x(e){let d={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.h2,{id:"\uC804\uC81C\uC870\uAC74",children:"\uC804\uC81C\uC870\uAC74"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsx)(d.li,{children:"\uBCF4\uD1B5 IOredis \uAC00 \uD37C\uD3EC\uBA3C\uC2A4\uBA74\uC5D0\uC11C \uB354 \uBE60\uB974\uB2E4\uACE0 \uC54C\uACE0 \uC788\uB294\uB370, node-redis\uAC00 4\uBC84\uC804\uC73C\uB85C \uC62C\uB77C\uC624\uBA74\uC11C \uBC14\uB00C\uC5C8\uB294\uC9C0 \uAD81\uAE08\uD588\uB2E4."}),"\n",(0,r.jsxs)(d.li,{children:["\uBA3C\uC800 IOredis \uC758 ",(0,r.jsx)(d.a,{href:"https://github.com/luin/ioredis#benchmarks",children:"\uBCA4\uCE58\uB9C8\uD06C \uBB38\uC11C"})," \uC5D0\uB294 node-redis \uC640\uC758 \uBE44\uAD50\uB294 \uC5C6\uACE0 ",(0,r.jsx)(d.code,{children:"enableAutoPipelining"})," \uC635\uC158\uC744 \uCF1C\uB77C\uB294 \uB9D0\uB9CC \uB098\uC628\uB2E4."]}),"\n",(0,r.jsxs)(d.li,{children:["\uB2E4\uB978 \uCC38\uACE0\uD560\uB9CC\uD55C \uC790\uB8CC\uB294 ",(0,r.jsx)(d.a,{href:"https://ably.com/blog/migrating-from-node-redis-to-ioredis",children:"Ably: Migrating from Node Redis to Ioredis: a slightly bumpy but faster road"})," \uC778\uB370 \uBA87 \uBC84\uC804\uC758 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB85C \uBE44\uAD50\uB97C \uD588\uB294\uC9C0\uB294 \uB098\uC624\uC9C0 \uC54A\uB294\uB2E4."]}),"\n",(0,r.jsx)(d.li,{children:"\uCD5C\uC2E0 node-redis \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC640 \uBE44\uAD50\uB97C \uD574\uC57C\uD588\uB2E4."}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"node-redis",children:"node-redis"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:["\uBC84\uC804 4\uC5D0\uC11C \uD638\uD658\uB418\uC9C0 \uC54A\uB294 \uBA54\uC18C\uB4DC\uAC00 \uB9CE\uC740\uB370 Breaking Changes \uB098 ",(0,r.jsx)(d.a,{href:"https://github.com/redis/node-redis/blob/master/docs/v3-to-v4.md",children:"v3 to v4 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uAC00\uC774\uB4DC"}),"\uC5D0 \uCD94\uAC00\uAC00 \uB418\uC5B4\uC788\uC9C0 \uC54A\uB2E4. \u{1F621}"]}),"\n",(0,r.jsxs)(d.li,{children:["\uC5F4\uB824\uC788\uB294 \uC774\uC288\uB294 \uB2E4\uC74C\uACFC \uAC19\uB2E4.","\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.a,{href:"https://github.com/redis/node-redis/issues/1765",children:"#1765"}),": ",(0,r.jsx)(d.code,{children:"hgetall, hget, hset, hmset, setex"})]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.a,{href:"https://github.com/redis/node-redis/issues/1796",children:"#1796"}),": ",(0,r.jsx)(d.code,{children:"batch"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(d.li,{children:"\uB808\uB514\uC2A4 \uC0AC\uC758 \uB808\uD30C\uC9C0\uD1A0\uB9AC\uAC00 \uB9DE\uB294\uC9C0 \uC758\uBB38\uC774 \uB4E0\uB2E4."}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"\uBCA4\uCE58\uB9C8\uD06C",children:"\uBCA4\uCE58\uB9C8\uD06C"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.a,{href:"https://github.com/redis/node-redis/tree/master/benchmark",children:"redis/node-redis/benchmark"})," \uBCA4\uCE58\uB9C8\uD06C \uD3F4\uB354\uAC00 \uC788\uB294\uB370 \uACB0\uACFC\uAC00 \uC815\uB9AC\uB41C \uBB38\uC11C\uB97C \uBABB \uCC3E\uC558\uB2E4."]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.a,{href:"https://github.com/poppinlp/node_redis-vs-ioredis",children:"poppinlp/node_redis-vs-ioredis"})," \uB808\uD30C\uC9C0\uD1A0\uB9AC\uAC00 \uC788\uC5C8\uC9C0\uB9CC node-redis \uBC84\uC804\uC774 \uC544\uC27D\uAC8C ",(0,r.jsx)(d.a,{href:"https://github.com/poppinlp/node_redis-vs-ioredis/blob/master/package.json#L26",children:"3.0.2"}),"\uC600\uB2E4."]}),"\n",(0,r.jsx)(d.li,{children:"\uC9C1\uC811 \uC218\uC815\uD574\uC11C \uB3CC\uB824\uBD10\uC57C\uD588\uB2E4."}),"\n"]}),"\n",(0,r.jsx)(d.h3,{id:"\uD14C\uC2A4\uD2B8",children:"\uD14C\uC2A4\uD2B8"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-yml",metastring:'title="docker-compose.yml"',children:'version: "3.9"\nservices:\n  redis:\n    image: "redis:6.2-alpine"\n    ports:\n      - "6379:6379"\n'})}),"\n",(0,r.jsxs)(d.p,{children:["\uB744\uC6CC\uB193\uACE0 \uC9C4\uD589\uD588\uB2E4. IOredis \uC758 ",(0,r.jsx)(d.code,{children:"options.dropBufferSupport"})," \uC635\uC158\uC744 \uCF1C\uBA74 ",(0,r.jsx)(d.a,{href:"https://github.com/luin/ioredis/blob/master/API.md#new-redisport-host-options",children:"\uD37C\uD3EC\uBA3C\uC2A4\uAC00 \uD5A5\uC0C1\uB41C\uB2E4\uB77C\uACE0 \uB098\uC640\uC788\uC5B4\uC11C"})," \uB450 \uACBD\uC6B0\uB97C \uBAA8\uB450 \uD14C\uC2A4\uD2B8\uD588\uB2E4."]}),"\n",(0,r.jsx)(d.h4,{id:"dropbuffersuppport-true",children:"dropBufferSuppport: true"}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsx)(d.p,{children:"ioredis"}),"\n"]}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsx)(d.li,{children:"node-redis (avg): 9586.215"}),"\n",(0,r.jsx)(d.li,{children:"ioredis (avg): 9488.689"}),"\n"]}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Operation"}),(0,r.jsx)(d.th,{children:"node-redis(ms)"}),(0,r.jsx)(d.th,{children:"node-redis with multi(ms)"}),(0,r.jsx)(d.th,{children:"node-redis with pipeline(ms)"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"set"}),(0,r.jsx)(d.td,{children:"26525.039"}),(0,r.jsx)(d.td,{children:"170.461"}),(0,r.jsx)(d.td,{children:"112.881"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"get"}),(0,r.jsx)(d.td,{children:"26334.277"}),(0,r.jsx)(d.td,{children:"252.904"}),(0,r.jsx)(d.td,{children:"183.610"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hset"}),(0,r.jsx)(d.td,{children:"26461.201"}),(0,r.jsx)(d.td,{children:"224.977"}),(0,r.jsx)(d.td,{children:"133.728"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hgetall"}),(0,r.jsx)(d.td,{children:"31394.670"}),(0,r.jsx)(d.td,{children:"389.773"}),(0,r.jsx)(d.td,{children:"306.851"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"incr"}),(0,r.jsx)(d.td,{children:"28580.127"}),(0,r.jsx)(d.td,{children:"206.482"}),(0,r.jsx)(d.td,{children:"116.846"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"keys"}),(0,r.jsx)(d.td,{children:"29647.691"}),(0,r.jsx)(d.td,{children:"772.989"}),(0,r.jsx)(d.td,{children:"737.362"})]})]})]}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Operation"}),(0,r.jsx)(d.th,{children:"ioredis(ms)"}),(0,r.jsx)(d.th,{children:"ioredis with multi(ms)"}),(0,r.jsx)(d.th,{children:"ioredis with pipeline(ms)"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"set"}),(0,r.jsx)(d.td,{children:"25684.449"}),(0,r.jsx)(d.td,{children:"260.598"}),(0,r.jsx)(d.td,{children:"173.958"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"get"}),(0,r.jsx)(d.td,{children:"25720.408"}),(0,r.jsx)(d.td,{children:"290.935"}),(0,r.jsx)(d.td,{children:"226.623"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hmset"}),(0,r.jsx)(d.td,{children:"25857.690"}),(0,r.jsx)(d.td,{children:"338.286"}),(0,r.jsx)(d.td,{children:"200.380"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hgetall"}),(0,r.jsx)(d.td,{children:"31666.897"}),(0,r.jsx)(d.td,{children:"480.690"}),(0,r.jsx)(d.td,{children:"380.761"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"incr"}),(0,r.jsx)(d.td,{children:"28392.304"}),(0,r.jsx)(d.td,{children:"257.203"}),(0,r.jsx)(d.td,{children:"150.187"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"keys"}),(0,r.jsx)(d.td,{children:"29061.574"}),(0,r.jsx)(d.td,{children:"915.112"}),(0,r.jsx)(d.td,{children:"738.331"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"dropbuffersuppport-false",children:"dropBufferSuppport: false"}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsx)(d.p,{children:"node-redis"}),"\n"]}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsx)(d.li,{children:"node-redis (avg): 9764.244"}),"\n",(0,r.jsx)(d.li,{children:"ioredis (avg): 9993.67"}),"\n"]}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Operation"}),(0,r.jsx)(d.th,{children:"node-redis(ms)"}),(0,r.jsx)(d.th,{children:"node-redis with multi(ms)"}),(0,r.jsx)(d.th,{children:"node-redis with pipeline(ms)"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"set"}),(0,r.jsx)(d.td,{children:"29100.469"}),(0,r.jsx)(d.td,{children:"176.660"}),(0,r.jsx)(d.td,{children:"126.425"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"get"}),(0,r.jsx)(d.td,{children:"28317.308"}),(0,r.jsx)(d.td,{children:"321.528"}),(0,r.jsx)(d.td,{children:"189.664"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hset"}),(0,r.jsx)(d.td,{children:"28963.134"}),(0,r.jsx)(d.td,{children:"194.640"}),(0,r.jsx)(d.td,{children:"139.163"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hgetall"}),(0,r.jsx)(d.td,{children:"29219.324"}),(0,r.jsx)(d.td,{children:"406.834"}),(0,r.jsx)(d.td,{children:"357.909"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"incr"}),(0,r.jsx)(d.td,{children:"29009.774"}),(0,r.jsx)(d.td,{children:"211.714"}),(0,r.jsx)(d.td,{children:"133.763"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"keys"}),(0,r.jsx)(d.td,{children:"27309.474"}),(0,r.jsx)(d.td,{children:"847.218"}),(0,r.jsx)(d.td,{children:"731.385"})]})]})]}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Operation"}),(0,r.jsx)(d.th,{children:"ioredis(ms)"}),(0,r.jsx)(d.th,{children:"ioredis with multi(ms)"}),(0,r.jsx)(d.th,{children:"ioredis with pipeline(ms)"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"set"}),(0,r.jsx)(d.td,{children:"27995.198"}),(0,r.jsx)(d.td,{children:"265.654"}),(0,r.jsx)(d.td,{children:"160.538"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"get"}),(0,r.jsx)(d.td,{children:"30821.817"}),(0,r.jsx)(d.td,{children:"335.706"}),(0,r.jsx)(d.td,{children:"245.901"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hmset"}),(0,r.jsx)(d.td,{children:"28127.822"}),(0,r.jsx)(d.td,{children:"288.023"}),(0,r.jsx)(d.td,{children:"216.563"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hgetall"}),(0,r.jsx)(d.td,{children:"28732.957"}),(0,r.jsx)(d.td,{children:"406.565"}),(0,r.jsx)(d.td,{children:"372.790"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"incr"}),(0,r.jsx)(d.td,{children:"30576.902"}),(0,r.jsx)(d.td,{children:"277.081"}),(0,r.jsx)(d.td,{children:"133.760"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"keys"}),(0,r.jsx)(d.td,{children:"29278.756"}),(0,r.jsx)(d.td,{children:"863.351"}),(0,r.jsx)(d.td,{children:"786.658"})]})]})]}),"\n",(0,r.jsx)(d.h2,{id:"\uACB0\uB860",children:"\uACB0\uB860"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:["IOredis \uB97C \uC4F0\uB824\uBA74 ",(0,r.jsx)(d.code,{children:"dropBufferSupport: true"})," \uB97C \uAD8C\uC7A5"]}),"\n",(0,r.jsx)(d.li,{children:"\uB450 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC758 \uD37C\uD3EC\uBA3C\uC2A4 \uCC28\uC774\uB294 \uBBF8\uBBF8\uD558\uB2E4."}),"\n",(0,r.jsx)(d.li,{children:"node-redis \uB294 \uACF5\uC2DD \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC774\uC9C0\uB9CC \uC544\uC9C1 \uBB38\uC11C\uAC00 \uC644\uBCBD\uD558\uC9C0 \uC54A\uB2E4."}),"\n",(0,r.jsx)(d.li,{children:"redis \uC5D0\uC11C \uC81C\uACF5\uD558\uB294 RedisJson, RediSearch \uC758 \uD655\uC7A5\uC131\uC744 \uC704\uD574 node-redis \uB97C \uC120\uD0DD\uD560 \uAC83 \uAC19\uB2E4."}),"\n",(0,r.jsxs)(d.li,{children:["\uC601\uC18D\uC131\uC744 \uC704\uD55C aof, rdb \uC124\uC815\uC740 \uB458 \uB2E4 \uC0AC\uC6A9\uD558\uB77C ",(0,r.jsx)(d.a,{href:"https://redis.io/topics/persistence#ok-so-what-should-i-use",children:"\uBB38\uC11C"}),"\uC5D0 \uB098\uC640\uC788\uB2E4."]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.a,{href:"https://github.com/redis/redis-om-node",children:"Redis/redis-om-node"})," \uC640 ",(0,r.jsx)(d.a,{href:"https://oss.redis.com/redisjson/",children:"RedisJson"}),", ",(0,r.jsx)(d.a,{href:"https://oss.redis.com/redisearch/",children:"RediSearch"})," \uB97C \uB2E4 \uC0AC\uC6A9\uD55C\uB2E4\uBA74 BFF \uBAA8\uB378\uC744 \uC27D\uAC8C \uB9CC\uB4E4 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4. \uB808\uD37C\uB7F0\uC2A4\uB294 \uC544\uC9C1 \uC5C6\uB294\uB4EF..."]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.a,{href:"https://github.com/RedisJSON/RedisJSON/blob/master/Dockerfile",children:"RedisJSON/RedisJson/Dockerfile"})," \uC5D0 \uB450 \uBAA8\uB4C8\uC774 \uBAA8\uB450 \uC124\uCE58\uB418\uC5B4\uC788\uB2E4."]}),"\n"]})]})}function j(e={}){let{wrapper:d}={...(0,n.R)(),...e.components};return d?(0,r.jsx)(d,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},28453(e,d,s){s.d(d,{R:()=>t,x:()=>l});var i=s(96540);let r={},n=i.createContext(r);function t(e){let d=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function l(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(n.Provider,{value:d},e.children)}},70723(e){e.exports=JSON.parse('{"permalink":"/en/2022/01/29/node-redis-vs-ioredis","source":"@site/blog/2022/01/29/node-redis-vs-ioredis.md","title":"node-redis vs ioredis","description":"\uC804\uC81C\uC870\uAC74","date":"2022-01-29T22:16:22.000Z","tags":[{"inline":true,"label":"nodejs","permalink":"/en/tags/nodejs"},{"inline":true,"label":"redis","permalink":"/en/tags/redis"}],"readingTime":2.54,"hasTruncateMarker":false,"authors":[{"name":"Gracefullight","title":"Owner","url":"https://github.com/gracefullight","imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me","page":null}],"frontMatter":{"title":"node-redis vs ioredis","authors":"me","tags":["nodejs","redis"],"date":"2022-01-29T22:16:22.000Z"},"unlisted":false,"prevItem":{"title":"yarn, ts \uC2A4\uD0C0\uD130 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8","permalink":"/en/2022/07/30/yarn-ts-\uC2A4\uD0C0\uD130-\uCCB4\uD06C\uB9AC\uC2A4\uD2B8"},"nextItem":{"title":"TypeScript \uD611\uC5C5","permalink":"/en/2022/01/16/typescript-\uD611\uC5C5"}}')}}]);