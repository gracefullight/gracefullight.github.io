"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["47876"],{93343(e,n,i){i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var t=i(95251),a=i(74848),r=i(28453);let l={title:"Vimeo Upload API - 2. PHP API",authors:"me",tags:["php","vimeo"],date:new Date("2017-01-18T10:50:14.000Z")},o,s={authorsImageUrls:[void 0]},d=[{value:"PHP API \uC124\uCE58",id:"php-api-\uC124\uCE58",level:2},{value:"composer",id:"composer",level:3},{value:"\uC9C1\uC811 \uC124\uCE58",id:"\uC9C1\uC811-\uC124\uCE58",level:3},{value:"\uC124\uC815 \uBCC0\uACBD",id:"\uC124\uC815-\uBCC0\uACBD",level:2},{value:"Upload API \uC0AC\uC6A9",id:"upload-api-\uC0AC\uC6A9",level:2},{value:"\uAE30\uBCF8 \uC608\uC81C \uC18C\uC2A4",id:"\uAE30\uBCF8-\uC608\uC81C-\uC18C\uC2A4",level:3},{value:"\uCEE4\uC2A4\uD130\uB9C8\uC774\uC9D5",id:"\uCEE4\uC2A4\uD130\uB9C8\uC774\uC9D5",level:3},{value:"video_data endpoint",id:"video_data-endpoint",level:3},{value:"\uC5EC\uB2F4",id:"\uC5EC\uB2F4",level:2}];function p(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"/2017/01/16/Vimeo-Upload-API-1-Vimeo-Developers/",children:"Vimeo Developers \uB4F1\uB85D"}),"\uC5D0\uC11C \uC774\uC5B4\uC9D1\uB2C8\uB2E4."]}),"\n",(0,a.jsx)(n.h2,{id:"php-api-\uC124\uCE58",children:"PHP API \uC124\uCE58"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://developer.vimeo.com/api/libraries",children:"Vimeo Libraries"}),"\uC5D0\uC11C \uC6D0\uD558\uB294 API\uB97C \uC120\uD0DD\uD558\uBA74 \uB41C\uB2E4.\n",(0,a.jsx)(n.strong,{children:"Server Libraries PHP"}),"\uC5D0\uC11C Download\uB97C \uD074\uB9AD\uD558\uBA74 Github\uB85C \uC774\uB3D9\uD558\uACE0 ",(0,a.jsx)(n.a,{href:"https://github.com/vimeo/vimeo.php#installation",children:"Installation"}),"\uC744 \uCC38\uC870\uD558\uBA74 \uB41C\uB2E4."]}),"\n",(0,a.jsx)(n.h3,{id:"composer",children:"composer"}),"\n",(0,a.jsx)(n.p,{children:"composer\uAC00 \uC788\uC73C\uBA74 \uC27D\uAC8C \uC124\uCE58\uD560 \uC218 \uC788\uB2E4."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"composer require vimeo/vimeo-api\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\uC9C1\uC811-\uC124\uCE58",children:"\uC9C1\uC811 \uC124\uCE58"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://github.com/vimeo/vimeo.php/archive/1.2.5.zip",children:"v1.2.5"}),"\uB97C \uB2E4\uC6B4 \uBC1B\uACE0 \uC6D0\uD558\uB294 \uACF3\uC5D0 \uC555\uCD95\uC744 \uD47C \uB4A4 class\uB97C load\uD55C\uB2E4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:'<?php\n    require("/path/to/vimeo.php/autoload.php");\n?>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\uC124\uC815-\uBCC0\uACBD",children:"\uC124\uC815 \uBCC0\uACBD"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"vimeo.php\\config.json"})," \uD30C\uC77C\uC744 \uC5F4\uC5B4 ",(0,a.jsx)(n.strong,{children:"client_id, client_secret, access_token"})," \uAC12\uC744 \uC218\uC815\uD558\uC790."]}),"\n",(0,a.jsx)(n.h2,{id:"upload-api-\uC0AC\uC6A9",children:"Upload API \uC0AC\uC6A9"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"vimeo.php\\example\\upload.php"}),"\uB97C \uCEE4\uC2A4\uD130\uB9C8\uC774\uC9D5 \uD574\uBCF4\uC790."]}),"\n",(0,a.jsx)(n.h3,{id:"\uAE30\uBCF8-\uC608\uC81C-\uC18C\uC2A4",children:"\uAE30\uBCF8 \uC608\uC81C \uC18C\uC2A4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",metastring:'title="example\\upload.php"',children:"<?php\nuse Vimeo\\Vimeo;\nuse Vimeo\\Exceptions\\VimeoUploadException;\n\n$config = require(__DIR__ . '/init.php');\nif (empty($config['access_token'])) {\n    // \uC561\uC138\uC2A4 \uD1A0\uD070\uC774 \uC5C6\uC744\uC2DC \uB85C\uAE45 \uB85C\uC9C1 \uCD94\uAC00\n    // throw new Exception('\uC561\uC138\uC2A4 \uD1A0\uD070 \uC5C6\uC774 \uC5C5\uB85C\uB4DC \uD560 \uC218 \uC5C6\uB2E4.\n    // \uAC1C\uBC1C\uC790 \uC571 \uD398\uC774\uC9C0\uC5D0\uC11C \uC561\uC138\uC2A4 \uD1A0\uD070\uC744 \uBC1C\uAE09 \uBC1B\uAC70\uB098 auth.php\uB97C \uC774\uC6A9\uD574\uB77C.');\n}\n$lib = new Vimeo($config['client_id'], $config['client_secret'], $config['access_token']);\n// argv \uB300\uC2E0 \uC5C5\uB85C\uB4DC\uD560 \uD30C\uC77C\uACBD\uB85C\uC758 \uBC30\uC5F4\uC744 \uB123\uC73C\uBA74 \uB41C\uB2E4.\n$files = $argv;\narray_shift($files);\n// \uC5C5\uB85C\uB4DC\uB41C \uD2B8\uB799\uC744 \uCCB4\uD06C\uD558\uB294 \uBC30\uC5F4\n$uploaded = array();\n// \uC5C5\uB85C\uB4DC \uB85C\uC9C1 \uC2DC\uC791\nforeach ($files as $file_name) {\n    // \uC5C5\uB85C\uB4DC \uC2DC\uC791 \uB85C\uAE45\n    // print 'Uploading ' . $file_name . \"\\n\";\n    try {\n        // Vimeo \uC11C\uBC84\uC5D0 \uC5C5\uB85C\uB4DC\uD558\uACE0 \uD574\uB2F9 \uD30C\uC77C\uC758 uri\uC744 \uBC1B\uB294\uB2E4.\n        $uri = $lib->upload($file_name);\n        // \uD574\uB2F9 \uD30C\uC77C\uC758 \uC815\uBCF4\uB97C \uC694\uCCAD\uD55C\uB2E4.\n        $video_data = $lib->request($uri);\n        // \uC5C5\uB85C\uB4DC\uAC00 \uC131\uACF5\uD55C \uD30C\uC77C\uC758 \uB9C1\uD06C\uB97C \uBC1B\uB294\uB2E4.\n        $link = '';\n        if($video_data['status'] == 200) {\n            $link = $video_data['body']['link'];\n        }\n        // \uB85C\uAE45\uC744 \uC704\uD574 \uC800\uC7A5\n        $uploaded[] = array('file' => $file_name, 'api_video_uri' => $uri, 'link' => $link);\n    }\n    catch (VimeoUploadException $e) {\n        //  \uC5C5\uB85C\uB4DC \uC624\uB958 \uBC1C\uC0DD\uC2DC \uC608\uC678\uCC98\uB9AC\n        // print 'Error uploading ' . $file_name . \"\\n\";\n        // print 'Server reported: ' . $e->getMessage() . \"\\n\";\n    }\n}\n// \uACB0\uACFC \uB85C\uAE45 \uBC0F \uD30C\uC77C \uB9C1\uD06C \uD45C\uC2DC\n// print 'Uploaded ' . count($uploaded) . \" files.\\n\\n\";\n// foreach ($uploaded as $site_video) {\n//   extract($site_video);\n//    print \"$file is at $link.\\n\";\n// }\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\uCEE4\uC2A4\uD130\uB9C8\uC774\uC9D5",children:"\uCEE4\uC2A4\uD130\uB9C8\uC774\uC9D5"}),"\n",(0,a.jsxs)(n.p,{children:["25\uBC88\uC9F8 \uC904\uC758 ",(0,a.jsx)(n.a,{href:"https://github.com/vimeo/vimeo.php#make-requests",children:"request \uC694\uCCAD"}),"\uC5D0 \uCD94\uAC00\uB85C \uC601\uC0C1\uC815\uBCF4\uB97C \uBCC0\uACBD\uD558\uAC8C \uC694\uCCAD\uD560 \uC218 \uC788\uB2E4.\n\uC601\uC0C1\uC815\uBCF4\uB97C \uAC00\uC838\uC624\uB294\uAC74 \uBCC0\uD558\uC9C0 \uC54A\uB294\uB2E4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"<?php\n/**\n * [lib->request function]\n * \uD574\uB2F9 URI\uB97C \uB300\uC0C1\uC73C\uB85C \uB370\uC774\uD130\uB97C \uBC1B\uC544\uC624\uACE0\n * PATCH \uBA54\uC18C\uB4DC\uB97C \uC774\uC6A9\uD574\uC11C \uADF8 \uB3D9\uC601\uC0C1\uC758 Metadata\uB97C \uC218\uC815\uD558\uB294 \uD568\uC218\n *\n * @param  {[string]}   uri         [\uC5C5\uB85C\uB4DC \uB41C \uB3D9\uC601\uC0C1 \uC8FC\uC18C]\n * @param  {[array]}    options     [\uD30C\uB77C\uBBF8\uD130 \uBC30\uC5F4(json \uD615\uC2DD\uC758 \uBC30\uC5F4\uD0C0\uC785)]\n * @param  {[string]}   method      [\uC694\uCCAD\uD560 \uBA54\uC18C\uB4DC \uD0C0\uC785(\uC218\uC815\uC740 PATCH)]\n * @return {[video]}    video_data  [\uBE44\uB514\uC624 \uB370\uC774\uD130]\n */\n$video_data = $lib->request($uri, array(\n                'name'                          => '\uB3D9\uC601\uC0C1 \uC774\uB984',\n                'description'                   => '\uB3D9\uC601\uC0C1 \uC124\uBA85',\n                'embed'  => array(                        // embed\uC2DC\uC758 \uC635\uC158\n                            'buttons' => array(\n                                    'like'      => false, // \uC88B\uC544\uC694 \uBC84\uD2BC\n                                    'watchlater'=> false, // \uB098\uC911\uC5D0\uBCF4\uAE30 \uBC84\uD2BC\n                                    'share'     => false, // \uACF5\uC720 \uBC84\uD2BC\n                                    'embed'     => false, // embed \uBC84\uD2BC\n                                    'fullscreen'=> false  // \uC804\uCCB4\uD654\uBA74 \uBC84\uD2BC\n                            ),\n                            'logos' => array(\n                                    'vimeo'     => false  // \uBE44\uBA54\uB85C \uB85C\uACE0\n                            ),\n                            'title' => array(\n                                    'owner'     => 'hide', // \uC81C\uC791\uC790 \uC815\uBCF4\n                                    'portrait'  => 'hide', // \uC81C\uC791\uC790 \uB85C\uACE0\n                                    'name'      => 'hide'  // \uC81C\uC791\uC790 \uC774\uB984\n                            ),\n                            'playbar' => false             // \uC7AC\uC0DD\uBC14\n                )\n), 'PATCH');\n?>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\uC635\uC158\uC740 ",(0,a.jsx)(n.a,{href:"https://developer.vimeo.com/api/endpoints/videos#PATCH/videos/%7Bvideo_id%7D",children:"\uD574\uB2F9 endpoints"})," \uCC38\uC870\uD558\uC790.\n",(0,a.jsx)(n.img,{src:"https://i.imgur.com/EsTv4Ld.png",alt:"image from hexo"})]}),"\n",(0,a.jsx)(n.h3,{id:"video_data-endpoint",children:"video_data endpoint"}),"\n",(0,a.jsxs)(n.p,{children:["\uC5C5\uB85C\uB4DC\uB41C \uD30C\uC77C\uC758 response data\uC5D0\uB294 \uD30C\uC77C metadata\uAC00 \uB4E4\uC5B4\uC788\uB2E4.\n",(0,a.jsx)(n.strong,{children:"$video_data['body']['\uD0A4\uAC12']"})," \uC73C\uB85C \uC811\uADFC\uD558\uBA74 \uB41C\uB2E4. \uC785\uB9DB\uC5D0 \uB9DE\uAC8C \uC0AC\uC6A9\uD574\uBCF4\uC790."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "uri": "\uC601\uC0C1 vimeo \uB9C1\uD06C",\n    "name": "\uC601\uC0C1 \uC81C\uBAA9",\n    "description": "\uC601\uC0C1 \uC124\uBA85",\n    "link": "\uC601\uC0C1 vimeo \uB9C1\uD06C",\n    "duration": \uC7AC\uC0DD \uC2DC\uAC04,\n    "width": \uAC00\uB85C \uD06C\uAE30,\n    "language": \uC5B8\uC5B4,\n    "height": \uC138\uB85C \uD06C\uAE30,\n    "embed": {\n        "uri": null,\n        "html": "iframe \uC601\uC0C1 \uB9C1\uD06C",\n        "buttons": {\n            "like": \uC88B\uC544\uC694 \uBC84\uD2BC \uC5EC\uBD80,\n            "watchlater": \uB098\uC911\uC5D0\uBCF4\uAE30 \uBC84\uD2BC \uC5EC\uBD80,\n            "share": \uACF5\uC720 \uBC84\uD2BC \uC5EC\uBD80,\n            "embed": embed \uBC84\uD2BC \uC5EC\uBD80,\n            "hd": \uACE0\uD654\uC9C8 \uBC84\uD2BC \uC5EC\uBD80,\n            "fullscreen": \uC804\uCCB4\uD654\uBA74 \uBC84\uD2BC \uC5EC\uBD80,\n            "scaling": \uC2A4\uCF00\uC77C\uB9C1 \uBC84\uD2BC \uC5EC\uBD80\n        },\n        "logos": {\n            "vimeo": \uBE44\uBA54\uC624 \uB85C\uACE0 \uC5EC\uBD80,\n            "custom": {\n                "active": \uCEE4\uC2A4\uD140 \uB85C\uACE0 \uC5EC\uBD80,\n                "link": \uCEE4\uC2A4\uD140 \uB85C\uACE0 \uB9C1\uD06C,\n                "sticky": sticky \uC5EC\uBD80\n            }\n        },\n        "title": {\n            "name": \uC81C\uC791\uC790 \uC774\uB984 display \uC124\uC815,\n            "owner": \uC81C\uC791\uC790 \uC815\uBCF4 display \uC124\uC815,\n            "portrait": \uC81C\uC791\uC790 \uB85C\uACE0 display \uC124\uC815\n        },\n        "playbar": \uC7AC\uC0DD\uBC14 \uC5EC\uBD80,\n        "volume": \uBCFC\uB968\uBC14 \uC5EC\uBD80,\n        "color": "\uC0C9\uC0C1 \uD5E5\uC2A4\uCF54\uB4DC"\n    },\n    "created_time": "\uC0DD\uC131\uC77C\uC2DC gmt",\n    "modified_time": "\uBCC0\uACBD\uC77C\uC2DC gmt",\n    "release_time": "\uB178\uCD9C\uC77C\uC2DC gmt",\n    "content_rating": [\n        "safe"\n    ],\n    "license": "\uB77C\uC774\uC13C\uC2A4",\n    "privacy": {\n        "view": "\uB178\uCD9C \uC124\uC815",\n        "embed": "embed \uB178\uCD9C \uC124\uC815",\n        "download": \uB2E4\uC6B4\uB85C\uB4DC \uC5EC\uBD80,\n        "add": \uCD94\uAC00 \uC5EC\uBD80,\n        "comments": "\uB313\uAE00 \uD5C8\uC6A9 \uC124\uC815"\n    },\n    "pictures": {\n        "uri": "\uC601\uC0C1 \uB300\uD45C \uC0AC\uC9C4 \uB9C1\uD06C",\n        "active": \uC0AC\uC9C4 \uC5EC\uBD80,\n        "type": "custom",\n        "sizes": [\n            {\n                "width": 100,\n                "height": 75,\n                "link": "\uC0AC\uC774\uC988\uBCC4 \uB9C1\uD06C"\n            },\n            ...\n        ],\n        "resource_key": "\uC811\uADFC \uD0A4"\n    },\n    "tags": [\uD0DC\uADF8 \uBC30\uC5F4],\n    "stats": {\n        "plays": \uC7AC\uC0DD \uC218\n    },\n    "metadata": {\n        "connections": {\n            "comments": {\n                "uri": "\uB313\uAE00 \uB9C1\uD06C",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "credits": {\n                "uri": "\uD06C\uB808\uB527 \uB9C1\uD06C",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "likes": {\n                "uri": "\uC88B\uC544\uC694 \uB9C1\uD06C",\n                "options": [\n                    "GET"\n                ],\n                "total": 0\n            },\n            "pictures": {\n                "uri": "\uC0AC\uC9C4 \uB9C1\uD06C",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "texttracks": {\n                "uri": "\uD14D\uC2A4\uD2B8 \uD2B8\uB799 \uB9C1\uD06C",\n                "options": [\n                    "GET",\n                    "POST"\n                ],\n                "total": 0\n            },\n            "related": null\n        },\n        "interactions": {\n            "watchlater": {\n                "added": false,\n                "added_time": null,\n                "uri": "\uB098\uC911\uC5D0\uBCF4\uAE30 \uB9C1\uD06C"\n            }\n        }\n    },\n    "user": {\n        "\uC720\uC800\uC815\uBCF4 \uBC0F \uC811\uADFC \uACBD\uB85C"\n    },\n    "review_link": "\uB9AC\uBDF0 \uB2E4\uC774\uB809\uD2B8 \uB9C1\uD06C",\n    "files": [\n        {\n            "quality": "\uD30C\uC77C \uD654\uC9C8",\n            "type": "\uD30C\uC77C \uD0C0\uC785",\n            "width": \uD30C\uC77C \uAC00\uB85C,\n            "height": \uD30C\uC77C \uC138\uB85C,\n            "link": "\uD30C\uC77C \uB2E4\uC774\uB809\uD2B8 \uB9C1\uD06C",\n            "created_time": "\uD30C\uC77C \uC0DD\uC131\uC77C\uC2DC",\n            "fps": \uC8FC\uC0AC\uC728,\n            "size": \uD30C\uC77C \uD06C\uAE30,\n            "md5": "\uD1A0\uD070",\n            "link_secure": "\uD30C\uC77C \uB2E4\uC774\uB809\uD2B8 \uC2DC\uD050\uC5B4 \uB9C1\uD06C"\n        },\n        ...\n    ],\n    "download": [\n        {\n            "quality": "\uB2E4\uC6B4\uB85C\uB4DC \uD30C\uC77C \uD654\uC9C8",\n            "type": "\uD30C\uC77C \uD0C0\uC785",\n            "width": \uD30C\uC77C \uAC00\uB85C,\n            "height": \uD30C\uC77C \uC138\uB85C,\n            "expires": "\uB9CC\uB8CC\uC77C\uC2DC",\n            "link": "\uB2E4\uC6B4\uB85C\uB4DC \uB2E4\uC774\uB809\uD2B8 \uB9C1\uD06C",\n            "created_time": "\uC0DD\uC131\uC77C\uC2DC",\n            "fps": \uC8FC\uC0AC\uC728,\n            "size": \uD30C\uC77C \uD06C\uAE30,\n            "md5": "\uD1A0\uD070"\n        },\n        ...\n    ],\n    "app": {\n        "name": "\uC571 \uC774\uB984",\n        "uri": "\uC571 \uB9C1\uD06C"\n    },\n    "status": "\uC601\uC0C1 \uC0C1\uD0DC",\n    "resource_key": "\uB9AC\uC18C\uC2A4 \uD0A4",\n    "embed_presets": null\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\uC5EC\uB2F4",children:"\uC5EC\uB2F4"}),"\n",(0,a.jsx)(n.p,{children:"API\uC758 \uB0B4\uBD80 \uAD6C\uC870\uB294 \uD5E4\uB354\uCD94\uAC00\uC640 curl\uB85C\uB9CC \uC774\uB8E8\uC5B4\uC838\uC788\uB2E4.\nOAuth2.0\uACFC RESTful\uB97C \uC774\uD574\uD588\uB2E4\uBA74 \uC544\uC8FC \uC26C\uC6B8 \uAC83\uC774\uB2E4."})]})}function c(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var t=i(96540);let a={},r=t.createContext(a);function l(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(r.Provider,{value:n},e.children)}},95251(e){e.exports=JSON.parse('{"permalink":"/en/2017/01/18/Vimeo-Upload-API-2-PHP-API","source":"@site/blog/2017/01/18/Vimeo-Upload-API-2-PHP-API.md","title":"Vimeo Upload API - 2. PHP API","description":"Vimeo Developers \uB4F1\uB85D\uC5D0\uC11C \uC774\uC5B4\uC9D1\uB2C8\uB2E4.","date":"2017-01-18T10:50:14.000Z","tags":[{"inline":true,"label":"php","permalink":"/en/tags/php"},{"inline":true,"label":"vimeo","permalink":"/en/tags/vimeo"}],"readingTime":3.92,"hasTruncateMarker":false,"authors":[{"name":"Gracefullight","title":"Owner","url":"https://github.com/gracefullight","imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me","page":null}],"frontMatter":{"title":"Vimeo Upload API - 2. PHP API","authors":"me","tags":["php","vimeo"],"date":"2017-01-18T10:50:14.000Z"},"unlisted":false,"prevItem":{"title":"id\uC5D0 .(pariod)\uC774 \uC788\uB294 element querySelector","permalink":"/en/2017/01/18/querySelector-escape-pariod"},"nextItem":{"title":"Vimeo Upload API - 1. Vimeo Developers","permalink":"/en/2017/01/16/Vimeo-Upload-API-1-Vimeo-Developers"}}')}}]);