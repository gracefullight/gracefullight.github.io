"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["27695"],{46816(s,e,n){n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var r=n(6516),t=n(74848),l=n(28453);let o={title:"rollup-plugin-postcss \uC758 path alias \uBB38\uC81C",authors:"me",tags:["javascript","rollup"],date:new Date("2021-09-11T22:31:22.000Z")},i,a={authorsImageUrls:[void 0]},c=[{value:"scss alias",id:"scss-alias",level:2},{value:"sass-loader",id:"sass-loader",level:2},{value:"custom-sass-loader",id:"custom-sass-loader",level:2},{value:"rollup.config.js",id:"rollupconfigjs",level:2},{value:"\uACB0\uB860",id:"\uACB0\uB860",level:2}];function p(s){let e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...s.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/egoist/rollup-plugin-postcss/issues/217",children:"\uD604\uC7AC(210911) \uBA54\uC778\uD14C\uC774\uB108\uB97C \uAD6C\uD558\uB294 \uD504\uB85C\uC81D\uD2B8"}),"\uC774\uBBC0\uB85C \uC774\uC288\uAC00 \uC218\uC815\uB418\uC9C0 \uC54A\uB294\uB2E4."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"scss-alias",children:"scss alias"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-scss",children:'// ~\uB294 \uB178\uB4DC \uBAA8\uB4C8 \uCC98\uB9AC\uB41C\uB2E4.\n@import "~@material";\n\n// @styles \uB85C \uC0AC\uC6A9\uD558\uACE0 \uC2F6\uC744 \uACBD\uC6B0\uAC00 \uC788\uB2E4.\n@import "@styles/mystyle";\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\uB450 \uBC88\uC9F8\uC758 \uACBD\uC6B0\uB294 scss \uC2DC\uD2B8\uB97C \uCC98\uB9AC\uD574\uC8FC\uBA74\uC11C ",(0,t.jsx)(e.code,{children:"(plugin postcss) Error: Can't find stylesheet to import."})," \uC640 \uAC19\uC740 \uC5D0\uB7EC\uB97C \uBC49\uB294\uB2E4."]}),"\n",(0,t.jsxs)(e.li,{children:["\uC6F9\uD329\uC758 \uACBD\uC6B0 ",(0,t.jsx)(e.code,{children:"resolve.alias"})," \uAC00 \uC54C\uC544\uC11C \uCC98\uB9AC\uB97C \uD574\uC8FC\uC9C0\uB9CC, rollup-plugin-postcss \uC758 sass-loader \uC5D0\uC11C importer \uB97C \uCD94\uAC00\uD574\uC918\uC57C\uD560 \uAC83 \uAC19\uC558\uB2E4."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"sass-loader",children:"sass-loader"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\uC774 \uD50C\uB7EC\uADF8\uC778\uC758 sass-loader \uB294 ",(0,t.jsx)(e.a,{href:"https://github.com/egoist/rollup-plugin-postcss/blob/master/src/sass-loader.js#L79",children:"dart-sass \uC758 importer \uB97C \uD655\uC7A5"}),"\uD574\uC11C \uC27D\uAC8C \uCD94\uAC00\uAC00 \uAC00\uB2A5\uD574\uBCF4\uC600\uB2E4."]}),"\n",(0,t.jsxs)(e.li,{children:["\uADF8\uB7EC\uB098 \uC544\uBB34\uB9AC \uD655\uC7A5\uCC98\uB9AC\uB97C \uD574\uB3C4 importer \uC5D0\uC11C \uD574\uB2F9 \uACBD\uB85C\uAC00 \uB9AC\uC878\uBE0C \uB418\uC9C0 \uC54A\uC558\uACE0 ",(0,t.jsx)(e.a,{href:"https://github.com/egoist/rollup-plugin-postcss/issues?q=importer",children:"\uAD00\uB828 \uC774\uC288"}),"\uAC00 3\uAC1C, PR\uC774 2\uAC1C \uB4F1\uB85D\uB41C \uAC83\uC744 \uD655\uC778\uD560 \uC218 \uC788\uB2E4."]}),"\n",(0,t.jsx)(e.li,{children:"\uC774 \uAC78 \uD574\uACB0\uD558\uB824\uBA74 postcss.use.sass \uC0AC\uC6A9\uC2DC\uC5D0 importer \uB97C override \uD574\uC8FC\uB294 custom sass-loader \uB97C \uC9C1\uC811 \uB9CC\uB4E4\uC5B4\uC57C\uD55C\uB2E4."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"custom-sass-loader",children:"custom-sass-loader"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/egoist/rollup-plugin-postcss/blob/master/src/sass-loader.js",children:"rollup-plugin-postcss/sass-loader.js"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"pity"})," \uB294 promisify \uB85C \uB300\uCCB4 \uAC00\uB2A5\uD558\uC5EC \uC9C0\uC6E0\uACE0 ",(0,t.jsx)(e.code,{children:"import-cwd"})," \uB3C4 node \uCF54\uC5B4\uB97C \uC0AC\uC6A9\uD558\uAC8C \uBCC0\uACBD\uD588\uB2E4."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"p-queue"})," \uB3C4 child_process \uB85C \uB300\uCCB4 \uAC00\uB2A5\uD574\uBCF4\uC778\uB2E4."]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'import { createRequire } from "module";\nimport path from "path";\nimport { promisify } from "util";\n\nimport resolve from "resolve";\nimport PQueue from "p-queue";\n\nfunction loadModule(moduleId) {\n  try {\n    return require(moduleId);\n  } catch {\n    // Ignore error\n  }\n\n  try {\n    return createRequire(path.resolve(process.cwd(), "noop.js"))(moduleId);\n  } catch {\n    // Ignore error\n  }\n}\n\n// This queue makes sure node-sass leaves one thread available for executing fs tasks\n// See: https://github.com/sass/node-sass/issues/857\nconst threadPoolSize = process.env.UV_THREADPOOL_SIZE || 4;\nconst workQueue = new PQueue({ concurrency: threadPoolSize - 1 });\n\nconst moduleRe = /^~([a-z\\d]|@).+/i;\n\nconst getUrlOfPartial = (url) => {\n  const parsedUrl = path.parse(url);\n  return `${parsedUrl.dir}${path.sep}_${parsedUrl.base}`;\n};\n\nconst resolvePromise = promisify(resolve);\n\n// List of supported SASS modules in the order of preference\nconst sassModuleIds = ["node-sass", "sass"];\n\nexport default {\n  name: "sass",\n  test: /\\.(sass|scss)$/,\n  process({ code }) {\n    return new Promise((resolve, reject) => {\n      const sass = loadSassOrThrow();\n      const render = promisify(sass.render.bind(sass));\n      const data = this.options.data || "";\n      workQueue.add(() =>\n        render({\n          ...this.options,\n          file: this.id,\n          data: data + code,\n          indentedSyntax: /\\.sass$/.test(this.id),\n          sourceMap: this.sourceMap,\n          importer: [\n            (url, importer, done) => {\n              if (!moduleRe.test(url)) {\n                // \uC774\uBD80\uBD84\uC5D0 alias importer \uAC00 \uCD94\uAC00\uB418\uC5B4\uC57C\uD55C\uB2E4.\n                if (/^@styles/.test(url)) {\n                  return done({\n                    file: url.replace(\n                      /^@styles/,\n                      path.resolve(__dirname, "./src/styles"),\n                    ),\n                  });\n                }\n                return done({ file: url });\n              }\n              const moduleUrl = url.slice(1);\n              const partialUrl = getUrlOfPartial(moduleUrl);\n\n              const options = {\n                basedir: path.dirname(importer),\n                extensions: [".scss", ".sass", ".css"],\n              };\n              const finishImport = (id) => {\n                done({\n                  // Do not add `.css` extension in order to inline the file\n                  file: id.endsWith(".css") ? id.replace(/\\.css$/, "") : id,\n                });\n              };\n\n              const next = () => {\n                // Catch all resolving errors, return the original file and pass responsibility back to other custom importers\n                done({ file: url });\n              };\n\n              // Give precedence to importing a partial\n              resolvePromise(partialUrl, options)\n                .then(finishImport)\n                .catch((error) => {\n                  if (\n                    error.code === "MODULE_NOT_FOUND" ||\n                    error.code === "ENOENT"\n                  ) {\n                    resolvePromise(moduleUrl, options)\n                      .then(finishImport)\n                      .catch(next);\n                  } else {\n                    next();\n                  }\n                });\n            },\n          ].concat(this.options.importer || []),\n        })\n          .then((result) => {\n            for (const file of result.stats.includedFiles) {\n              this.dependencies.add(file);\n            }\n\n            resolve({\n              code: result.css.toString(),\n              map: result.map && result.map.toString(),\n            });\n          })\n          .catch(reject),\n      );\n    });\n  },\n};\n\n// \uC774\uD558 \uC0DD\uB7B5...\n'})}),"\n",(0,t.jsx)(e.h2,{id:"rollupconfigjs",children:"rollup.config.js"}),"\n",(0,t.jsxs)(e.p,{children:["\uC704\uC758 \uCEE4\uC2A4\uD130\uB9C8\uC774\uC9D5\uB41C sass-loader \uB97C ",(0,t.jsx)(e.code,{children:"use: ['sass']"})," \uB300\uC2E0 \uB4F1\uB85D\uD574\uC900\uB2E4."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"postcss({\n  // \uCD94\uAC00\n  loaders: [customSassLoader],\n  // \uC81C\uAC70\n  // use: ['sass']\n});\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\uACB0\uB860",children:"\uACB0\uB860"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"rollup-plugin-postcss"})," \uB294 \uC774\uC288\uAC00 \uC788\uC5B4 \uD655\uC7A5\uC744 \uC9C1\uC811\uD574\uC57C\uD558\uACE0 \uC774\uB294 \uC720\uC9C0\uBCF4\uC218 \uD3EC\uC778\uD2B8\uB85C \uB2E4\uAC00\uC62C \uC218 \uC788\uB2E4."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"postcss-import"})," \uB294 alias \uAE30\uB2A5\uC774 \uC5C6\uC5B4 \uC0AC\uC6A9\uC774 \uBD88\uAC00\uB2A5\uD558\uB2E4."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"postcss-import-alias"})," \uB4F1\uB4F1\uC758 alias \uB97C \uCD94\uAC00\uD55C \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB3C4 \uBD88\uAC00\uB2A5\uD55C\uB370, \uC774\uB294 ",(0,t.jsx)(e.a,{href:"https://github.com/egoist/rollup-plugin-postcss/blob/master/src/loaders.js#L36",children:"postcssLoader \uAC00 \uBA3C\uC800 \uB4F1\uB85D"})," \uB418\uB294\uB370 \uC758\uC678\uC758 \uACB0\uACFC\uC774\uB2E4. ",(0,t.jsx)(e.code,{children:"rollup-plugin-postcss"})," \uB97C \uC9C1\uC811 \uB85C\uCEEC\uC5D0\uC11C \uBE4C\uB4DC\uD574\uC11C \uD574\uB2F9 \uC9C0\uC810\uC744 \uD655\uC778\uD574\uBCFC \uC218 \uC788\uACA0\uC9C0\uB9CC PR \uC744 \uBC1B\uC9C0 \uC54A\uC73C\uBBC0\uB85C \uC758\uBBF8\uB3C4 \uC5C6\uB2E4."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/thgh/rollup-plugin-scss",children:"rollup-plugin-scss"}),"\uB97C \uC0AC\uC6A9\uD558\uACE0 postcss \uB97C processor \uB85C \uC918\uC11C \uBC18\uB300\uB85C \uCC98\uB9AC\uD560 \uC218 \uC788\uC5B4\uBCF4\uC774\uB294\uB370, \uBE4C\uB4DC \uD30C\uC774\uD504\uB77C\uC778\uC744 \uB2E4 \uB9AC\uD329\uD1A0\uB9C1\uC744 \uD574\uC57C\uD558\uBBC0\uB85C \uB098\uC911\uC5D0 \uB3C4\uC804\uD574\uBCF4\uB294\uAC78\uB85C \uD558\uC790."]}),"\n"]})]})}function d(s={}){let{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,t.jsx)(e,{...s,children:(0,t.jsx)(p,{...s})}):p(s)}},28453(s,e,n){n.d(e,{R:()=>o,x:()=>i});var r=n(96540);let t={},l=r.createContext(t);function o(s){let e=r.useContext(l);return r.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function i(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:o(s.components),r.createElement(l.Provider,{value:e},s.children)}},6516(s){s.exports=JSON.parse('{"permalink":"/en/2021/09/11/rollup-plugin-postcss-\uC758-path-alias-\uBB38\uC81C","source":"@site/blog/2021/09/11/rollup-plugin-postcss-\uC758-path-alias-\uBB38\uC81C.md","title":"rollup-plugin-postcss \uC758 path alias \uBB38\uC81C","description":"- \uD604\uC7AC(210911) \uBA54\uC778\uD14C\uC774\uB108\uB97C \uAD6C\uD558\uB294 \uD504\uB85C\uC81D\uD2B8\uC774\uBBC0\uB85C \uC774\uC288\uAC00 \uC218\uC815\uB418\uC9C0 \uC54A\uB294\uB2E4.","date":"2021-09-11T22:31:22.000Z","tags":[{"inline":false,"label":"javascript","permalink":"/en/tags/javascript","description":"Any application that can be written in JavaScript, will eventually be written in JavaScript"},{"inline":true,"label":"rollup","permalink":"/en/tags/rollup"}],"readingTime":2.96,"hasTruncateMarker":false,"authors":[{"name":"Gracefullight","title":"Owner","url":"https://github.com/gracefullight","imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me","page":null}],"frontMatter":{"title":"rollup-plugin-postcss \uC758 path alias \uBB38\uC81C","authors":"me","tags":["javascript","rollup"],"date":"2021-09-11T22:31:22.000Z"},"unlisted":false,"prevItem":{"title":"yarn berry \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uCCB4\uD06C\uB9AC\uC2A4\uD2B8","permalink":"/en/2021/09/11/yarn-berry-\uB9C8\uC774\uADF8\uB808\uC774\uC158-\uCCB4\uD06C\uB9AC\uC2A4\uD2B8"},"nextItem":{"title":"ecma \uC2A4\uD399\uC73C\uB85C \uC54C\uC544\uBCF4\uB294 prototype","permalink":"/en/2021/05/01/js-prototype-spec"}}')}}]);