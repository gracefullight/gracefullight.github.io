"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["51599"],{72816(e,n,r){r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>s});var t=r(24081),l=r(74848),o=r(28453);let a={title:"Laravel 5.5 - \uB2E4\uD615\uC131 \uAD00\uACC4",authors:"me",tags:["php","laravel"],date:new Date("2017-08-02T23:29:36.000Z")},i,p={authorsImageUrls:[void 0]},s=[{value:"morphTo",id:"morphto",level:2},{value:"\uAE30\uBCF8 \uBB38\uBC95",id:"\uAE30\uBCF8-\uBB38\uBC95",level:3},{value:"\uD544\uB4DC\uBA85 \uC815\uC758",id:"\uD544\uB4DC\uBA85-\uC815\uC758",level:3},{value:"\uD0C0\uC785-\uBAA8\uB378 \uBC14\uC778\uB529",id:"\uD0C0\uC785-\uBAA8\uB378-\uBC14\uC778\uB529",level:3},{value:"morphOne",id:"morphone",level:2},{value:"morphToMany",id:"morphtomany",level:2},{value:"morphedByMany",id:"morphedbymany",level:2},{value:"\uC5EC\uB2F4",id:"\uC5EC\uB2F4",level:2}];function h(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["\uB313\uAE00 \uD14C\uC774\uBE14\uC774 \uC788\uACE0 \uC774 \uB313\uAE00\uC740 \uC5EC\uB7EC \uD14C\uC774\uBE14\uC5D0\uC11C \uC0AC\uC6A9\uB41C\uB2E4\uACE0 \uCE58\uC790.\n\uADF8\uB7FC \uB313\uAE00 \uD14C\uC774\uBE14\uC5D0 type\uACFC type_id\uB97C \uAC00\uC838\uAC00\uC57C\uD560 \uAC83\uC774\uB2E4.\n\uC774 \uB54C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 \uAD00\uACC4\uAC00 \uB2E4\uD615\uC131 \uAD00\uACC4(\uB9B4\uB808\uC774\uC158)\uC778\uB370, ",(0,l.jsx)(n.a,{href:"https://laravel.com/docs/5.4/eloquent-relationships#polymorphic-relations",children:"\uACF5\uC2DD \uBB38\uC11C"}),"\uC758 \uC124\uBA85\uC774 \uC870\uAE08\uC740 \uBD80\uC871\uD558\uB2E4\uACE0 \uB290\uAF08\uB2E4. \uD30C\uD5E4\uCCD0\uBCF4\uC790."]}),"\n",(0,l.jsx)(n.h2,{id:"morphto",children:"morphTo"}),"\n",(0,l.jsx)(n.p,{children:"morphTo\uB294 type\uACFC type_id\uB97C \uAC00\uC9C4, \uC5EC\uB7EC \uD14C\uC774\uBE14\uB85C \uC5F0\uACB0\uB418\uC5B4\uC57C\uD560 \uD14C\uC774\uBE14\uC5D0\uC11C \uC0AC\uC6A9\uD558\uB294 \uB9B4\uB808\uC774\uC158 \uBA54\uC18C\uB4DC\uC774\uB2E4.\n\uACF5\uC2DD \uBB38\uC11C\uC5D0\uB294 \uB370\uC774\uD130\uB97C \uAC00\uC838\uC628 \uB4A4 \uB9B4\uB808\uC774\uC158\uC744 \uC5F0\uACB0\uD558\uB294 \uC608\uC2DC\uB9CC \uC788\uACE0, Eager \uB85C\uB529 (With \uAD6C\uBB38\uC744 \uC0AC\uC6A9\uD558\uB294 \uBC29\uBC95) \uD6C4 specific\uD55C \uD544\uB4DC\uB97C \uC0AC\uC6A9\uD558\uAC8C \uBCC0\uACBD\uD558\uB294 \uACBD\uC6B0\uC5D0 \uB300\uD55C \uC815\uBCF4\uB294 \uC5C6\uB2E4."}),"\n",(0,l.jsx)(n.h3,{id:"\uAE30\uBCF8-\uBB38\uBC95",children:"\uAE30\uBCF8 \uBB38\uBC95"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",metastring:'title="YourModel.php"',children:"<?php\n\nclass YourModel extends Model {\n  ...\n\n  // \uB2E4\uD615\uC131 \uAD00\uACC4\uB97C \uAC00\uC9C8 \uD568\uC218\uB97C data\uB85C \uC815\uC758\uD588\uB2E4\n  public function data() {\n    return $this->morphTo();\n  }\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\uC774\uB807\uAC8C \uC815\uC758\uC2DC\uC5D0 ",(0,l.jsx)(n.code,{children:"YourModel::with('data')->get()"})," \uC73C\uB85C \uD638\uCD9C\uD558\uBA74 \uBD88\uB7EC\uC640\uC838\uC57C\uB418\uC9C0\uB9CC, \uD544\uB4DC\uBA85, \uBAA8\uB378\uBA85\uC774 \uC815\uD655\uD558\uC9C0 \uC54A\uC73C\uBA74 \uCFFC\uB9AC \uD638\uCD9C\uC870\uCC28 \uB418\uC9C0 \uC54A\uB294\uB2E4.\n(\uC2EC\uC9C0\uC5B4 \uC5D0\uB7EC\uB3C4 \uBC1C\uC0DD\uD558\uC9C0 \uC54A\uB294\uB2E4)"]}),"\n",(0,l.jsx)(n.h3,{id:"\uD544\uB4DC\uBA85-\uC815\uC758",children:"\uD544\uB4DC\uBA85 \uC815\uC758"}),"\n",(0,l.jsxs)(n.p,{children:["\uBA3C\uC800 morphTo\uC758 ",(0,l.jsx)(n.a,{href:"https://github.com/laravel/framework/blob/5.4/src/Illuminate/Database/Eloquent/Concerns/HasRelationships.php#L133-L150",children:"\uC18C\uC2A4\uCF54\uB4DC"}),"\uB97C \uB97C \uC0B4\uD3B4\uBCF4\uC790."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",metastring:'title="morphTo"',children:"<?php\n/**\n  * Define a polymorphic, inverse one-to-one or many relationship.\n  *\n  * @param  string  $name\n  * @param  string  $type\n  * @param  string  $id\n  * @return \\Illuminate\\Database\\Eloquent\\Relations\\MorphTo\n  */\npublic function morphTo($name = null, $type = null, $id = null)\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"name"}),", ",(0,l.jsx)(n.strong,{children:"type"}),", ",(0,l.jsx)(n.strong,{children:"id"}),"\uB97C \uD30C\uB77C\uBBF8\uD130\uB85C \uBC1B\uB294\uB2E4. \uADF8\uB7FC \uD30C\uB77C\uBBF8\uD130\uB97C \uB118\uACA8\uBCF4\uC790."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",metastring:'title="YourModel.php"',children:"<?php\n\nclass YourModel extends Model {\n  ...\n\n  public function data() {\n    // morphTo\uC758 paremeter\uB85C null, \uD0C0\uC785\uD544\uB4DC\uBA85, \uD0C0\uC785\uC778\uB371\uC2A4 \uD544\uB4DC\uBA85\uC744 \uB118\uAE34\uB2E4.\n    return $this->morphTo(null, 'type', 'type_idx');\n  }\n}\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\uC5EC\uAE30\uC11C ",(0,l.jsx)(n.strong,{children:"name"}),"\uC5D4 \uB3C4\uB300\uCCB4 \uBB58 \uB123\uC5B4\uC57C \uB418\uB294\uAC70\uC57C? \uB77C\uACE0 \uC758\uBB38\uC774 \uC0DD\uAE38 \uC218\uAC00 \uC788\uB2E4.\n\uD568\uC218 \uB0B4\uC5D0\uC11C ",(0,l.jsx)(n.strong,{children:"name"})," \uBCC0\uC218\uB294 ",(0,l.jsx)(n.code,{children:"$this->getMorphs(Str::snake($name), $type, $id);"})," \uC5D0\uB9CC \uB531 \uD55C \uBC88 \uC0AC\uC6A9\uB41C\uB2E4."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"getMorphs \uD568\uC218\uB97C \uB530\uB77C\uAC00\uBCF4\uC790."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",metastring:'title="getMorphs"',children:"<?php\nprotected function getMorphs($name, $type, $id) {\n  // $type\uACFC $id\uAC00 \uBA85\uC2DC\uB418\uBA74 \uADF8 \uAC12\uC744 \uBA3C\uC800 \uBC18\uD658\uD55C\uB2E4.\n  return [$type ?: $name.'_type', $id ?: $name.'_id'];\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\uC8FC\uC11D\uCC98\uB7FC ",(0,l.jsx)(n.strong,{children:"type"}),"\uACFC ",(0,l.jsx)(n.strong,{children:"id"}),"\uAC00 \uBA85\uC2DC\uB418\uBA74 ",(0,l.jsx)(n.strong,{children:"name"}),"\uAC12\uC740 \uC0AC\uC6A9\uB418\uC9C0 \uC54A\uB294 \uC4F0\uB808\uAE30 \uAC12\uC774 \uB418\uC5B4\uBC84\uB9B0\uB2E4.\n\uB530\uB77C\uC11C ",(0,l.jsx)(n.code,{children:"null"}),"\uB85C \uB118\uACA8\uC8FC\uBA74 \uB41C\uB2E4."]}),"\n",(0,l.jsx)(n.h3,{id:"\uD0C0\uC785-\uBAA8\uB378-\uBC14\uC778\uB529",children:"\uD0C0\uC785-\uBAA8\uB378 \uBC14\uC778\uB529"}),"\n",(0,l.jsx)(n.p,{children:"\uD0C0\uC785\uACFC \uC778\uB371\uC2A4\uB97C \uBA85\uC2DC\uD558\uBA74 \uB4DC\uB514\uC5B4 \uC624\uB958\uBA54\uC138\uC9C0\uAC00 \uB178\uCD9C\uB41C\uB2E4.\n\uB0B4\uAC00 \uC815\uC758\uD55C type\uBA85\uC744 \uAC00\uC9C4 Class\uAC00 \uC5C6\uB2E4 \uB77C\uB294 \uB0B4\uC6A9\uC778\uB370, \uC774\uC81C \uD0C0\uC785\uACFC \uBAA8\uB378\uC744 \uC5F0\uACB0\uC2DC\uCF1C\uBCF4\uC790."}),"\n",(0,l.jsxs)(n.p,{children:["\uC774 \uB54C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 \uBA54\uC18C\uB4DC\uAC00 ",(0,l.jsx)(n.a,{href:"https://laravel.com/docs/5.4/eloquent-relationships#polymorphic-relations",children:"\uACF5\uC2DD \uBB38\uC11C"}),"\uC5D0\uC11C \uC870\uAE08 \uC2A4\uD06C\uB864\uC744 \uB0B4\uB9AC\uBA74 \uC788\uB294 ",(0,l.jsx)(n.strong,{children:"Custom Polymorphic Types"}),"\uC5D0 \uC798 \uC124\uBA85\uB418\uC5B4 \uC788\uB2E4."]}),"\n",(0,l.jsx)(n.p,{children:"\uD558\uC9C0\uB9CC \uB4F1\uB85D\uD558\uB294 \uBD80\uBD84\uC5D0 \uB300\uD55C \uC124\uBA85\uC774 **You may register the morphMap in the boot function of your AppServiceProvider or create a separate service provider if you wish.**\uB77C\uACE0 \uB418\uC5B4\uC788\uB2E4. \uC989 AppServiceProvider\uC5D0 \uB123\uB358\uC9C0 Service Provider\uB85C \uC0DD\uC131\uC774\uB2E4."}),"\n",(0,l.jsx)(n.p,{children:"\uD55C \uBAA8\uB378\uC5D0\uB9CC \uC4F8 \uAC74\uB370 \uC804\uCCB4\uC5D0 \uB4F1\uB85D\uC744 \uD560 \uD544\uC694\uAC00 \uC5C6\uC73C\uB2C8, \uC0AC\uC6A9\uD560 \uBAA8\uB378\uC5D0 \uAE30\uB2A5\uC744 \uB123\uC5B4\uBCF4\uC790."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",metastring:'title="YourModel.php"',children:"// Relation\uC744 \uC0AC\uC6A9\uD574\uC57C\uD55C\uB2E4.\nuse Illuminate\\Database\\Eloquent\\Relations\\Relation;\n\n<?php\nclass YourModel extends Model {\n  // \uC774 \uBA54\uC18C\uB4DC\uB294 \uBAA8\uB378\uC774 initialize\uB420 \uB54C \uC2E4\uD589\uB41C\uB2E4.\n  protected static function boot() {\n    parent::boot();\n\n    // \uC5EC\uAE30\uC5D0 \uD0C0\uC785 \uBCC4\uB85C \uBAA8\uB378\uC744 \uBC14\uC778\uB529\uD55C\uB2E4.\n    Relation::morphMap([\n      // type\uC774 product\uC77C \uACBD\uC6B0 id\uB294 product_id\uB97C \uAC00\uB9AC\uD0A8\uB2E4.\n      'product' => 'App\\Models\\Product',\n      // type\uC774 order\uC77C \uACBD\uC6B0 id\uB294 order_id\uB97C \uAC00\uB9AC\uD0A8\uB2E4.\n      'order' => 'App\\Models\\Order'\n    ]);\n  }\n\n  public function data() {\n    // morphTo\uC758 paremeter\uB85C null, \uD0C0\uC785\uD544\uB4DC\uBA85, \uD0C0\uC785\uC778\uB371\uC2A4 \uD544\uB4DC\uBA85\uC744 \uB118\uAE34\uB2E4.\n    return $this->morphTo(null, 'type', 'type_idx');\n  }\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uC644\uBCBD\uD574\uC84C\uB2E4. \uC774\uC81C \uC624\uB958 \uC5C6\uC774 \uC2E4\uD589\uB418\uB294 \uAC83\uC744 \uD655\uC778\uD560 \uC218 \uC788\uB2E4."}),"\n",(0,l.jsx)(n.h2,{id:"morphone",children:"morphOne"}),"\n",(0,l.jsx)(n.p,{children:"\uBB38\uC11C \uC0C1\uC5D0\uB294 \uC124\uBA85 \uB418\uC9C0 \uC54A\uC740 morphOne \uC774\uB780 \uBA54\uC18C\uB4DC\uB3C4 \uC788\uB2E4.\nmorphMany\uB294 \uAD00\uACC4\uAC00 \uC124\uC815\uB41C \uAC12\uC744 \uBC30\uC5F4\uB85C \uBC18\uD658\uD558\uC9C0\uB9CC morphOne\uC740 \uD558\uB098\uC758 \uB370\uC774\uD130\uB85C \uBC18\uD658\uD55C\uB2E4. (hasOne\uACFC hasMany\uCC98\uB7FC)"}),"\n",(0,l.jsx)(n.p,{children:"\uAD6C\uC870\uB294 \uB2E4\uC74C\uACFC \uAC19\uB2E4."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"<?php\npublic function morphOne($related, $name, $type = null, $id = null, $localKey = null)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"morphtomany",children:"morphToMany"}),"\n",(0,l.jsx)(n.h2,{id:"morphedbymany",children:"morphedByMany"}),"\n",(0,l.jsx)(n.h2,{id:"\uC5EC\uB2F4",children:"\uC5EC\uB2F4"}),"\n",(0,l.jsx)(n.p,{children:"\uB2E4\uB300\uB2E4 \uB2E4\uD615\uC131 \uAD00\uACC4 \uBA54\uC18C\uB4DC (morphToMany, morphedByMany)\uC758 \uACBD\uC6B0\uB294 \uB098\uC911\uC5D0 \uC0AC\uC6A9\uD558\uAC8C \uB418\uBA74 \uC815\uB9AC\uD574\uC57C\uACA0\uB2E4.\nRelation \uBA54\uC18C\uB4DC\uB4E4\uC740 \uBB38\uC11C\uB97C \uB300\uCDA9 \uD6D1\uACE0 API Docs\uB97C \uC9C1\uC811 \uAE4C\uBCF4\uB294\uAC8C, \uD6A8\uC728\uC801\uC778 \uAC83 \uAC19\uB2E4."})]})}function d(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453(e,n,r){r.d(n,{R:()=>a,x:()=>i});var t=r(96540);let l={},o=t.createContext(l);function a(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(o.Provider,{value:n},e.children)}},24081(e){e.exports=JSON.parse('{"permalink":"/en/2017/08/02/Laravel-5-4-Polymorphic-Relations","source":"@site/blog/2017/08/02/Laravel-5-4-Polymorphic-Relations.md","title":"Laravel 5.5 - \uB2E4\uD615\uC131 \uAD00\uACC4","description":"\uB313\uAE00 \uD14C\uC774\uBE14\uC774 \uC788\uACE0 \uC774 \uB313\uAE00\uC740 \uC5EC\uB7EC \uD14C\uC774\uBE14\uC5D0\uC11C \uC0AC\uC6A9\uB41C\uB2E4\uACE0 \uCE58\uC790.","date":"2017-08-02T23:29:36.000Z","tags":[{"inline":true,"label":"php","permalink":"/en/tags/php"},{"inline":true,"label":"laravel","permalink":"/en/tags/laravel"}],"readingTime":2.81,"hasTruncateMarker":false,"authors":[{"name":"Gracefullight","title":"Owner","url":"https://github.com/gracefullight","imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me","page":null}],"frontMatter":{"title":"Laravel 5.5 - \uB2E4\uD615\uC131 \uAD00\uACC4","authors":"me","tags":["php","laravel"],"date":"2017-08-02T23:29:36.000Z"},"unlisted":false,"prevItem":{"title":"Centos7 Timezone \uBCC0\uACBD\uD558\uAE30","permalink":"/en/2017/08/09/CentOS7-Timezone-\uBCC0\uACBD\uD558\uAE30"},"nextItem":{"title":"Laravel 5.5 - Multi DB Connection","permalink":"/en/2017/07/31/Laravel-5-4-Multi-Database-Connection"}}')}}]);