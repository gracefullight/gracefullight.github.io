"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[78194],{43697:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>l,contentTitle:()=>n,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var t=s(11527),a=s(8806);const r={title:"Prisma troubleshooting",date:new Date("2023-07-08T15:01:34.544Z"),description:"Exploring Prisma's read replicas support, single data source handling, and lack of polymorphism association support.",authors:"me",tags:["nodejs","prisma"]},n=void 0,o={permalink:"/en/2023/07/09/prisma-troubleshooting",source:"@site/i18n/en/docusaurus-plugin-content-blog/2023/07/09/prisma-troubleshooting.mdx",title:"Prisma troubleshooting",description:"Exploring Prisma's read replicas support, single data source handling, and lack of polymorphism association support.",date:"2023-07-08T15:01:34.544Z",formattedDate:"July 8, 2023",tags:[{label:"nodejs",permalink:"/en/tags/nodejs"},{label:"prisma",permalink:"/en/tags/prisma"}],readingTime:.515,hasTruncateMarker:!1,authors:[{name:"Gracefullight",title:"Owner",url:"https://github.com/gracefullight",imageURL:"https://avatars.githubusercontent.com/u/11773683?v=4",key:"me"}],frontMatter:{title:"Prisma troubleshooting",date:"2023-07-08T15:01:34.544Z",description:"Exploring Prisma's read replicas support, single data source handling, and lack of polymorphism association support.",authors:"me",tags:["nodejs","prisma"]},unlisted:!1,prevItem:{title:"Refactoring Grammer",permalink:"/en/2023/08/07/refactoring-grammer"},nextItem:{title:"Atom-based state management and Valtio",permalink:"/en/2023/06/25/atomic-state-management-with-valtio"}},l={authorsImageUrls:[void 0]},c=[{value:"Read replica",id:"read-replica",level:2},{value:"Data sources",id:"data-sources",level:2},{value:"Polymorphism",id:"polymorphism",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",li:"li",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h2,{id:"read-replica",children:"Read replica"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["I thought it didn't exist due to the ",(0,t.jsx)(i.a,{href:"https://github.com/prisma/prisma/issues/172",children:"Support for Read Replicas #172"})," issue."]}),"\n",(0,t.jsxs)(i.li,{children:["But it is provided in the form of middleware at ",(0,t.jsx)(i.a,{href:"https://github.com/prisma/prisma-read-replica-middleware",children:"prisma/prisma-read-replica-middleware"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["e.g. ",(0,t.jsx)(i.a,{href:"https://github.com/prisma/middleware-examples/tree/main/prisma-read-replica-middleware",children:"prisma/middleware-examples/prisma-read-replica-middleware"})]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"data-sources",children:"Data sources"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["In the ",(0,t.jsx)(i.code,{children:"schema.prisma"})," file, there can ",(0,t.jsx)(i.a,{href:"https://www.prisma.io/docs/concepts/components/prisma-schema/data-sources",children:"only be one"})," ",(0,t.jsx)(i.code,{children:"datasource"})," column."]}),"\n",(0,t.jsxs)(i.li,{children:["In case the data source changes, the ",(0,t.jsx)(i.code,{children:"migration.lock"})," file must be deleted and the migration process must be run again."]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"polymorphism",children:"Polymorphism"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.a,{href:"https://github.com/prisma/prisma/issues/1644",children:"Support for Polymorphic Associations #1644"})," It seems there is no current plan to support this."]}),"\n",(0,t.jsx)(i.li,{children:"Polymorphic relationships are necessary in normalization but it de-normalizes by adding information to the column."}),"\n"]})]})}function m(e={}){const{wrapper:i}={...(0,a.a)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8806:(e,i,s)=>{s.d(i,{Z:()=>o,a:()=>n});var t=s(50959);const a={},r=t.createContext(a);function n(e){const i=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);