"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["68823"],{69228(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>i});var r=t(95959),a=t(74848),l=t(28453);let c={title:"RxJS \uBCD1\uB82C HTTP \uC694\uCCAD",authors:"me",tags:["rxjs","javascript"],date:new Date("2021-01-04T19:27:14.000Z")},s,o={authorsImageUrls:[void 0]},i=[{value:"\uAC1C\uC694",id:"\uAC1C\uC694",level:2},{value:"\uC18C\uC2A4",id:"\uC18C\uC2A4",level:2},{value:"\uD14C\uC2A4\uD2B8",id:"\uD14C\uC2A4\uD2B8",level:2},{value:"\uC5EC\uB2F4",id:"\uC5EC\uB2F4",level:2}];function d(e){let n={code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"\uAC1C\uC694",children:"\uAC1C\uC694"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\uC575\uADE4\uB7EC \uAC19\uAE30\uB3C4 \uD558\uACE0 \uCF54\uB4DC\uB97C \uBA38\uB9AC\uB97C \uC368\uC11C \uC77D\uC5B4\uC57C\uD55C\uB2E4\uB294 \uAC83 \uB54C\uBB38\uC5D0 \uCD5C\uB300\uD55C \uC548 \uC4F0\uACE0 \uC2F6\uB2E4."}),"\n",(0,a.jsx)(n.li,{children:"\uD558\uC9C0\uB9CC async/await \uB85C \uB3D9\uC2DC\uC131 \uC81C\uC5B4\uAC00 \uD798\uB4DC\uBBC0\uB85C \uC774 \uCABD\uC774 \uB2F5\uC778 \uAC83 \uAC19\uB2E4."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\uC18C\uC2A4",children:"\uC18C\uC2A4"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\uB370\uC774\uD130 \uBC30\uC5F4\uC5D0\uC11C 5\uAC1C\uC529 \uB04A\uC5B4\uC11C \uBCD1\uB82C \uC694\uCCAD\uD55C\uB2E4."}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"delay, catchError, delayWhen"})," \uC758 \uC870\uAC74\uB9CC \uB2E4\uB974\uAC8C \uD558\uC5EC \uC0AC\uC6A9\uD558\uBA74 \uB41C\uB2E4."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'import { EMPTY, from, of } from "rxjs";\nimport {\n  catchError,\n  delay,\n  delayWhen,\n  finalize,\n  map,\n  mergeMap,\n  retry,\n  tap,\n  toArray,\n} from "rxjs/operators";\n\n// \uC288\uB3C4\uCF54\uB4DC\uC784\nconst fetchObservable = (data) => {\n  return from(\n    new Promise((resolve) => {\n      setTimeout(() => {\n        resolve({\n          data,\n        });\n      }, 300);\n    }),\n  );\n};\n\nconst concurrency = 5;\nconst fetchConcurrently$ = from(YOUR_DATA).pipe(\n  mergeMap((token) => {\n    return fetchObservable(YOUR_DATA).pipe(\n      map(({ data }) => data),\n      delay(1000),\n      retry(1),\n      catchError(() => EMPTY),\n    );\n  }, concurrency),\n  map((data) => {\n    return data.id;\n  }),\n  toArray(),\n  delayWhen(() => Promise.resolve()),\n  finalize(() => console.log("done")),\n);\n\nfetchConcurrently$.subscribe((ids) => console.log(ids));\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\uD14C\uC2A4\uD2B8",children:"\uD14C\uC2A4\uD2B8"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\uD14C\uC2A4\uD2B8 \uC2DC\uC5D0 ",(0,a.jsx)(n.code,{children:"jest"})," \uC5D0\uC11C done callback \uC744 \uC801\uC808\uD788 \uD638\uCD9C\uD574\uC8FC\uC790."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { TestScheduler } from "rxjs/testing";\nimport { mergeMap, map, toArray } from "rxjs/operators";\nimport { from } from "rxjs";\n\ndescribe("fetchConcurrently$ observable", () => {\n  let testScheduler;\n\n  beforeEach(() => {\n    testScheduler = new TestScheduler((actual, expected) => {\n      expect(actual).toEqual(expected);\n    });\n  });\n\n  it("should produce expected output", () => {\n    testScheduler.run((helpers) => {\n      const { cold, expectObservable } = helpers;\n\n      // Mock fetchObservable function\n      const fetchObservable = (data) => {\n        return from([data]);\n      };\n\n      // Mock YOUR_DATA\n      const YOUR_DATA = [1, 2, 3, 4, 5];\n\n      const concurrency = 5;\n      const fetchConcurrently$ = from(YOUR_DATA).pipe(\n        mergeMap((token) => {\n          return fetchObservable(token).pipe(\n            map((data) => data),\n            // ... other operators\n          );\n        }, concurrency),\n        map((data) => data),\n        toArray(),\n      );\n\n      const expectedMarble = "(abcde|)";\n      const expectedValues = { a: 1, b: 2, c: 3, d: 4, e: 5 };\n\n      expectObservable(fetchConcurrently$).toBe(expectedMarble, expectedValues);\n    });\n  });\n});\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\uC5EC\uB2F4",children:"\uC5EC\uB2F4"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["marble \uD14C\uC2A4\uD2B8\uB3C4 \uC791\uC131\uD574\uBCF4\uACE0 \uC2F6\uC5C8\uB294\uB370 \uB808\uD37C\uB7F0\uC2A4\uB85C \uC0BC\uC744\uB9CC\uD55C \uBB38\uC11C\uB97C \uBABB \uCC3E\uC544\uC11C \uC544\uC27D\uB2E4.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"GPT4\uAC00 \uC704\uCC98\uB7FC \uC798 \uC9DC\uC92C\uB2E4."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:"\uB9E4\uBC88 of \uC640 from \uC744 \uD5F7\uAC08\uB9AC\uB294\uB370, \uC804\uC790\uB294 \uD558\uB098\uC529\uC774\uACE0 \uD6C4\uC790\uB294 \uB369\uC5B4\uB9AC\uB2E4."}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>c,x:()=>s});var r=t(96540);let a={},l=r.createContext(a);function c(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),r.createElement(l.Provider,{value:n},e.children)}},95959(e){e.exports=JSON.parse('{"permalink":"/en/2021/01/04/rxjs-concurrent-http-requests","source":"@site/blog/2021/01/04/rxjs-concurrent-http-requests.md","title":"RxJS \uBCD1\uB82C HTTP \uC694\uCCAD","description":"\uAC1C\uC694","date":"2021-01-04T19:27:14.000Z","tags":[{"inline":true,"label":"rxjs","permalink":"/en/tags/rxjs"},{"inline":false,"label":"javascript","permalink":"/en/tags/javascript","description":"Any application that can be written in JavaScript, will eventually be written in JavaScript"}],"readingTime":1.28,"hasTruncateMarker":false,"authors":[{"name":"Gracefullight","title":"Owner","url":"https://github.com/gracefullight","imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me","page":null}],"frontMatter":{"title":"RxJS \uBCD1\uB82C HTTP \uC694\uCCAD","authors":"me","tags":["rxjs","javascript"],"date":"2021-01-04T19:27:14.000Z"},"unlisted":false,"prevItem":{"title":"Webpack5 \uC124\uC815","permalink":"/en/2021/01/15/webpack5-config"},"nextItem":{"title":"Chrome dev summit 2020 \uBE60\uB974\uAC8C \uD6D1\uAE30","permalink":"/en/2020/12/12/cds-2020"}}')}}]);