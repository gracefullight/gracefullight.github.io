"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([["7821"],{13415(e,n,a){a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});var t=a(61110),r=a(74848),s=a(28453);let c={title:"WeakMap, WeakSet \uC608\uC81C",authors:"me",tags:["javascript"],date:new Date("2020-08-07T22:45:42.000Z")},l,i={authorsImageUrls:[void 0]},o=[{value:"WeakMap",id:"weakmap",level:2},{value:"Cache",id:"cache",level:3},{value:"Sealer",id:"sealer",level:3},{value:"WeakSet",id:"weakset",level:2},{value:"Circular references",id:"circular-references",level:3},{value:"\uCC38\uC870",id:"\uCC38\uC870",level:2}];function u(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["\uD56D\uC0C1 ",(0,r.jsx)(n.code,{children:"WeakMap"}),", ",(0,r.jsx)(n.code,{children:"WeakSet"}),"\uC744 \uC5B4\uB5A4 \uBC29\uC2DD\uC73C\uB85C \uC4F8\uAE4C \uB9CE\uC774 \uACE0\uBBFC\uB418\uC5C8\uB2E4.\n\uCC38\uC870\uAC00 \uC5C6\uB294 \uACBD\uC6B0 \uBA54\uBAA8\uB9AC\uB97C \uBC18\uD658\uD558\uB294\uB370\uC5D0 \uC774\uC810\uC774 \uC788\uB294\uB370, \uC5EC\uB7EC \uD65C\uC6A9\uBC29\uC548\uC774 \uC788\uC5C8\uB2E4."]}),"\n",(0,r.jsx)(n.h2,{id:"weakmap",children:"WeakMap"}),"\n",(0,r.jsx)(n.h3,{id:"cache",children:"Cache"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// \u{1F4C1} cache.js\nconst cache = new WeakMap();\n\n// calculate and remember the result\nfunction process(obj) {\n  if (!cache.has(obj)) {\n    const result = /* calculate the result for */ obj;\n\n    cache.set(obj, result);\n  }\n\n  return cache.get(obj);\n}\n\n// \u{1F4C1} main.js\nlet obj = {\n  /* some object */\n};\n\nconst result1 = process(obj);\nconst result2 = process(obj);\n\n// ...later, when the object is not needed any more:\nobj = null;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"sealer",children:"Sealer"}),"\n",(0,r.jsxs)(n.p,{children:["\uAC12\uC744 \uBD09\uC778\uD558\uACE0 ",(0,r.jsx)(n.code,{children:"box"}),"\uB97C \uBC18\uD658\uD574 ",(0,r.jsx)(n.code,{children:"box"})," object \uC804\uCCB4\uAC00 \uC640\uC57C\uB9CC \uB0B4\uBD80\uAC12\uC744 \uC54C \uC218 \uC788\uAC8C \uD574\uC900\uB2E4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function sealerFactory() {\n  const weakMap = new WeakMap();\n  return {\n    sealer(obj) {\n      const box = Object.freeze(Object.create(null));\n      weakMap.set(box, object);\n      return box;\n    },\n\n    unsealer(box) {\n      return weakMap.get(box);\n    },\n  };\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"weakset",children:"WeakSet"}),"\n",(0,r.jsx)(n.h3,{id:"circular-references",children:"Circular references"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'// Execute a callback on everything stored inside an object\nfunction execRecursively(fn, subject, refs = null) {\n  if (!refs) {\n    refs = new WeakSet();\n  }\n\n  // Avoid infinite recursion\n  if (refs.has(subject)) {\n    return;\n  }\n\n  fn(subject);\n  if (typeof subject === "object") {\n    refs.add(subject);\n    for (const key in subject) {\n      execRecursively(fn, subject[key], refs);\n    }\n  }\n}\n\nconst foo = {\n  foo: "Foo",\n  bar: {\n    bar: "Bar",\n  },\n};\n\nfoo.bar.baz = foo; // Circular reference!\nexecRecursively((obj) => console.log(obj), foo);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\uCC38\uC870",children:"\uCC38\uC870"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",children:"MDN WeakSet"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://javascript.info/weakmap-weakset#use-case-caching",children:"The Modern JavaScript Tutorial - WeakMap"})}),"\n",(0,r.jsx)(n.li,{children:"How JavaScript Works"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453(e,n,a){a.d(n,{R:()=>c,x:()=>l});var t=a(96540);let r={},s=t.createContext(r);function c(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(s.Provider,{value:n},e.children)}},61110(e){e.exports=JSON.parse('{"permalink":"/en/2020/08/07/js-weakmap-and-weakset-examples","source":"@site/blog/2020/08/07/js-weakmap-and-weakset-examples.md","title":"WeakMap, WeakSet \uC608\uC81C","description":"\uD56D\uC0C1 WeakMap, WeakSet\uC744 \uC5B4\uB5A4 \uBC29\uC2DD\uC73C\uB85C \uC4F8\uAE4C \uB9CE\uC774 \uACE0\uBBFC\uB418\uC5C8\uB2E4.","date":"2020-08-07T22:45:42.000Z","tags":[{"inline":false,"label":"javascript","permalink":"/en/tags/javascript","description":"Any application that can be written in JavaScript, will eventually be written in JavaScript"}],"readingTime":1.04,"hasTruncateMarker":false,"authors":[{"name":"Gracefullight","title":"Owner","url":"https://github.com/gracefullight","imageURL":"https://avatars.githubusercontent.com/u/11773683?v=4","key":"me","page":null}],"frontMatter":{"title":"WeakMap, WeakSet \uC608\uC81C","authors":"me","tags":["javascript"],"date":"2020-08-07T22:45:42.000Z"},"unlisted":false,"prevItem":{"title":"\uC790\uBC14\uC2A4\uD06C\uB9BD\uD2B8 \uBB38\uC790\uC5F4","permalink":"/en/2020/08/08/js-strings"},"nextItem":{"title":"qs \uBAA8\uB4C8\uACFC querystring \uBAA8\uB4C8 \uBE44\uAD50","permalink":"/en/2020/06/14/the-difference-between-qs-and-querystring"}}')}}]);