"use strict";(self.webpackChunkgracefullight_github_io=self.webpackChunkgracefullight_github_io||[]).push([[93100],{49437:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var i=t(11527),r=t(67953);const s={title:"AWS ECS \ubd80\uc218\uae30",authors:"me",tags:["aws","docker","k8s"],date:new Date("2017-08-12T00:39:25.000Z")},l="\uc6a9\uc5b4",a={permalink:"/en/2017/08/12/AWS-ECS-\ubd80\uc218\uae30",source:"@site/blog/2017/08/12/AWS-ECS-\ubd80\uc218\uae30.md",title:"AWS ECS \ubd80\uc218\uae30",description:"ECS \ub294 \uc11c\uc6b8 \ub9ac\uc83c\uc774 \uc544\uc9c1 \uc5c6\uc5b4\uc11c \uadf8\ub7f0\uac00, \uad6c\uae00\ub9c1\ud574\ub3c4 \uc0ac\uc6a9\ud560\ub9cc\ud55c \ub370\uc774\ud130\uac00 \ub108\ubb34 \uc801\uc5c8\ub2e4.",date:"2017-08-12T00:39:25.000Z",formattedDate:"August 12, 2017",tags:[{label:"aws",permalink:"/en/tags/aws"},{label:"docker",permalink:"/en/tags/docker"},{label:"k8s",permalink:"/en/tags/k-8-s"}],readingTime:5.97,hasTruncateMarker:!1,authors:[{name:"Gracefullight",title:"Owner",url:"https://github.com/gracefullight",imageURL:"https://avatars.githubusercontent.com/u/11773683?v=4",key:"me"}],frontMatter:{title:"AWS ECS \ubd80\uc218\uae30",authors:"me",tags:["aws","docker","k8s"],date:"2017-08-12T00:39:25.000Z"},unlisted:!1,prevItem:{title:"Docker\ub85c LEMP Stack \uad6c\ucd95\ud558\uae30",permalink:"/en/2017/08/14/LEMP-with-Docker"},nextItem:{title:"\uc77c\ubcf8 \uc6b0\ud3b8\ubc88\ud638(\uc8fc\uc18c) \uac80\uc0c9 API",permalink:"/en/2017/08/12/\uc77c\ubcf8-\uc6b0\ud3b8\ubc88\ud638-\uc8fc\uc18c-\uac80\uc0c9-API"}},o={authorsImageUrls:[void 0]},c=[{value:"Cluster",id:"cluster",level:2},{value:"Task",id:"task",level:2},{value:"Container Definition",id:"container-definition",level:2},{value:"Task Definition",id:"task-definition",level:2},{value:"Service",id:"service",level:2},{value:"Repository",id:"repository",level:2},{value:"\uace0\ubbfc",id:"\uace0\ubbfc",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"ECS \ub294 \uc11c\uc6b8 \ub9ac\uc83c\uc774 \uc544\uc9c1 \uc5c6\uc5b4\uc11c \uadf8\ub7f0\uac00, \uad6c\uae00\ub9c1\ud574\ub3c4 \uc0ac\uc6a9\ud560\ub9cc\ud55c \ub370\uc774\ud130\uac00 \ub108\ubb34 \uc801\uc5c8\ub2e4.\n(\uae30\ucd08 \uc124\uba85\uc740 \uc798 \ub418\uc788\ub2e4. \ud558\uc9c0\ub9cc Hello World Application \uc744 \uc62c\ub9ac\ub824\uace0 ECS \ub97c \uc4f0\ub294 \uac74 \uc544\ub2c8\ub2c8\uae4c..)"}),"\n",(0,i.jsx)(e.h2,{id:"cluster",children:"Cluster"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"Amazon ECS \ud074\ub7ec\uc2a4\ud130\ub294 \uc791\uc5c5\uc744 \ubc30\uce58\ud560 \uc218 \uc788\ub294 \ucee8\ud14c\uc774\ub108 \uc778\uc2a4\ud134\uc2a4\uc758 \ub17c\ub9ac\uc801 \uadf8\ub8f9\ud654\uc785\ub2c8\ub2e4.\n\uc774 \uacf5\uc2dd \uc124\uba85\uc744 \ubcf4\uace0 Cluster \uc5d0 \ub300\ud55c \uac10\uc744 \uc7a1\uae30\uac00 \uc27d\uc9c0 \uc54a\uc558\ub2e4."}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\uac04\ub2e8\ud788\ud558\uba74 Docker Container \ub97c \uc62c\ub9ac\ub294 EC2 Instance \uc774\ub2e4."}),"\n",(0,i.jsx)(e.li,{children:"K8S \uc758 \uadf8 \ud074\ub7ec\uc2a4\ud130\uc774\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"task",children:"Task"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Task \ub294 \uc791\uc5c5\uc774\ub77c\uace0 \ubc88\uc5ed\ub418\uba70, \ud558\ub098\uc758 Task Definition JSON \uc740 \ud558\ub098\uc758 Docker-compose YAML \uc774\ub77c\uace0 \ubcf4\uc790."}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"container-definition",children:"Container Definition"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ubc30\ud3ec\ub418\ub294 \uac01 \ucee8\ud14c\uc774\ub108\uc758 \uc815\uc758"}),"\n",(0,i.jsx)(e.li,{children:"\ud30c\ub4dc\uc758 \uac1c\ub150"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"task-definition",children:"Task Definition"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ucee8\ud14c\uc774\ub108\uc758 \uc9d1\ud569\uc778 Task\uc758 \uc815\uc758"}),"\n",(0,i.jsx)(e.li,{children:"\ud30c\ub4dc\uc758 \uac1c\ub150"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"service",children:"Service"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:'Amazon ECS \ub294 \ub2e8\uc77c ECS \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc791\uc5c5 \uc815\uc758\uc5d0 \uc9c0\uc815\ub41c \uc218("\uc6d0\ud558\ub294 \uac1c\uc218")\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \ub3d9\uc2dc\uc5d0 \uc2e4\ud589 \ubc0f \uad00\ub9ac\ud560 \uc218 \uc788\uac8c \ud574\uc90d\ub2c8\ub2e4.\n\uc5b4\ub5a4 \uc774\uc720\ub85c \uc791\uc5c5\uc774 \uc2e4\ud328 \ub610\ub294 \uc911\uc9c0\ub418\ub294 \uacbd\uc6b0 Amazon ECS \uc11c\ube44\uc2a4 \uc2a4\ucf00\uc904\ub7ec\uac00 \uc791\uc5c5 \uc815\uc758\uc758 \ub2e4\ub978 \uc778\uc2a4\ud134\uc2a4\ub97c \uc2dc\uc791\ud558\uc5ec \uc774\ub97c \ub300\uccb4\ud558\uace0 \uc11c\ube44\uc2a4\uc758 \uc6d0\ud558\ub294 \uc791\uc5c5 \uc218\ub97c \uc720\uc9c0\ud569\ub2c8\ub2e4.'}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Task \ub97c \uc790\ub3d9\uc73c\ub85c \uad00\ub9ac\ud560 \uc218 \uc788\uac8c \ud558\ub294 \uae30\ub2a5, LB \ub098 Auto Scaling \ubaa8\ub450 \uc5ec\uae30\uc11c \uc801\uc6a9\uc774 \ub41c\ub2e4."}),"\n",(0,i.jsx)(e.li,{children:"\ub864\ub9c1 \uc5c5\ub370\uc774\ud2b8 \uc2dc\uc5d0 \ubc30\ud3ec \ubc0f \uc624\ud1a0 \uc2a4\ucf00\uc77c\ub9c1\uc744 \ub2f4\ub2f9\ud55c\ub2e4."}),"\n",(0,i.jsx)(e.li,{children:"K8S\uc758 \uc11c\ube44\uc2a4, \ub514\ud50c\ub85c\uc774\uba3c\ud2b8, \ub808\ud50c\ub9ac\uce74\uc138\ud2b8\uc758 \uc5ed\ud560"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"repository",children:"Repository"}),"\n",(0,i.jsx)(e.p,{children:"AWS Docker \ub808\uc9c0\uc2a4\ud2b8\ub9ac \uc11c\ube44\uc2a4\ub85c AWS Private DockerHub \ub77c\uace0 \ubcf4\uc790."}),"\n",(0,i.jsx)(e.h1,{id:"\ub124\ud2b8\uc6cc\ud06c-\ubaa8\ub4dc",children:"\ub124\ud2b8\uc6cc\ud06c \ubaa8\ub4dc"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\ubaa8\ub4dc"}),(0,i.jsx)(e.th,{children:"\ub0b4\uc6a9"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"default"}),(0,i.jsx)(e.td,{children:"\ub124\ud2b8\uc6cc\ud06c \ubaa8\ub4dc \uae30\ubcf8\uac12\uc73c\ub85c bridge\uc640 \uac19\uc74c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"awsvpc"}),(0,i.jsx)(e.td,{children:"AWS\uc5d0\uc11c\ub9cc \uc81c\uacf5\ub418\ub294 \ub124\ud2b8\uc6cc\ud06c \ubaa8\ub4dc (ENI\uac00 Task \uc790\uccb4 VPC\uc758 IP \uc8fc\uc18c\ud560\ub2f9)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"bridge"}),(0,i.jsx)(e.td,{children:"DockerContainer\ub97c \ud638\uc2a4\ud2b8\uc640 \uac19\uc740 \ub124\ud2b8\uc6cc\ud06c\uc5d0 \ubc30\uce58\ud574 \ub77c\uc6b0\ud305 \uc5c6\uc774 \ucee8\ud14c\uc774\ub108 \uc811\uadfc \uac00\ub2a5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"host"}),(0,i.jsx)(e.td,{children:"Task\uac00 \ubc30\uce58\ub418\ub294 \ud638\uc2a4\ud2b8\uc758 \ub124\ud2b8\uc6cc\ud06c\ub97c \uacf5\uc720\ud558\ub294 \ubaa8\ub4dc (Fargate \uc0ac\uc6a9 \ubd88\uac00)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"none"}),(0,i.jsx)(e.td,{children:"Task\uc5d0 \uc18d\ud55c \ucee8\ud14c\uc774\ub108\uc758 \uc678\ubd80 \uc811\uadfc\uc774 \ubd88\uac00\ub2a5\ud558\uace0 \ud3ec\ud2b8 \ub9e4\ud551 \uc0ac\uc6a9\ubd88\uac00"})]})]})]}),"\n",(0,i.jsx)(e.h1,{id:"\ubcfc\ub968-\uc0dd\uc131",children:"\ubcfc\ub968 \uc0dd\uc131"}),"\n",(0,i.jsxs)(e.p,{children:["-v \ub610\ub294 --volume \uc73c\ub85c Host \uc758 \ud3f4\ub354\ub97c Mount \ud558\ub294 \uae30\ub2a5\uc774 \uaf2d \ud544\uc694\ud55c\ub370, \uc124\uc815 \ucc3d\uc5d0\uc120 \ucc3e\uae30\uac00 \ub108\ubb34 \ud798\ub4e4\uc5c8\ub2e4.\nECS \uc5d0\uc11c\ub294 ",(0,i.jsx)(e.strong,{children:"\uc791\uc5c5 \uc815\uc758 \uc0dd\uc131"})," \uc2dc\uc5d0 \ud558\ub2e8\uc5d0 ",(0,i.jsx)(e.strong,{children:"\ubcfc\ub968 \ucd94\uac00"})," \ub97c \uaf2d \uba3c\uc800 \ud074\ub9ad\ud574 \ubcfc\ub968\ubd80\ud130 \ucd94\uac00\ud574\uc57c\ud55c\ub2e4."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.img,{src:"https://i.imgur.com/C4iUL0x.png",alt:"image from hexo"}),"\n\uc774\ub984\uc5d4 --name \uc635\uc158 \uc0ac\uc6a9\ud558\ub4ef\uc774 \ub2c9\ub124\uc784\uc744 \ub123\uace0\n\uc18c\uc2a4 \uacbd\ub85c\uc5d4 Host directory \uacbd\ub85c\ub97c \ub123\uc790."]}),"\n",(0,i.jsxs)(e.p,{children:["\ucd94\uac00\uac00 \ub418\uba74 ",(0,i.jsx)(e.strong,{children:"\ucee8\ud14c\uc774\ub108 \ucd94\uac00"})," \uc2dc\uc5d0 ",(0,i.jsx)(e.strong,{children:"\ud0d1\uc7ac \uc9c0\uc810"})," \uba54\ub274\uc758 ",(0,i.jsx)(e.strong,{children:"\uc18c\uc2a4 \ubcfc\ub968"})," select box \uc5d0\uc11c \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://i.imgur.com/BJrFNCX.png",alt:"image from hexo"})}),"\n",(0,i.jsxs)(e.p,{children:["\uc774 \uc9d3\uc744 \ud558\ub294 \uac83\ubcf4\ub2e8 ",(0,i.jsx)(e.a,{href:"https://docs.aws.amazon.com/ko_kr/AmazonECS/latest/developerguide/task_definition_parameters.html",children:"\uacf5\uc2dd \ubb38\uc11c"}),"\uc758 Task Definition JSON Parameter \ub97c \ubcf4\uace0 JSON \uc73c\ub85c \ub54c\ub824\ubc15\ub294\uac8c \ud3b8\ud558\ub2e4."]}),"\n",(0,i.jsx)(e.p,{children:"\uc608\uc2dc JSON \uc740 \uc544\ub798\uc640 \uac19\ub2e4.\n(3306 \uacfc 3307 \uc744 \uc5f4\uace0 Host \uc758 Data \ud3f4\ub354\ub97c Mount \ud558\ub294 \uae30\ubcf8 \uad6c\uc131\uc758 MariaDB Image)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",metastring:'title="mariadb"',children:'{\n  "requiresAttributes": [\n    {\n      "value": null,\n      "name": "com.amazonaws.ecs.capability.docker-remote-api.1.21",\n      "targetId": null,\n      "targetType": null\n    }\n  ],\n  "taskDefinitionArn": "your task definition arn",\n  "networkMode": "bridge",\n  "status": "ACTIVE",\n  "revision": 3,\n  "taskRoleArn": null,\n  "containerDefinitions": [\n    {\n      "volumesFrom": [],\n      "memory": null,\n      "extraHosts": null,\n      "dnsServers": null,\n      "disableNetworking": null,\n      "dnsSearchDomains": null,\n      "portMappings": [\n        {\n          "hostPort": 3306,\n          "containerPort": 3306,\n          "protocol": "tcp"\n        },\n        {\n          "hostPort": 3307,\n          "containerPort": 3307,\n          "protocol": "tcp"\n        }\n      ],\n      "hostname": null,\n      "essential": true,\n      "entryPoint": null,\n      "mountPoints": [\n        {\n          "containerPath": "/var/lib/mysql",\n          "sourceVolume": "dbdata",\n          "readOnly": null\n        }\n      ],\n      "name": "maria",\n      "ulimits": null,\n      "dockerSecurityOptions": null,\n      "environment": [\n        {\n          "name": "MYSQL_DATABASE",\n          "value": "db"\n        },\n        {\n          "name": "MYSQL_PASSWORD",\n          "value": "db_pw"\n        },\n        {\n          "name": "MYSQL_ROOT_PASSWORD",\n          "value": "root_pw"\n        },\n        {\n          "name": "MYSQL_USER",\n          "value": "db_user"\n        }\n      ],\n      "links": null,\n      "workingDirectory": null,\n      "readonlyRootFilesystem": false,\n      "image": "mariadb:latest",\n      "command": [\n        "mysqld",\n        "--character-set-server=utf8",\n        "--collation-server=utf8_general_ci"\n      ],\n      "user": null,\n      "dockerLabels": null,\n      "logConfiguration": null,\n      "cpu": 0,\n      "privileged": null,\n      "memoryReservation": 500\n    }\n  ],\n  "placementConstraints": [],\n  "volumes": [\n    {\n      "host": {\n        "sourcePath": "/ecs/dbdata"\n      },\n      "name": "dbdata"\n    }\n  ],\n  "family": "mariadb"\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\uace0\ubbfc",children:"\uace0\ubbfc"}),"\n",(0,i.jsx)(e.p,{children:"Container \ub97c Task \ubcc4\ub85c \uc0dd\uc131\ud574\uc57c\ud558\ub294\ub370, \uadf8\ub7fc Task JSON \uc5d0\uc11c link \uc635\uc158\uc744 \uc5f0\uacb0\ud560 \uc218\uac00 \uc5c6\ub2e4. \uc774 \uacbd\uc6b0\uc5d4 \uc5b4\ub5bb\uac8c Task Definition \uc744 \uc9dc\uc57c\ub418\ub098?\nEC2 \uc5d0 \uc811\uadfc\ud574\uc11c \ub9e4\ubc88 link \ub97c \uc0dd\uc131\ud574\uc11c \ub2e4\uc2dc \uc62c\ub824\uc57c\ub418\ub098?"}),"\n",(0,i.jsxs)(e.p,{children:["\uc774 \ubd80\ubd84\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud574\uc120 ",(0,i.jsx)(e.a,{href:"https://github.com/awslabs/ecs-task-kite",children:"ecs-task-kite"}),"\ub97c \uc0ac\uc6a9\ud558\uac70\ub098 VPC \ub97c \uad6c\uc131\ud574 \uc218\ub3d9\uc73c\ub85c \uc5f0\uacb0\ud574 \uc8fc\ub294 \ubc29\ubc95 \ubc16\uc5d0 \uc5c6\ub2e4."]}),"\n",(0,i.jsxs)(e.p,{children:["\uc26c\uc6b4 \ubc29\ubc95\uc73c\ub85c \uac00\uc790\uba74 DB \ub294 (\ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \ud558\ub098\uc758 \ub370\uc774\ud130\ub97c \ubc14\ub77c\ubd10\uc57c\ud558\ub294) ",(0,i.jsx)(e.code,{children:"RDS"}),"\ub098 ",(0,i.jsx)(e.code,{children:"ElastiCache"}),"\ucc98\ub7fc AWS \uc758 \uc11c\ube44\uc2a4 \uc0ac\uc6a9\ud558\uace0 VPC \ub97c \uad6c\uc131\ud574 Backend, Frontend \ub2e8\uc758 \uc11c\ubc84\ub9cc ECS Task \ub97c \ub9cc\ub4e4\uc5b4\uc11c \uac00\ubcc0\uc801\uc73c\ub85c \ub3cc\ub9ac\ub294 \uac8c \uc88b\uc544\ubcf4\uc778\ub2e4."]}),"\n",(0,i.jsx)(e.p,{children:"\ubb3c\ub860 \ub3d9\uae30\ud654\ub97c \ud560 \uc218\ub3c4 \uc788\ub294\ub370... \uc0bd\uc9c8\ud560 \uc2dc\uac04\uc5d0 \ub354 \uc798 \ub098\uc628 \ud3ec\uc2a4\ud305\uc744 \uae30\ub2e4\ub824\ubcf8\ub2e4."}),"\n",(0,i.jsx)(e.h1,{id:"\uc5ec\ub2f4",children:"\uc5ec\ub2f4"}),"\n",(0,i.jsx)(e.p,{children:"\uadf8\ub0e5 \ubaa8\ub2c8\ud130\ub9c1 \ucee8\ud14c\uc774\ub108 \ud558\ub098 \ub354 \ub744\uc6b0\uace0, HAProxy \ucee8\ud14c\uc774\ub108 \uc62c\ub9ac\uace0 EC2 \uc5d0 \ub2e4 \ub54c\ub824\ubc15\uace0 \uc2f6\ub2e4."}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://aws.amazon.com/ko/blogs/korea/week-in-review-28-08-17/",children:"AWS Korea week in review"}),"\uc5d0 \uc18c\uac1c\ub418\uc5c8\ub2e4."]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},67953:(n,e,t)=>{t.d(e,{Z:()=>a,a:()=>l});var i=t(50959);const r={},s=i.createContext(r);function l(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);