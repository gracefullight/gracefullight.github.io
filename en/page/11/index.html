<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Blog | gracefullight.dev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://gracefullight.dev/en/page/11/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ko"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="gcY9SiftHgQoJjBZ7IgwNNN5_atLPAX6kWb1nFVfa6E"><meta data-rh="true" name="msvalidate.01" content="65AD1E28C0D057CEB3C68FBC0293E55B"><meta data-rh="true" name="naver-site-verification" content="d024c2837887f72dc7b3792b958be74d69ba9593"><meta data-rh="true" name="yandex-verification" content="6672f93d837354fb"><meta data-rh="true" name="baidu-site-verification" content="yZEdU1ABcR"><meta data-rh="true" name="facebook-domain-verification" content="uelupjqqsm5egzlhy1aev2rfxow5yt"><meta data-rh="true" property="og:title" content="Blog | gracefullight.dev"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gracefullight.dev/en/page/11/"><link data-rh="true" rel="alternate" href="https://gracefullight.dev/page/11/" hreflang="ko"><link data-rh="true" rel="alternate" href="https://gracefullight.dev/en/page/11/" hreflang="en"><link data-rh="true" rel="alternate" href="https://gracefullight.dev/page/11/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RFS69RSYOJ-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://gracefullight.dev/en/page/11","mainEntityOfPage":"https://gracefullight.dev/en/page/11","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/02/16/NodeJS에서-커맨드-파싱하기","mainEntityOfPage":"https://gracefullight.dev/en/2020/02/16/NodeJS에서-커맨드-파싱하기","url":"https://gracefullight.dev/en/2020/02/16/NodeJS에서-커맨드-파싱하기","headline":"NodeJS에서 커맨드 파싱하기","name":"NodeJS에서 커맨드 파싱하기","description":"zeit/arg 패키지를 이용하면 된다.","datePublished":"2020-02-16T20:10:12.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/02/02/Workbox5-breaking-changes","mainEntityOfPage":"https://gracefullight.dev/en/2020/02/02/Workbox5-breaking-changes","url":"https://gracefullight.dev/en/2020/02/02/Workbox5-breaking-changes","headline":"Workbox5 버전의 주요 변경사항","name":"Workbox5 버전의 주요 변경사항","description":"잘 돌던 workbox-cli 가 5버전 릴리즈 후부터 돌지 않아서 확인해보았다.","datePublished":"2020-02-02T16:47:22.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/01/27/Pythonic-handling","mainEntityOfPage":"https://gracefullight.dev/en/2020/01/27/Pythonic-handling","url":"https://gracefullight.dev/en/2020/01/27/Pythonic-handling","headline":"Pythonic - 핸들링","name":"Pythonic - 핸들링","description":"파일","datePublished":"2020-01-27T18:38:10.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/01/24/k8s-linux-kernel-tuning","mainEntityOfPage":"https://gracefullight.dev/en/2020/01/24/k8s-linux-kernel-tuning","url":"https://gracefullight.dev/en/2020/01/24/k8s-linux-kernel-tuning","headline":"쿠버네티스 리눅스 커널 튜닝하기","name":"쿠버네티스 리눅스 커널 튜닝하기","description":"노드 레벨의 sysctl과 네임스페이스 sysctl과 같은 커널 파라미터를 sysctl 인터페이스로 변경할 수 있다.","datePublished":"2020-01-24T23:43:55.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/01/16/Serviceworker-cache-POST-requests","mainEntityOfPage":"https://gracefullight.dev/en/2020/01/16/Serviceworker-cache-POST-requests","url":"https://gracefullight.dev/en/2020/01/16/Serviceworker-cache-POST-requests","headline":"서비스워커로 POST Request 캐싱하기","name":"서비스워커로 POST Request 캐싱하기","description":"서비스워커로 Navigation Request 나 Static Assets 에 대한 리소스 캐시는 쉽다.","datePublished":"2020-01-16T23:58:30.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/01/13/Dockerfile의-모든-것","mainEntityOfPage":"https://gracefullight.dev/en/2020/01/13/Dockerfile의-모든-것","url":"https://gracefullight.dev/en/2020/01/13/Dockerfile의-모든-것","headline":"Dockerfile의 모든 것","name":"Dockerfile의 모든 것","description":"- FROM: 빌드하는 이미지의 기반 이미지 지정","datePublished":"2020-01-13T22:36:44.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2020/01/01/kubernetes-log-architecture","mainEntityOfPage":"https://gracefullight.dev/en/2020/01/01/kubernetes-log-architecture","url":"https://gracefullight.dev/en/2020/01/01/kubernetes-log-architecture","headline":"쿠버네티스 로그 아키텍쳐","name":"쿠버네티스 로그 아키텍쳐","description":"- 어플리케이션 로그는 모두 stdout 으로 출력해야한다.","datePublished":"2020-01-01T15:53:58.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2019/12/29/mac-recommended-packages","mainEntityOfPage":"https://gracefullight.dev/en/2019/12/29/mac-recommended-packages","url":"https://gracefullight.dev/en/2019/12/29/mac-recommended-packages","headline":"맥 추천 패키지","name":"맥 추천 패키지","description":"여러 맥 기기의 환경을 구성하다보니 적어 놓는 게 나을 듯 싶었다.","datePublished":"2019-12-29T13:57:47.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2019/12/27/kubernetes-rolling-update","mainEntityOfPage":"https://gracefullight.dev/en/2019/12/27/kubernetes-rolling-update","url":"https://gracefullight.dev/en/2019/12/27/kubernetes-rolling-update","headline":"쿠버네티스 롤링 업데이트와 배포","name":"쿠버네티스 롤링 업데이트와 배포","description":"Deployment 의 파드 교체 전략에는 RollingUpdate 와 Recreate 가 있다.","datePublished":"2019-12-27T20:43:20.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]},{"@type":"BlogPosting","@id":"https://gracefullight.dev/en/2019/12/15/Pythonic-the-basics","mainEntityOfPage":"https://gracefullight.dev/en/2019/12/15/Pythonic-the-basics","url":"https://gracefullight.dev/en/2019/12/15/Pythonic-the-basics","headline":"Pythonic - 기본기","name":"Pythonic - 기본기","description":"Types","datePublished":"2019-12-15T16:52:01.000Z","author":{"@type":"Person","name":"Gracefullight","description":"Owner","url":"https://github.com/gracefullight","image":"https://avatars.githubusercontent.com/u/11773683?v=4"},"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/en/rss.xml" title="gracefullight.dev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/atom.xml" title="gracefullight.dev Atom Feed">
<link rel="alternate" type="application/json" href="/en/feed.json" title="gracefullight.dev JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E99DNE7S05"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E99DNE7S05",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="gracefullight.dev" href="/en/opensearch.xml">
<link rel="icon" href="/en/img/favicon-32x32.png">
<link rel="manifest" href="/en/manifest.json">
<meta name="theme-color" content="#f28913">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f28913">
<link rel="apple-touch-icon" href="/en/img/apple-touch-icon.png">
<link rel="preconnect" href="https://pagead2.googlesyndication.com">
<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3004788392777865" async crossorigin="anonymous"></script>
<link rel="preconnect" href="https://www.clarity.ms">
<script>!function(t,e,n,a,c,i,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(i=e.createElement(a)).async=1,i.src="https://www.clarity.ms/tag/aongv9xgi6",(r=e.getElementsByTagName(a)[0]).parentNode.insertBefore(i,r)}(window,document,"clarity","script")</script>
<link rel="preconnect" href="https://wcs.naver.net">
<script src="https://wcs.naver.net/wcslog.js" async></script>
<script>if(!wcs_add)var wcs_add={};wcs_add.wa="156bc73a81e3bd0",window.wcs&&wcs_do()</script>
<link rel="preconnect" href="https://cdn.channel.io">
<script>!function(){var n=window;if(n.ChannelIO)return(window.console.error||window.console.log||function(){})("ChannelIO script included twice.");var e=function(){e.c(arguments)};function t(){if(!n.ChannelIOInitialized){n.ChannelIOInitialized=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.channel.io/plugin/ch-plugin-web.js",e.charset="UTF-8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}e.q=[],e.c=function(n){e.q.push(n)},n.ChannelIO=e,"complete"===document.readyState?t():window.attachEvent?window.attachEvent("onload",t):(window.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1))}(),ChannelIO("boot",{pluginKey:"0fd130ba-a1a6-4b7e-802a-e82a885a7fd8"})</script>
<link rel="preconnect" href="https://static.cloudflareinsights.com">
<script src="https://static.cloudflareinsights.com/beacon.min.js" defer="defer" data-cf-beacon="{&quot;token&quot;:&quot;c0899829e72b45e98dff77241127252c&quot;}"></script>

<link rel="preconnect" href="https://cdn.jsdelivr.net">
<script type="application/ld+json">{"@context":"http://schema.org","@type":"Person","name":"Eunkwang Shin","url":"https://gracefullight.dev","logo":"https://gracefullight.dev/img/apple-touch-icon.png","image":"https://avatars.githubusercontent.com/u/11773683?v=4","email":"mailto:gracefullight.dev@gmail.com","jobTitle":"FullStack JavaScript Developer","nationality":"Korean","sameAs":["https://github.com/gracefullight","https://linkedin.com/in/gracefullight"]}</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/styles.a88f507a.css">
<script src="/en/assets/js/runtime~main.5e15f6a0.js" defer="defer"></script>
<script src="/en/assets/js/main.5c855cf8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_hUl_" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/favicon-32x32.png" alt="gracefullight.dev blog logo" class="themedComponent_FdSP themedComponent--light_FbV_"><img src="/en/img/favicon-32x32.png" alt="gracefullight.dev blog logo" class="themedComponent_FdSP themedComponent--dark_tGWX"></div><b class="navbar__title text--truncate">gracefullight.dev</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_FFYU"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/page/11/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/en/page/11/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a class="navbar__item navbar__link" href="/en/archive/">Archives</a><a class="navbar__item navbar__link" href="/en/tags/">Tags</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ttoC"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.linkedin.com/in/gracefullight" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ttoC"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_shOB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_g6Mz"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_EDaM thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_yADa margin-bottom--md">Recent posts</div><ul class="sidebarItemList_xdgl clean-list"><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/2024/05/22/all-about-software-engineering/">소프트웨어 공학의 모든 것</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/algorithm/requirements-the-trustworthiness-for-ai/">인공지능 시스템 신뢰성 제고를 위한 요구사항</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/security/access-control/">접근제어</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/engineering/mas/">MAS, 상용SW 다수 공급자 계약 제도</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/2024/05/11/professional-engineer-guidelines/">정보통신분야 기술사 출제기준</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/security/owasp-llm/">OWASP TOP 10 for LLM Applications</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/management/rte/">RTE, 실시간 기업</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/engineering/iso-25000/">ISO 25000</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/algorithm/autogpt/">AutoGPT</a></li><li class="sidebarItem_uifI"><a class="sidebarItemLink_Unjo" href="/en/pe/algorithm/rag/">RAG, 검색 증강 생성</a></li></ul></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/02/16/NodeJS에서-커맨드-파싱하기/">NodeJS에서 커맨드 파싱하기</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-02-16T20:10:12.000Z">February 16, 2020</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><p><a href="https://github.com/zeit/arg" target="_blank" rel="noopener noreferrer">zeit/arg</a> 패키지를 이용하면 된다.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="사용법">사용법<a href="#사용법" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>arg 함수 하나로 파싱이 가능하다.</p>
<div class="language-js codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-js codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> arg </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;arg&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// `options` is an optional parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">arg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">options </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token literal-property property">permissive</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token literal-property property">argv</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">argv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">slice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>세부적인 사용방법은 다음과 같다.</p>
<ol>
<li>타입을 정하고</li>
<li>옵션과 축약 옵션을 정하고</li>
<li>검증을 넣는다.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="소스">소스<a href="#소스" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-js codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-js codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">// 계정정보를 받는 스크립트라면</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">help</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token template-string string" style="color:rgb(206, 145, 120)">usage =&gt; ...</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">let</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  args </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">arg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;--help&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Boolean</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;--user&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;--password&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;--verbose&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> arg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token constant" style="color:rgb(100, 102, 149)">COUNT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;--test&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Boolean</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;-h&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--help&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;-u&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--user&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;-p&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--password&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-property property">&quot;-v&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--verbose&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;ARG_UNKNOWN_OPTION&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">help</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">exit</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">!</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--user&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--password&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token function" style="color:rgb(220, 220, 170)">help</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">exit</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;--test&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">===</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token constant" style="color:rgb(100, 102, 149)">TEST</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/nodejs/">nodejs</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/javascript/">javascript</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/bash/">bash</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/02/02/Workbox5-breaking-changes/">Workbox5 버전의 주요 변경사항</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-02-02T16:47:22.000Z">February 2, 2020</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><p>잘 돌던 <code>workbox-cli</code> 가 5버전 릴리즈 후부터 돌지 않아서 확인해보았다.
전체 문서는 <a href="https://developers.google.com/web/tools/workbox/guides/migrations/migrate-from-v4" target="_blank" rel="noopener noreferrer">여기</a>서 확인 가능하다.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="injectmanifest">injectManifest<a href="#injectmanifest" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><code>self.__WB_MANIFEST</code> 를 주입받는 방식으로 변경되었다.</p>
<div class="language-js codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-js codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">// v4:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">precacheAndRoute</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// v5:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">precacheAndRoute</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">__WB_MANIFEST</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="navigationroute">NavigationRoute<a href="#navigationroute" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>blacklist, whitelist 에서 denylist, allowlist 로 키 명이 변경되었다.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="broadcastchannel">BroadcastChannel<a href="#broadcastchannel" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>broadcast-update 가 자체 API 에서 <code>postMessage()</code>로 변경되었다.
이벤트 리스너가 많아져 복잡해지고, 기존 API에서는 메세징의 버퍼 기능이 없었기 때문이다.</p>
<div class="language-js codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-js codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">// v4:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> updatesChannel </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BroadcastChannel</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;api-updates&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">updatesChannel</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">addEventListener</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;message&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> cacheName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> updatedUrl </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ... your code here ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// v5:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// This listener should be added as early as possible in your page&#x27;s lifespan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// to ensure that messages are properly buffered.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token dom variable" style="color:rgb(156, 220, 254)">navigator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">serviceWorker</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">addEventListener</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;message&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// Optional: ensure the message came from workbox-broadcast-update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">meta</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;workbox-broadcast-update&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> cacheName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> updatedUrl </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ... your code here ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/javascript/">javascript</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/pwa/">pwa</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/serviceworker/">serviceworker</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/workbox/">workbox</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/01/27/Pythonic-handling/">Pythonic - 핸들링</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-01-27T18:38:10.000Z">January 27, 2020</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_UHBS" id="파일">파일<a href="#파일" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>File pointer 여는 법은 <code>f.open(‘test.txt’, ‘w’)</code></li>
<li>이 경우 f.write 후에 f.close 해줘야한다.</li>
<li><code>with</code> 사용시 close 를 생각하지 않아도 된다.</li>
<li><code>with</code> 구문에서 선언된 변수는 바깥에서 사용가능</li>
<li><code>f.seek(5)</code> 처럼 위치로 이동 가능하다.</li>
<li><code>string.Template</code> 과 함께 뷰 파일에서 사용할 수 있다.</li>
</ul>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># 예시 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.txt&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;w&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Test&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 예시 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.txt&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;r&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># print(f.read())</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">while</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        chunk </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        line </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">chunk</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">line</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">not</span><span class="token plain"> line</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        reak</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 예시 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># w+ 로 열면 파일이 초기화 됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.txt&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;w+&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 쓰기 후에 읽기위해 0번째로 이동</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">seek</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 예시 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;view/mail.tpl&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;r&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    t </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># $name, $contents</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">contents </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">substitute</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;gracefullight&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> contents</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Thanks&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">contents</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="파일-확인">파일 확인<a href="#파일-확인" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><code>os.path.exsists</code></li>
<li><code>os.path.isfile</code></li>
<li><code>os.path.isdir</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="파일-제어">파일 제어<a href="#파일-제어" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><code>os.rename</code></li>
<li><code>os.symlink</code>: 심볼릭</li>
<li><code>shutil.copy</code>: 복사</li>
<li><code>pathlib.Path(&#x27;TouchFilePath&#x27;).touch()</code>: 터치 파일</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="폴더-제어">폴더 제어<a href="#폴더-제어" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><code>os.mkdir</code></li>
<li><code>os.rmdir</code>: 빈 디렉토리만 가능</li>
<li><code>shutil.retree</code>: recursive</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="csv">CSV<a href="#csv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><code>csv.DictWriter</code></li>
<li><code>csv.DictReader</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="임시파일">임시파일<a href="#임시파일" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> tempfile</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 삭제 됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> tempfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">TemporaryFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;w+&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 삭제 안 됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> tempfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">NamedTemporaryFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">delete</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># print(t.name)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;w+&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 삭제되는 디렉토리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> tempfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">TemporaryDirectory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> td</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">td</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 삭제 안 되는 디렉토리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">temp_dir </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> tempfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">mkdtemp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="압축">압축<a href="#압축" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="tar">tar<a href="#tar" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> tarfile</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> tarfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.tar.gz&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;w:gz&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> tr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    tr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;dir&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> tarfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token builtin" style="color:rgb(86, 156, 214)">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.tar.gz&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;r:gz&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> tr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    tr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">extractall</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;dir&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> tr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">extractfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;tarball&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="zip">zip<a href="#zip" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> zipfile</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> zipfile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ZipFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.zip&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;w&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 하나의 폴더만 가능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;dir&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 하위 전체 압축</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> f </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> glob</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">glob</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;dir/**&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> recursive</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="ini">ini<a href="#ini" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><code>configparser.ConfigParser()</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="yaml">yaml<a href="#yaml" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><code>pip install pyyaml</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="로깅">로깅<a href="#로깅" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>logging.critical</li>
<li>error</li>
<li>warning</li>
<li>info</li>
<li>debug</li>
</ul>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> logging</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># basicConfig 에 format 을 정의 가능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># doc 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">basicConfig</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">filename</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test.log&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> level</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">INFO</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;info %s %s&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test2&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># === logging.info(&#x27;info {}&#x27;.format(&#x27;test&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 해당 파일에서 로그명 재정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">logger </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">getLogger</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 로그 레벨 재정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">logger</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 전체 설정 변경</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">fileConfig</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">dictConfig</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="로깅-핸들러">로깅 핸들러<a href="#로깅-핸들러" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>여러 핸들러를 쉽게 붙힐 수 있다. <a href="https://docs.python.org/ko/3/library/logging.handlers.html" target="_blank" rel="noopener noreferrer">문서</a></p>
<ul>
<li><code>handler = logging.FileHandler(...)</code></li>
<li><code>logger.addHandler(handler)</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="로깅-필터">로깅 필터<a href="#로깅-필터" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>로그의 출력을 필터를 사용해 쉽게 가공 가능하다. <a href="https://docs.python.org/ko/3/howto/logging-cookbook.html" target="_blank" rel="noopener noreferrer">문서</a></p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="메일">메일<a href="#메일" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li><code>smtplib.SMTP</code> 와 <code>from email import message</code> 패키지로 가능하다.</li>
<li>파일 첨부는 email.mime 의 multipart와 text 패키지로 가능하다.<!-- -->
<ul>
<li>파일 추가 시에는 헤더를 <code>Content-Disposition: attachment</code>로 줘야한다.</li>
</ul>
</li>
<li><code>logger.handelrs.SMTPHandler</code> 로 메일로 로그를 받을 수 있다.</li>
</ul>
<h1>쉘</h1>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="서브프로세스">서브프로세스<a href="#서브프로세스" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> subprocess</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">subprocess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;ls&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;-al&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="커맨드-체이닝">커맨드 체이닝<a href="#커맨드-체이닝" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>여러 커맨드를 한 번에 실행시킬 경우 인젝션 방어를 위해 다음과 같이 처리하는 것이 좋다.</p>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">process1 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Popen</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;ls&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;-al&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> stdout</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">subprocess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">PIPE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">process2 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Popen</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;grep&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> stdin</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">p1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">stdout</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> stdout</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">subprocess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">PIPE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">process1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">stdout</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">close</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">output </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> process2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">communicate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="커맨드-파싱">커맨드 파싱<a href="#커맨드-파싱" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><a href="https://docs.python.org/ko/3/library/argparse.html" target="_blank" rel="noopener noreferrer">argparse</a>를 사용하자.</p>
<h1>날짜</h1>
<blockquote>
<p>파이썬에는 날짜를 timestamp 로 변환해 출력하는 기능은 없다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="초기화">초기화<a href="#초기화" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">now </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">isoformat</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">strftime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;%Y-%m-%d %H:%M:%S.%f&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 날짜만</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">today </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">today</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">today</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 2020-02-02</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">today</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">isoformat</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 2020-02-02</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">today</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">strftime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;%Y-%m-%d&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 시간만</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">t </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">hour</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> minute</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> second</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> microsecond</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 01:10:05.000100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">isoformat</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 01:10:05.000100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">strftime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 01:10:05</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># timestamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 1580617313.843047</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="연산">연산<a href="#연산" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-py codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-py codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">now </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">d </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">timedelta</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">weeks</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">now </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/python/">python</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/01/24/k8s-linux-kernel-tuning/">쿠버네티스 리눅스 커널 튜닝하기</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-01-24T23:43:55.000Z">January 24, 2020</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><p>노드 레벨의 sysctl과 네임스페이스 sysctl과 같은 커널 파라미터를 sysctl 인터페이스로 변경할 수 있다.
변경 가능한 파라미터는 다음과 같다.</p>
<ul>
<li><strong>abi</strong>: 실행 도메인 특성</li>
<li><strong>fs</strong>: 특정 파일 시스템, 파일 핸들링, inode, dentry, 쿼터 조정</li>
<li><strong>kernel</strong>: 전역 커널 설정 변경</li>
<li><strong>net</strong>: 네트워킹</li>
<li><strong>sunrpc</strong>: SUN rpc 호출</li>
<li><strong>vm</strong>: 메모리 조정, 버퍼 및 캐시 관리</li>
<li><strong>user</strong>: 사용자별 네임스페이스 제한</li>
</ul>
<p><code>taint, toleration</code> 을 같이 사용해 사이드이펙을 방지하라고 권하고 있다.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="arp-캐시">ARP 캐시<a href="#arp-캐시" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<blockquote>
<p>neighbour: arp_cache: neighbor table overflow!</p>
</blockquote>
<p>쿠버네티스가 대량의 IP를 소비하면서 ARP 캐시 공간을 모두 사용할 경우 ARP 캐시 관련 변수 조절이 가능하다.
대규모 HPC 클러스터에서는 흔한 일이며 쿠버네티스의 주소 소진을 방지할 수 있다.
이 오류는 <code>nodes with 40+ cores</code> &amp;&amp; <code>more than 16 segments in each node</code> 정도에서 발생하는 듯 하다.</p>
<ul>
<li><strong>net.ipv4.neigh.default.gc_thresh1</strong>: gc_thresh1 represents the minimum number of entries that may be in the ARP cache. Garbage collection will not be triggered if the number of entries is below this setting.</li>
<li><strong>net.ipv4.neigh.default.gc_thresh2</strong>: gc_thresh2 represents the soft maximum number of entries that may be in the ARP cache. This setting is arguably the most important, as ARP garbage collection will be triggered ~5s after reaching this soft maximum.</li>
<li><strong>net.ipv4.neigh.default.gc_thresh3</strong>: gc_thresh3 represents the hard maximum number of entries in the ARP cache.</li>
</ul>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">net.ipv4.neigh.default.gc_thresh1 = 80000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">net.ipv4.neigh.default.gc_thresh2 = 90000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">net.ipv4.neigh.default.gc_thresh3 = 100000</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>예시</h1>
<div class="language-yaml codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-yaml codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> sysctl</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">sysctls</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kernel.shm_rmid_forced</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> net.core.somaxconn</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;10000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kernel.msgmax</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;65536&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> fs.file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">max</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;2097152&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> net.ipv4.ip_local_port_range</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1024 65536&quot;</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>여담</h1>
<ul>
<li>파면 팔수록 리눅스부터 다시 정리해야되겠다는 느낌이 든다.</li>
</ul>
<h1>참조</h1>
<ul>
<li><a href="https://kubernetes.io/docs/tasks/administer-cluster/sysctl-cluster/" target="_blank" rel="noopener noreferrer">Using sysctls in a Kubernetes Cluster</a></li>
<li><a href="https://meetup.toast.com/posts/54" target="_blank" rel="noopener noreferrer">리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 2편</a></li>
<li><a href="https://success.docker.com/article/how-to-increase-the-arp-cache-collection-threshold" target="_blank" rel="noopener noreferrer">How to increase the ARP cache garbage collection threshold</a></li>
<li><a href="https://openai.com/blog/scaling-kubernetes-to-2500-nodes/" target="_blank" rel="noopener noreferrer">Scaling Kubernetes to 2,500 nodes</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/k-8-s/">k8s</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/docker/">docker</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/linux/">linux</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/01/16/Serviceworker-cache-POST-requests/">서비스워커로 POST Request 캐싱하기</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-01-16T23:58:30.000Z">January 16, 2020</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><p>서비스워커로 Navigation Request 나 Static Assets 에 대한 리소스 캐시는 쉽다.
(<a href="/en/2017/12/22/PWA-ServiceWorker-Web-Caching/">이전 포스팅</a> 참조)</p>
<p>하지만 <code>POST Request</code> 에 대한 레퍼런스는 찾기 힘들어 결국 만들어버렸다.
복잡한 로직이지만 Request Body 를 SHA1로 해싱해 키로 IndexedDB 에 저장하고 그 키가 맞으면 꺼내주는 방식이다.</p>
<h1>소스</h1>
<div class="language-js codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-js codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">// IndexedDB 는 Promisify 되어있지 않아서 라이브러리가 필요하다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">importScripts</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;https://cdn.jsdelivr.net/npm/localforage@1.7.3/dist/localforage.min.js&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// 캐시하고 싶은 POST 엔드포인트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ENDPOINT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;https://your-domain/post-request&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">bin2Hex</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">let</span><span class="token plain"> digest </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> dataView </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">DataView</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">let</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> len </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> dataView</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">byteLength</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> len</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> dataView</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getUint32</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// hex 로 바꾸면 패딩비트 0 이 제거된다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> hex </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">toString</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">16</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// uint32 는 4bytes 로 나온다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> padding </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;00000000&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// 패딩을 더해서 뒤에서 잘라준다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> paddedValue </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">padding </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> hex</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">slice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">padding</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    digest </span><span class="token operator" style="color:rgb(212, 212, 212)">+=</span><span class="token plain"> paddedValue</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">postRequestFetchListener</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> requestUrl </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">method</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">toUpperCase</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// 맞는 엔드포인트인지 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">!</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method </span><span class="token operator" style="color:rgb(212, 212, 212)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;POST&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> requestUrl </span><span class="token operator" style="color:rgb(212, 212, 212)">===</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">ENDPOINT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">respondWith</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">clone</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">arrayBuffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> requestBody </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">fromCharCode</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">apply</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword null nil" style="color:rgb(86, 156, 214)">null</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Uint8Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// request body 에 원하는 조건만 캐시처리할 수 있게 한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">requestBody</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">includes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;cache=1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)">// 속도면에서 다른 해싱 알고리즘을 사용해도 무방하다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">subtle</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">digest</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SHA-1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">sha1Buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> sha1Hash </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">bin2Hex</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">sha1Buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SHA1 Hash =&gt; &quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> sha1Hash</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// IndexedDB 에서 캐시된 키를 찾는다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> localforage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">getItem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">sha1Hash</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">cachedResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">cachedResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Cached repsonse =&gt; &quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> cachedResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">cachedResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token comment" style="color:rgb(106, 153, 85)">// 여기서 statusCode 를 304 로 내보내고 싶었으나, Body 를 반환할 수 없었다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token literal-property property">status</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">200</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token literal-property property">statusText</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;OK&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token literal-property property">headers</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token string-property property">&quot;Content-Length&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> cachedResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;application/json&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token comment" style="color:rgb(106, 153, 85)">// 그래서 커스텀 헤더를 추가했다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token string-property property">&quot;X-SW-Cache-Hit&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token string-property property">&quot;X-SW-Cache-Type&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;POST&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)">// 캐시된 데이터가 없을 경우 새로 요청한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">fetch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Fetching response =&gt; &quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">clone</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token comment" style="color:rgb(106, 153, 85)">// 정상적일 경우만 IndexedDB 에 저장한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">200</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;=</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">400</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token comment" style="color:rgb(106, 153, 85)">// 이 작업은 비동기지만 굳이 기다리지 않아도 된다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              response</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">clone</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">text</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">textResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Caching response =&gt; &quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> textResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> localforage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">setItem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">sha1Hash</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> textResponse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">fetch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">fetchEvent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// 리스너를 등록해준다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">addEventListener</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;fetch&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> postRequestFetchListener</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>여담</h1>
<ul>
<li>WorkBox 를 사용할 수 있다면 <a href="https://developers.google.com/web/tools/workbox/modules/workbox-cacheable-response#caching_based_on_headers" target="_blank" rel="noopener noreferrer">CacheableResponse</a>와 CacheFirst 정책으로 단번에 처리 가능할 것이다.</li>
<li>굳이 해시를 키로 사용하지 않아도 된다. RequestBody 의 Serialize 를 키로 써도 된다. (만들면서 crypto 라이브러리를 사용해보고 싶었을 뿐)</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/javascript/">javascript</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/pwa/">pwa</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/serviceworker/">serviceworker</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/01/13/Dockerfile의-모든-것/">Dockerfile의 모든 것</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-01-13T22:36:44.000Z">January 13, 2020</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><ul>
<li><strong>FROM</strong>: 빌드하는 이미지의 기반 이미지 지정</li>
<li><strong>RUN</strong>: 이미지 빌드 시 컨테이너에서 실행할 명령어 정의</li>
<li><strong>COPY</strong>: 호스트에서 컨테이너로 파일 및 디렉토리 복사</li>
<li><strong>ADD</strong>: COPY + 압축 해제 + URL 다운로드<!-- -->
<ul>
<li>운영 체제를 담은 기반 이미지를 만드는 경우처럼 특수한 경우에만 사용하면 된다.</li>
<li>안정성 보장이 되지 않으므로 COPY 를 사용하자.</li>
</ul>
</li>
<li><strong>CMD</strong>: 컨테이너에서 foreground로 실행할 명령어 정의</li>
<li><strong>ENTRYPOINT</strong>: 컨테이너를 실행 가능 파일로 사용할 때 정의하는 명령<!-- -->
<ul>
<li>CMD 와 ENTRYPOINT 둘 다 사용 가능</li>
</ul>
</li>
<li><strong>ARG</strong>: docker image build를 실행할 때 사용하는 변수</li>
<li><strong>ENV</strong>: 컨테이너 안의 환경변수 정의</li>
<li><strong>EXPOSE</strong>: 컨테이너가 노출하는 포트</li>
<li><strong>VOLUME</strong>: 호스트나 다른 컨테이너에서 마운트할 수 있는 포인트 생성</li>
<li><strong>LABEL</strong>: 이미지에 추가하는 메타데이터</li>
<li><strong>STOPSIGNAL</strong>: 컨테이너에 전달되면 컨테이너를 종료하는 시스템 시그널 설정</li>
<li><strong>HEALTHCHECK</strong>: 컨테이너 안에서 명령을 실행 후 결과를 헬스 체크에 사용</li>
<li><strong>USER</strong>: 컨테이너 실행 시 컨테이너 사용자<!-- -->
<ul>
<li>이미지 빌드시 USER 뒤에 나오는 RUN 인스트럭션도 해당 사용자의 권한으로 실행된다.</li>
</ul>
</li>
<li><strong>WORKDIR</strong>: 컨테이너의 작업 디렉토리</li>
<li><strong>ONBUILD</strong>: 컨테이너 안에서 실행되는 명령 정의, 이미지에서 실행되지 않는다.<!-- -->
<ul>
<li>ONBUILD 를 정의한 이미지를 기반 이미지로 삼아 다른 이미지를 빌드할 때 실행된다.</li>
</ul>
</li>
</ul>
<h1>이미지</h1>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="린팅">린팅<a href="#린팅" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><a href="https://github.com/hadolint/hadolint" target="_blank" rel="noopener noreferrer">hadolint</a> 를 설치해 <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer">Dockerfile best practices</a> 에 기반해 이미지를 생성했는지 검증하자.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="기반-이미지">기반 이미지<a href="#기반-이미지" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>scratch: 아무 것도 없는 이미지<!-- -->
<ul>
<li>https 통신이 필요한 경우 cacert.pem 을 /etc/ssl/certs 에 추가해야한다.</li>
<li>디버깅도 힘들다</li>
</ul>
</li>
<li>busybox: 기본 유틸리티 (echo, ls 등) 이 있는 이미지<!-- -->
<ul>
<li>패키지 관리자가 없다.</li>
<li>디버깅은 좀 낫다.</li>
</ul>
</li>
<li>alpine: busybox 기반으로 4MB 지만 <code>apk</code> 패키지 매니저가 있다.<!-- -->
<ul>
<li><code>glibc</code> 대신 <code>musl</code>을   쓴다.</li>
<li><code>apk add --no-cache package</code></li>
<li><code>apk add --no-cache --virtual=ailas package</code> &amp;&amp; <code>apk del --no-cache ailas</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="멀티스테이지-빌드">멀티스테이지 빌드<a href="#멀티스테이지-빌드" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>golang과 같은 빌드가 필요한 이미지에서는 멀티스테이지 빌드를 이용해 빌드 환경과 프로덕션 환경을 다르게 가져갈 수 있다.</p>
<div class="language-dockerfile codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">FROM golang:1.9 AS build</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">WORKDIR /</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">COPY . /go/src/github.com/...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN go get gokpg.in/gorp.v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN cd /go/src/github.com/... &amp;&amp; go build -o bin/start main.go</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FROM alpine:3.7</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">COPY --from=build /go/src/.../bin/start /usr/local/bin/</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMD [&quot;start&quot;]</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="distroless-이미지">distroless 이미지<a href="#distroless-이미지" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>운영체제 기능은 없이 언어에 중점을 둔 이미지이다.</li>
<li><a href="https://github.com/GoogleContainerTools/distroless" target="_blank" rel="noopener noreferrer">distroless</a> 에서 확인 가능하며 주로 구글이 배포한다.</li>
<li>gcr.io/distroless/base 이미지는 glibc 기반이며 컴파일 애플리케이션을 실행하는 데에 적합하다. (Go)</li>
<li>ca-certificates 및 TLS/SSL 관련 라이브러리 등 최소한의 라이브러리만 있다.</li>
<li>CVE 취약점도 업데이트 된다고 한다.</li>
</ul>
<div class="language-dockerfile codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">FROM node:10.17.0 AS build-env</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ADD . /app</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FROM gcr.io/distroless/nodejs</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">COPY --from=build-env /app /app</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMD [&quot;hello.js&quot;]</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="chucksum-검증">chucksum 검증<a href="#chucksum-검증" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><code>ADD</code> 인스트럭션으로 추가 된 파일은 해시기반 체크섬 검증을 해주는 것이 좋다.</p>
<div class="language-dockerfile codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">ADD library.zip .</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ADD library_SHA256 .</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ADD library_SHA256.sig .</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># Import PGP public key</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN curl https://.../pgp_keys.asc | gpg --import</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 라이브러리 전자 서명 검증</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN gpg --verify library_SHA256.sig library_SHA256</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># Verify checksum</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN cat library_SHA256 | grep linux_amd64 | sha256sum -cs</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN unzip libary.zip</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN mv library /usr/local/bin</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># 실행</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="dockerigonore">dockerigonore<a href="#dockerigonore" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>Dockerfile 빌드 시에 따라 들어가지 않게 된다.</li>
<li>Dockerfile 과 같은 레벨 디렉토리에 있어야한다.</li>
</ul>
<div class="language-ini codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_UzQd">.dockerignore</div><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-ini codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">.git</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.idea</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.vscode</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.github</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">*.log</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="이미지-테스트">이미지 테스트<a href="#이미지-테스트" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>빌드 후의 이미지 내부에 상태가 적절한지 테스트하기 위해 아래 두 가지 yaml 기반의 테스트 툴을 사용할 수 있다.</p>
<ul>
<li><a href="https://github.com/GoogleContainerTools/container-structure-test" target="_blank" rel="noopener noreferrer">container-structure-test</a></li>
<li><a href="https://github.com/aelsabbahy/goss" target="_blank" rel="noopener noreferrer">goss</a></li>
</ul>
<p>이 중 <strong>goss</strong>는 실제 포트 및 서비스가 서빙 중인지 확인이 가능해 더 유용할 것으로 보인다.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="이미지-보안">이미지 보안<a href="#이미지-보안" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="user">user<a href="#user" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>호스트의 리소스를 컨테이너에서 공유하는 Docker는 사용자 UID도 0으로 같이 공유되므로 같은 권한을 갖게 된다.
이 문제를 방지하기 위해 <code>useradd</code> 로 어플리케이션 실행 유저를 만들어 주고 <code>USER</code> 인스트럭션을 사용해 실행을 해줘야한다.</p>
<div class="language-dockerfile codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">FROM golang:1.10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN mkdir /app</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">COPY main.go /app</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RUN useradd gracefullight</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">USER gracefullight</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMD [&quot;go&quot;, &quot;RUN&quot;, &quot;/app/main.go&quot;]</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="secret">secret<a href="#secret" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li><a href="https://www.vaultproject.io/docs/install/" target="_blank" rel="noopener noreferrer">Vault</a></li>
</ul>
<h1>dockerd 튜닝</h1>
<ul>
<li>max-concurrent-downloads: 기본값은 3이며, <code>docker image pull</code> 로 한 번에 다운로드 되는 이미지 스레드 수  를 증가시켜준다.</li>
<li>max-concurrent-uploads: 기본값은 5이며, <code>docker image push</code> 시에 이미지 업로드 스레드 수를 증가시켜준다.</li>
<li>registry-mirrors: Docker hub의 미러 레지스트리를 만들어 트래픽 향상에 이점을 줄 수 있다.</li>
</ul>
<h1>private registry</h1>
<p>빠른 이미지 푸쉬/풀과 소스 때문이라도 private registry 는 필수적이다.
docker 에서 제공하는 registry 이미지를 사용하면 된다.</p>
<p>GUI 기반으로 확인할 수 있는 툴은 아래와 같다.</p>
<ul>
<li><a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener noreferrer">Harbor</a>: 프라이빗 레포지토리를 위한 모든 기능이 다 있다. 쓰자.</li>
<li><a href="https://github.com/SUSE/Portus" target="_blank" rel="noopener noreferrer">Portus</a>: 인증 포함, 하지만 루비라 소스 개선이 힘들듯</li>
<li><a href="https://github.com/Joxit/docker-registry-ui" target="_blank" rel="noopener noreferrer">docker-registry-ui</a>: 20년 최근까지 개선 중</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/k-8-s/">k8s</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/docker/">docker</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/notes/">notes</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2020/01/01/kubernetes-log-architecture/">쿠버네티스 로그 아키텍쳐</a></h2><div class="container__caW margin-vert--md"><time datetime="2020-01-01T15:53:58.000Z">January 1, 2020</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><ul>
<li>어플리케이션 로그는 모두 stdout 으로 출력해야한다.<!-- -->
<ul>
<li>컨테이너로 운영하는 것을 전제로 한다면 파일 출력 자체가 불필요하다.</li>
</ul>
</li>
<li>Nginx 등의 미들웨어에서는 로그가 stdout 으로 출력되도록 이미지를 빌드한다.</li>
<li>stdout 으로 출력되는 로그는 모두 JSON 포맷으로 출력해 각 속성을 검색할 수 있게 한다.</li>
<li>쿠버네티스 환경에서는 <code>fluentd-kubernetes-daemonset</code> 을 포함하는 파드를 <code>DaemonSet</code>을 사용해 각 호스트에 배치한다.</li>
<li>쿠버네티스 리소스에서는 적절히 레이블을 부여해 로그를 검색할 수 있게 한다.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/k-8-s/">k8s</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/docker/">docker</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2019/12/29/mac-recommended-packages/">맥 추천 패키지</a></h2><div class="container__caW margin-vert--md"><time datetime="2019-12-29T13:57:47.000Z">December 29, 2019</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><p>여러 맥 기기의 환경을 구성하다보니 적어 놓는 게 나을 듯 싶었다.</p>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="formulae">formulae<a href="#formulae" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="main-formulae">main formulae<a href="#main-formulae" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew install azure-cli \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  fzf \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  git \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  go \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  kubernetes-cli \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  mas \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  node \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  python \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  stern \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  tree \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  wget</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>azure-cli</li>
<li>fzf</li>
<li>git</li>
<li>go</li>
<li>java</li>
<li>kubernetes-cli</li>
<li>mas</li>
<li>node</li>
<li>python</li>
<li>stern</li>
<li>tree</li>
<li>wget</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="sub-formulae">sub formulae<a href="#sub-formulae" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p><a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener noreferrer">docker for mac</a></p>
</blockquote>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew tap spring-io/tap</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew install git \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  gitui \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  hadolint \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  helm \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  kubectx \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  k9s \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  spring-boot \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  thefuck \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  volta \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  youtube-dl \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  zsh-autosuggestions \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  zsh-syntax-highlighting</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>git</li>
<li>gitui</li>
<li>helm</li>
<li>kubectx</li>
<li>springboot</li>
<li>thefuck</li>
<li>volta</li>
<li>youtube-dl</li>
<li>zsh-autosuggestions</li>
<li>zsh-syntax-highlighting</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="cask">cask<a href="#cask" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew tap homebrew/cask-fonts</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew cask install adguard \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  appcleaner \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  authy \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  bitwarden \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  cheatsheet \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  firefox \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  flutter \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  font-cascadia \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  font-hack-nerd-font \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  fork \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  gather \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  google-chrome \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  hiddenbar \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  iina \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  iterm2 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  java \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  jetbrains-toolbox \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  keepingyouawake \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  keka \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  macs-fan-control \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  monitorcontrol \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  microsoft-edge \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  postman \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  rancher \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  sequel-pro \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  slack \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  telegram-desktop \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  udeler \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  visual-studio-code \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  yt-music \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  zoom \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  zulu</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>adguard: 💰</li>
<li>appcleaner: 앱 클리너</li>
<li>authy: 2차 인증</li>
<li>bitwarden: 비밀번호 관리</li>
<li>cheatsheet: ⌘ 키를 오래 누르면 해당 프로그램의 모든 단축키를 볼 수 있음</li>
<li>devtoys: 개발용 툴</li>
<li>firefox: 파이어폭스</li>
<li>flutter: 플러터</li>
<li>font-cascadia: Cascadis Code 폰트</li>
<li>font-hack-nerd-font: iTerm2 용 터미널 폰트</li>
<li>fork: 무료 중 최고의 git client</li>
<li>gather: 게더타운</li>
<li>google-chrome: 크롬</li>
<li>hiddenbar: 작업표시줄의 프로그램 숨기기</li>
<li>iina: 깔끔한 인터페이스의 미디어 플레이어</li>
<li>iterm2: 터미널</li>
<li>jetbrains-toolbox: jetbrains IDE 버전 관리</li>
<li>keepingyouawake: 잠자기 모드 제어</li>
<li>keka: 압축 프로그램</li>
<li>macs-fan-control: 팬 조절</li>
<li>monitorcontrol: 외장모니터 제어</li>
<li>microsoft-edge: edge</li>
<li>postman: 포스트맨</li>
<li>rancher: rancher-desktop</li>
<li>rectangle: 창 크기 조절</li>
<li>sequel-pro: MySQL GUI client</li>
<li>slack: 슬랙</li>
<li>telegram-desktop: 텔레그램</li>
<li>udeler: udemy 강의 다운로더</li>
<li>visual-studio-code: vscode</li>
<li>yt-music: 유튜브 뮤직 플레이어</li>
<li>zoom: 줌</li>
<li>zulu: 자바</li>
</ul>
<h1>App store</h1>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">mas install 497799835 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  1355679052 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  869223134 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  1295203466 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  1471801525 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  897118787 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  425424353 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  1475628500</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>xcode: <strong>497799835</strong></li>
<li>dropover: <strong>1355679052</strong> 드래그 후 흔들면 가상폴더로 저장</li>
<li>kakaotalk: <strong>869223134</strong> 카카오톡</li>
<li>microsoft remote desktop: <strong>1295203466</strong> 윈도우 원격</li>
<li>polyglot: <strong>1471801525</strong> 사파리 번역기</li>
<li>shazam: <strong>897118787</strong> 음악 찾기</li>
<li>unicorn https: <strong>1475628500</strong> Encrypt DNS query</li>
</ul>
<h1>Bunblefile</h1>
<blockquote>
<p><a href="https://github.com/Homebrew/homebrew-bundle" target="_blank" rel="noopener noreferrer">bundle</a></p>
</blockquote>
<p><code>brew bundle install</code></p>
<div class="language-bash codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_UzQd">Brewfile</div><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-bash codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token plain">tap &quot;homebrew/bundle&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tap &quot;homebrew/cask&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tap &quot;homebrew/cask-drivers&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tap &quot;homebrew/cask-fonts&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tap &quot;spring-io/tap&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask_args appdir: &quot;~/Applications&quot;, require_sha: true</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;fzf&quot; # fuzzy finder</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;gh&quot; # github clone</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;git&quot; # git</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;gitui&quot; # git cui</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;hadolint&quot; # dockerfile linter</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;helm&quot; # helm chart</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;k9s&quot; # k8s dashboard</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;kubectx&quot; # k8s context switcher</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;mas&quot; # app store</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;mkcert&quot; # local certification</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;skaffold&quot; # k8s deploy</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;thefuck&quot; # fix typo</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;tree&quot; # tree</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;volta&quot; # nodejs version manager</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;wget&quot; # wget</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;zsh&quot; # zsh</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;zsh-autosuggestions&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;zsh-syntax-highlighting&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">brew &quot;spring-io/tap/spring-boot&quot; # spring cli</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;appcleaner&quot; # 앱 클리너</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;authy&quot; # 2차 인증</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;bitwarden&quot; # 비밀번호 관리</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;cheatsheet&quot; # 단축키</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;devtoys&quot; # 개발 툴</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;firefox&quot; # 파이어폭스</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;flutter&quot; # 플러터</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;font-cascadia-code&quot; # ms 개발 폰트</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;font-hack-nerd-font&quot; # 터미널 폰트</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;fork&quot; # git gui</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;gather&quot; # gathertown</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;hiddenbar&quot; # 작업표시줄 숨기기</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;iina&quot; # 플레이어</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;iterm2&quot; # 터미널</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;jetbrains-toolbox&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;keepingyouawake&quot; # 잠자기 해제</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;keka&quot; # 압축 프로그램</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># cask &quot;logitech-options&quot; # 로지텍 사용자만</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;macs-fan-control&quot; # 팬 조절</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;microsoft-edge&quot; # edge</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;monitorcontrol&quot; # 외장 모니터 조절</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;postman&quot; # postman</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;rancher&quot; # docker desktop `alias docker=nerdctl`</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;rectangle&quot; # 창 조절</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;sequel-pro&quot; # mysql gui</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;slack&quot; # slack</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;telegram-desktop&quot; # telegram</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># cask &quot;udeler&quot; # udemy downloader</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;visual-studio-code&quot; # vscode</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># cask &quot;yt-music&quot; # youtube music</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;zoom&quot; # zoom</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cask &quot;zulu&quot; # zulu jdk</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># mas &quot;Bitwarden&quot;, id: 1352778147</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"># mas &quot;Dropover&quot;, id: 1355679052</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mas &quot;Microsoft Remote Desktop&quot;, id: 1295203466 # remote desktop</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mas &quot;Polyglot&quot;, id: 1471801525 # translator</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mas &quot;Shazam&quot;, id: 897118787 # music finder</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mas &quot;Xcode&quot;, id: 497799835 # xcode</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mas &quot;카카오톡&quot;, id: 869223134 # kakaotalk</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/mac/">mac</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2019/12/27/kubernetes-rolling-update/">쿠버네티스 롤링 업데이트와 배포</a></h2><div class="container__caW margin-vert--md"><time datetime="2019-12-27T20:43:20.000Z">December 27, 2019</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><p>Deployment 의 파드 교체 전략에는 <strong>RollingUpdate</strong> 와 <strong>Recreate</strong> 가 있다.
기본 값은 <strong>RollingUpdate</strong> 이 며 간단한 설정이 적용된 디플로이먼트는 아래와 같을 것이다.</p>
<div class="language-yaml codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-yaml codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">rolling</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">update</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">label</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> RollingUpdate</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">rollingUpdate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">maxUnavailable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">maxSerge</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> echo</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8080</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>여기서 롤링업데이트 속성을 좀 더 자세히 알아보자.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="rollingupdate">RollingUpdate<a href="#rollingupdate" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="maxunavailable">maxUnavailable<a href="#maxunavailable" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>롤링 업데이트 중 동시에 삭제할 수 있는 파드의 최대 갯수</li>
<li>기본 값은 replicas의 25% 이다.</li>
<li><code>replicas: 4</code>의 경우 1개 파드 삭제, <code>replicas: 8</code>의 경우 2개 파드 동시 삭제</li>
<li>퍼센트 및 직접 지정이 가능하다.</li>
<li>위의 예시 디플로이먼트에서 롤링업데이트 시작 시 파드 3개가 바로 죽는다.</li>
<li>이 값을 높게 설정하면 동시에 교체되는 파드가 늘어나므로 롤링 업데이트 시간이 줄어든다.<!-- -->
<ul>
<li>하지만 롤링업데이트 중에 남아 있는 파드에 요청 수가 몰릴 수 있다.</li>
<li>따라서 <code>1</code>로 설정해 파드를 하나씩 교체하는 것이 안전할 수 있다.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="maxsurge">maxSurge<a href="#maxsurge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>롤링 업데이트 중 동시에 생성하는 파드 갯수</li>
<li>기본 값은 replicas의 25% 이다.</li>
<li><code>replicas: 4</code>면서 <code>maxSurge: 4</code>면 롤링 업데이트 시작 시 새 버전의 파드가 4개 추가로 생성된다.</li>
<li>이 값을 높게 설정하면 필요한 파드를 빨리 생성하므로 파드 교체 시간이 단축된다.<!-- -->
<ul>
<li>하지만 필요한 시스템 자원이 급증할 수 있다.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="probe">Probe<a href="#probe" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>세부 설정은 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#configure-probes" target="_blank" rel="noopener noreferrer">Docs</a>를 참조하자</p>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="livenessprobe">livenessProbe<a href="#livenessprobe" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>애플리케이션 헬스 체크 기능</li>
<li>애플리케이션이 의존하는 컨테이너 안의 파일의 존재여부 확인</li>
<li>Unhealthy 상태의 경우 파드 재시작</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="readinessprobe">readinessProbe<a href="#readinessprobe" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>컨테이너 외부에서 HTTP 등의 트래픽을 발생시켜 처리할 수 있는 상태인지 확인</li>
<li><code>tcpSocket</code>으로 포트 지정도 가능하다.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="응답-중인-파드-교체">응답 중인 파드 교체<a href="#응답-중인-파드-교체" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>응답 중인 파드가 교체되는 경우 <code>SIGTERM</code> 신호를 보내 파드가 삭제되는데,
<code>Graceful Shutdown</code> 상태로 만들기 위해서 종료 처리가 오래 걸리는 파드엔 <strong>terminationGracePeriodSeconds</strong> 를 설정해주는 것이 좋다.</p>
<div class="language-yaml codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-yaml codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># 기본값 30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">terminationGracePeriodSeconds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">40</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> maria</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> maria</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">latest</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Nginx</em>처럼 <code>SIGTERM</code> 시그널을 받고 바로 종료되는 어플리케이션이 있는 파드라면, 라이플사이클 훅을 활용해 안전하게 종료시키는 것이 중요하다.</p>
<div class="language-yaml codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-yaml codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">lifecycle</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)"># 파드 종료 전 훅</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">preStop</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">exec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;/usr/sbin/nginx&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;-s&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;quit&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="파드-11-교체">파드 1:1 교체<a href="#파드-11-교체" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>그렇다면 <code>replicas: 1</code>인 파드를 1:1 교체 시에는 어떤 전략을 가져가야할까
답은 아래와 같다.</p>
<div class="language-yaml codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-yaml codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> RollingUpdate</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">rollingUpdate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 롤링 업데이트 시 삭제 되는 파드 수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">maxUnavailable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 롤링 업데이트 시 새로 생성되는 파드 수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">maxSurge</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>여기에 파드가 트래픽을 받을 수 있는지 <code>readinessProbe</code>를 추가해주면 된다.</p>
<div class="language-yaml codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-yaml codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /ping</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">successThreshold</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5초 후에 5초마다 <code>/ping</code> 을 보내 성공여부를 확인한다.
타임아웃은 3초며 3번까지 재시도한다.</p>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="bluegreen">Blue/Green<a href="#bluegreen" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>디플로이먼트를 2개 만들고, 서비스의 selector 값을 라벨에 따라 변경하자.</li>
<li>서비스메시를 연동하면 카나리아 배포 방식도 가능하다.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/k-8-s/">k8s</a></li><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/docker/">docker</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vyY6"><a href="/en/2019/12/15/Pythonic-the-basics/">Pythonic - 기본기</a></h2><div class="container__caW margin-vert--md"><time datetime="2019-12-15T16:52:01.000Z">December 15, 2019</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_UIgC"><div class="avatar margin-bottom--sm"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt="Gracefullight"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/gracefullight" target="_blank" rel="noopener noreferrer"><span>Gracefullight</span></a></div><small class="avatar__subtitle">Owner</small></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_UHBS" id="types">Types<a href="#types" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>아무 것도 없는 타입은 <code>None</code></li>
<li>주석<!-- -->
<ul>
<li><code>#</code></li>
<li><code>&quot;&quot;&quot; &quot;&quot;&quot;</code></li>
</ul>
</li>
<li>포매팅<!-- -->
<ul>
<li><code>f’test {변수}&#x27;</code></li>
<li><code>&quot;test {}&quot;.format(변수)</code></li>
</ul>
</li>
<li><code>list</code>, <code>dict</code>, <code>set</code> 등은 <strong>immutable</strong> 하지 않아 <code>copy</code> 메소드를 사용해 복사 필요</li>
<li>스왑<!-- -->
<ul>
<li>a, b = b, a 로 한 줄로 가능</li>
</ul>
</li>
<li>set<!-- -->
<ul>
<li><code>{}</code> 으로 set 지정가능</li>
<li>집합연산 가능</li>
<li><code>set([])</code> 로 배열을 set으로 변환 가능</li>
</ul>
</li>
<li>enum<!-- -->
<ul>
<li>튜플로 지정하면 됨</li>
<li>튜플은 <strong>freeze</strong> 되어 있다.</li>
<li><code>(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;)</code></li>
</ul>
</li>
<li>list<!-- -->
<ul>
<li>merge는 더하기로 가능 <code>[] + []</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="operaters">Operaters<a href="#operaters" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>if<!-- -->
<ul>
<li>값 체킹에는 <code>0.0</code> <code>&#x27;&#x27;</code> <code>[]</code> <code>()</code> <code>{}</code> <code>set()</code> 등 모든 빈 값이 <code>false</code> 로 떨어진다.<!-- -->
<ul>
<li>따라서 <del>len(foo) &gt; 0</del> 보다 권장</li>
</ul>
</li>
<li><del>if foo != True</del> 보다 <code>if not foo</code> 를 권장</li>
<li>dict 키 검증 시에는 <code>if &#x27;key&#x27; in d:</code> 를 권장 <del>if &#x27;key&#x27; in d.keys():</del> 필요없다.</li>
<li><code>y=None</code> <code>x = 1 if y else 2</code> 면 x=2 라는 문법이 된다.</li>
</ul>
</li>
<li>is 문은 값이 None 인지 확인할 때 권장<!-- -->
<ul>
<li><del>if foo == None</del> 보다 <code>if foo is None</code> 을 권장</li>
<li><code>if foo is not None</code></li>
</ul>
</li>
<li>while<!-- -->
<ul>
<li><code>while else</code> 구문 가능
else 는 while 에 break 가 없을 경우 while 끝나고 실행</li>
</ul>
</li>
<li>for<!-- -->
<ul>
<li><code>for in</code></li>
<li><code>for in else</code> 구문 가능
else는 for 에 break 가 없을 경우 for 끝나고 실행</li>
<li><code>for _ in range(10)</code> 처럼 underscore 는 index 를 안쓸때 권장</li>
<li><code>for i, item in enumerate([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;])</code> 처럼 index 넣어줄 수 있음</li>
<li><code>for day, fruit in zip(days, fruit)</code> 처럼 패킹(zip) 함수 기본 제공</li>
<li><code>for k, v in d.items()</code> 로 dict 타입 반복 가능</li>
</ul>
</li>
<li>func<!-- -->
<ul>
<li><code>def func():</code> 로 함수선언</li>
<li><code>def add(a: int, b: int) -&gt; int:</code> 처럼 파라미터 및 리턴 타입 정의 가능<!-- -->
<ul>
<li>compile error 발생 안 함</li>
<li>보여주기 위한 타입 기능</li>
</ul>
</li>
<li>매개변수를 위치 인수로 넣을 수 있음<!-- -->
<ul>
<li><code>def menu(entree, drink)</code>라면 <code>menu(drink=&#x27;a&#x27;, entree=&#x27;b&#x27;)</code> 로 호출 가능</li>
</ul>
</li>
<li>list 매개변수는 기본값으로 넣으면 안 됨 <code>def foo(list=[])</code> 면 리스트가 <strong>한 번만</strong> 생성됨 (함수 내부 초기화 필요)</li>
<li><code>def func(*args)</code> 로 동적매개변수 처리 가능 <strong>튜플로 처리됨</strong></li>
<li><code>def func(**kargs)</code> 로 넣으면 dict로 전달가능 <code>func(key1=&#x27;val&#x27;, key2=&#x27;val&#x27;)</code></li>
<li>두 구문을 같이쓸 수 있지만 <code>*args</code>는 <code>**kargs</code> 보다 <strong>먼저 와야한다.</strong></li>
<li>함수 내부 <code>&quot;&quot;&quot; &quot;&quot;&quot;</code> doc 주석을 넣으면 <code>help(func.__doc__), help(func)</code> 로 도움말 호출 가능</li>
<li>클로져로 wrapper 함수를 만들면 <strong>데코레이터</strong>로 바로 적용 가능</li>
<li><code>func(lists, lambda item: item.value())</code> 람다 처리가능 (value: returnValue)</li>
</ul>
</li>
<li><strong>비추천</strong> <code>dic = {x: y for x, y in (zip(w, f)}</code> 처럼 한 번에 for문 dictionary 선언 가능</li>
<li>genarator<!-- -->
<ul>
<li>def + yield</li>
<li><code>gen = (i for i in range(10) if i % 2 == 0)</code> 처럼 한 번에 선언하면 제네레이터가 된다.</li>
<li><code>tuple(gen)</code> 하면 튜플로 처리된다.</li>
<li>for 보다 빠를 수 있다.</li>
</ul>
</li>
<li><code>globals()</code>, <code>locals()</code> 로 전역, 로컬변수 확인가능</li>
<li>excpetion<!-- -->
<ul>
<li><code>try: except IndexError as ex: finally:</code></li>
<li><code>try: except: else: finally:</code> 가 있다면 try =&gt; else =&gt; finally 로 실행</li>
<li><code>raise IndexError(&#x27;test error&#x27;)</code> 처럼 raise 로 에러 발생 가능</li>
<li>기본에러는 exception hierarchy 참조</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="package">Package<a href="#package" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li><code>__init__.py</code> 가 있어야한다.</li>
<li><del>import package.utils</del> 또는 <code>from package import utils</code> 해서 <code>utils.func</code> 롤 호출</li>
<li><code>from package import utils as NamedUtil</code> 처럼 as 문으로 네임스페이스 변경 가능</li>
<li><strong>비추천</strong> <code>from package.folder import *</code> 로 folder 레벨의 모든 python import 가 가능한데
<code>folder.__init__.py</code> 에 <code>__all__ = [&#x27;py&#x27;, &#x27;py2&#x27;]</code> 처럼 선언해줘야한다.</li>
<li>setup.py 를 만들어 패키지를 배포시킬 수 있다.<!-- -->
<ul>
<li>PyCharm: Tools &gt; Create setup.py &gt; run setup.py &gt; sdist 로 출력</li>
<li>Cli: <code>python setup.py sdist</code></li>
</ul>
</li>
<li>PyPI 에 서드파티 라이브러리를 등록하면 <code>pip install termcolor</code> 처럼 설치 가능</li>
<li>import 라이브러리 순서는 위에서부터 <strong>표준, pip, 로컬 패키지, 로컬파일</strong></li>
<li><code>if __name__ == &#x27;__main__&#x27;: main()</code> 은 <strong>entrypoint 스크립트</strong>에서 사용되는 패턴이다.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_UHBS" id="class">Class<a href="#class" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>생성자 <code>__init__(self):</code>, <code>Instance()</code> 로 new 없이 생성</li>
<li>소멸자 <code>__del__(self):</code>, <code>del instance</code> 로 삭제</li>
<li>class method 의 첫 인자로는 self를 받아야 this처럼 사용이 가능하다. 두 번째 부터 파라미터를 받을 수 있다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="protected">protected<a href="#protected" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>proteced 변수는 <code>_var</code> 처럼 underscore 하나를 넣는다.</li>
<li><code>@property</code>, <code>@property_name.setter</code> 데코레이터를 통해 <strong>getter/setter</strong> 처리가 가능하다.</li>
</ul>
<div class="language-python codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-python codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Instance</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">object</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">@property</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">_foo</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">@foo</span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">setter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">_foo </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">intance </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Instance</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">foo </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> bar</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="private">private<a href="#private" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>private 변수는 <code>self.__foo</code> 로 underscore 두 개를 넣는다.</li>
<li>인스턴스 밖에서 접근이 불가능하다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="class-variable">class variable<a href="#class-variable" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>클래스 변수는 모든 오브젝트 초기화시에 공유되므로 list, dict.. 등을 사용하지 않아야한다.</li>
<li>상수처럼 쓰는게 좋을 듯</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="class-method">class method<a href="#class-method" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>class 메소드는 <code>@classmethod</code> 데코레이터로 가능하다.</li>
</ul>
<div class="language-python codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-python codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Instance</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">object</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">@classmethod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">cls</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)"># cls 로 클래스 접근가능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> cls</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bar</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Instance</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="static-method">static method<a href="#static-method" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>static 메소드는 <code>@staticmethod</code> 데코레이터로 정의할 수 있으나 잘 사용되지는 않는다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="상속">상속<a href="#상속" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-python codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-python codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Parent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">object</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">__init__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Child</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Parent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">__init__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token builtin" style="color:rgb(86, 156, 214)">super</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">__init__</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>다중상속 하지말자</li>
<li><code>class Twins(Parent, Parent2)</code> 로 되지만 메소드명이 같을 경우 왼쪽에 선언된 것만 실행된다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="추상">추상<a href="#추상" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-python codeBlockContainer_MhZ2 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_vAaK"><pre tabindex="0" class="prism-code language-python codeBlock_teV8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_bqPx"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> abc</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Parent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">metaclass</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">abc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ABCMeta</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">@abc</span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token decorator annotation punctuation" style="color:rgb(212, 212, 212)">abstractmethod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Child</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Parent</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;foo&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup_TkrL"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_kQqJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_EDU8"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_pkQZ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_UHBS" id="특수-메소드">특수 메소드<a href="#특수-메소드" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>많지만 <code>__str__</code> 이 제일 많이 쓴다. <code>toString()</code> 과 같다.</li>
<li><code>__len__</code> (len(instance))</li>
<li><code>__eq__</code> (instance == instance2)</li>
<li><code>__add__</code> (instance + instance2)</li>
<li>등등..</li>
<li>클래스 기본기능을 해치는 개인적인 느낌</li>
</ul>
<h1>여담</h1>
<ul>
<li>MSA의 시대에 살고 있는 어플리케이션 레이어의 개발자는 어쩔 수 없이 폴리글랏 프로그래머가 되기 마련이다.</li>
<li>하나의 언어에 능통하면 다른 언어로 넘어가는 데에는 익숙함의 문제지만,
그 언어를 제대로 사용하기 위해 가장 중요한 건 스타일 가이드, 린팅과 주기적인 Docs, Release Notes 확인이라고 생각한다.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_BTWS padding--none margin-left--sm"><li class="tag_uYMw"><a class="tag_cfsW tagRegular_x_KI" href="/en/tags/python/">python</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/page/10/"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/page/12/"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support Me</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.buymeacoffee.com/LOUB2kN" target="_blank" rel="noopener noreferrer" style="cursor: pointer;">
                <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" style="height: auto !important;width: auto !important;">
              </a></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gracefullight.dev/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ttoC"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gracefullight.dev/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ttoC"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2016 - 2023 Gracefullight. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>