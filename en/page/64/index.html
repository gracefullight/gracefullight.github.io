<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Blog | gracefullight.dev</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://gracefullight.dev/en/page/64/><meta data-rh=true property=og:locale content=en><meta data-rh=true property=og:locale:alternate content=ko><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true content=gcY9SiftHgQoJjBZ7IgwNNN5_atLPAX6kWb1nFVfa6E name=google-site-verification><meta data-rh=true content=65AD1E28C0D057CEB3C68FBC0293E55B name=msvalidate.01><meta data-rh=true content=d024c2837887f72dc7b3792b958be74d69ba9593 name=naver-site-verification><meta data-rh=true content=f7c93483a6f87c79 name=yandex-verification><meta data-rh=true content=yZEdU1ABcR name=baidu-site-verification><meta data-rh=true content=uelupjqqsm5egzlhy1aev2rfxow5yt name=facebook-domain-verification><meta data-rh=true property=og:title content="Blog | gracefullight.dev"><meta data-rh=true name=description content=Blog><meta data-rh=true property=og:description content=Blog><meta data-rh=true name=docusaurus_tag content=blog_posts_list><meta data-rh=true name=docsearch:docusaurus_tag content=blog_posts_list><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://gracefullight.dev/en/page/64/><link data-rh=true rel=alternate href=https://gracefullight.dev/page/64/ hreflang=ko><link data-rh=true rel=alternate href=https://gracefullight.dev/en/page/64/ hreflang=en><link data-rh=true rel=alternate href=https://gracefullight.dev/page/64/ hreflang=x-default><link data-rh=true rel=preconnect href=https://RFS69RSYOJ-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://gracefullight.dev/en/page/64","@type":"Blog","blogPost":[{"@id":"https://gracefullight.dev/en/2018/01/09/나를-위한-면접-ALL","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2018-01-09T22:13:40.000Z","description":"실무에 치이느라 기본적인 걸 까먹을까봐 정리해보자","headline":"나를 위한 면접 (ALL)","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2018/01/09/나를-위한-면접-ALL","name":"나를 위한 면접 (ALL)","url":"https://gracefullight.dev/en/2018/01/09/나를-위한-면접-ALL"},{"@id":"https://gracefullight.dev/en/2018/01/09/Window에서-aws-cli-사용시-bad-interperter-오류","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2018-01-09T12:10:59.000Z","description":"git bash에서 aws cli 명령어를 실행시에 c:\\Program Files... bad interpreter 오류가 나오면서 실행이 안 될 때는 다음과 같이 하면 된다.","headline":"Window에서 aws cli 사용시 bad interperter 오류","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2018/01/09/Window에서-aws-cli-사용시-bad-interperter-오류","name":"Window에서 aws cli 사용시 bad interperter 오류","url":"https://gracefullight.dev/en/2018/01/09/Window에서-aws-cli-사용시-bad-interperter-오류"},{"@id":"https://gracefullight.dev/en/2018/01/05/Cloudfront-캐시-지우기","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2018-01-05T13:41:12.000Z","description":"클라우드프론트로 static website hosting 을 할 경우에 삭제된 s3 의 파일이 노출되는 경우가 있다.","headline":"Cloudfront 캐시 지우기","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2018/01/05/Cloudfront-캐시-지우기","name":"Cloudfront 캐시 지우기","url":"https://gracefullight.dev/en/2018/01/05/Cloudfront-캐시-지우기"},{"@id":"https://gracefullight.dev/en/2018/01/04/pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2018-01-04T10:19:13.000Z","description":"원인","headline":"pm2 앱에서 git hook시에 nginx 502 gateway timeout 오류","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2018/01/04/pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류","name":"pm2 앱에서 git hook시에 nginx 502 gateway timeout 오류","url":"https://gracefullight.dev/en/2018/01/04/pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류"},{"@id":"https://gracefullight.dev/en/2018/01/03/nginx-letsencrypt-fastest-way","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2018-01-03T13:29:33.000Z","description":"centos7 기준","headline":"nginx에 letsencrypt 인증서로 https 가장 빨리 적용하기","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2018/01/03/nginx-letsencrypt-fastest-way","name":"nginx에 letsencrypt 인증서로 https 가장 빨리 적용하기","url":"https://gracefullight.dev/en/2018/01/03/nginx-letsencrypt-fastest-way"},{"@id":"https://gracefullight.dev/en/2018/01/01/react-native-windows-network-setting","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2018-01-01T23:50:31.000Z","description":"리액트 네이티브로 개발한 앱을 Expo로 구동 중 network response timed out 에러 메세지가 보인다면 다음과 같이 해결하면 된다.","headline":"리액트 네이티브 윈도우 네트워크 설정 (react-native)","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2018/01/01/react-native-windows-network-setting","name":"리액트 네이티브 윈도우 네트워크 설정 (react-native)","url":"https://gracefullight.dev/en/2018/01/01/react-native-windows-network-setting"},{"@id":"https://gracefullight.dev/en/2017/12/27/utf8-charset에서-emoji-필터링","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2017-12-27T13:05:20.000Z","description":"개요","headline":"utf8 charset에서 emoji 필터링하기","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2017/12/27/utf8-charset에서-emoji-필터링","name":"utf8 charset에서 emoji 필터링하기","url":"https://gracefullight.dev/en/2017/12/27/utf8-charset에서-emoji-필터링"},{"@id":"https://gracefullight.dev/en/2017/12/26/Docker로-Swagger-설치-후-테마-설정하기","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2017-12-26T22:03:44.000Z","description":"Swagger UI와 Swagger Editor를 Docker 로 띄워서 빠르게 사용해보자.","headline":"Docker로 스웨거 설치 후 테마 설정하기 (swagger)","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2017/12/26/Docker로-Swagger-설치-후-테마-설정하기","name":"Docker로 스웨거 설치 후 테마 설정하기 (swagger)","url":"https://gracefullight.dev/en/2017/12/26/Docker로-Swagger-설치-후-테마-설정하기"},{"@id":"https://gracefullight.dev/en/2017/12/22/PWA-ServiceWorker-Web-Caching","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2017-12-22T20:53:41.000Z","description":"개요","headline":"PWA - 서비스 워커 웹 캐싱 (Web Caching)","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2017/12/22/PWA-ServiceWorker-Web-Caching","name":"PWA - 서비스 워커 웹 캐싱 (Web Caching)","url":"https://gracefullight.dev/en/2017/12/22/PWA-ServiceWorker-Web-Caching"},{"@id":"https://gracefullight.dev/en/2017/12/21/adonisjs-custom-log-format","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2017-12-21T15:25:45.000Z","description":"아도니스는 로깅 모듈로 winston 을 사용하는데 winston 은 로그를 json 포맷으로 출력하고 심지어 timezone 변수가 따로 나온다.","headline":"adonisjs 로그 포맷 변경하기 (custom log format)","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2017/12/21/adonisjs-custom-log-format","name":"adonisjs 로그 포맷 변경하기 (custom log format)","url":"https://gracefullight.dev/en/2017/12/21/adonisjs-custom-log-format"}],"description":"Blog","headline":"Blog","mainEntityOfPage":"https://gracefullight.dev/en/page/64"}</script><link rel=alternate type=application/rss+xml href=/en/rss.xml title="gracefullight.dev RSS Feed"><link rel=alternate type=application/atom+xml href=/en/atom.xml title="gracefullight.dev Atom Feed"><link rel=alternate type=application/json href=/en/feed.json title="gracefullight.dev JSON Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-E99DNE7S05"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E99DNE7S05",{})</script><link rel=search type=application/opensearchdescription+xml title=gracefullight.dev href=/en/opensearch.xml><link href=/en/img/favicon-32x32.png rel=icon><link href=/en/manifest.json rel=manifest><meta content=#f28913 name=theme-color><meta content=yes name=mobile-web-app-capable><meta content=#f28913 name=apple-mobile-web-app-status-bar-style><link href=/en/img/apple-touch-icon.png rel=apple-touch-icon><link rel=preconnect href=https://pagead2.googlesyndication.com><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3004788392777865" async crossorigin=anonymous></script><link rel=preconnect href=https://www.clarity.ms><script>!function(t,e,n,a,c,i,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(i=e.createElement(a)).async=1,i.src="https://www.clarity.ms/tag/"+c,(r=e.getElementsByTagName(a)[0]).parentNode.insertBefore(i,r)}(window,document,"clarity","script","aongv9xgi6")</script><link rel=preconnect href=https://wcs.naver.net><script src=https://wcs.naver.net/wcslog.js async></script><script>if(!wcs_add)var wcs_add={};wcs_add.wa="156bc73a81e3bd0",window.wcs&&wcs_do()</script><link rel=preconnect href=https://cdn.channel.io><script>!function(){var n=window;if(n.ChannelIO)return(window.console.error||window.console.log||function(){})("ChannelIO script included twice.");var e=function(){e.c(arguments)};function t(){if(!n.ChannelIOInitialized){n.ChannelIOInitialized=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.channel.io/plugin/ch-plugin-web.js",e.charset="UTF-8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}e.q=[],e.c=function(n){e.q.push(n)},n.ChannelIO=e,"complete"===document.readyState?t():window.attachEvent?window.attachEvent("onload",t):(window.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1))}(),ChannelIO("boot",{pluginKey:"0fd130ba-a1a6-4b7e-802a-e82a885a7fd8"})</script><link rel=preconnect href=https://static.cloudflareinsights.com><script src=https://static.cloudflareinsights.com/beacon.min.js defer data-cf-beacon='{"token":"c0899829e72b45e98dff77241127252c"}'></script><link href=https://mc.yandex.ru rel=preconnect><script>!function(e,t,c,n,r,a,s){e[r]=e[r]||function(){(e[r].a=e[r].a||[]).push(arguments)},e[r].l=+new Date;for(var i=0;i<document.scripts.length;i++)if(document.scripts[i].src===n)return;a=t.createElement(c),s=t.getElementsByTagName(c)[0],a.async=1,a.src=n,s.parentNode.insertBefore(a,s)}(window,document,"script","https://mc.yandex.ru/metrika/tag.js?id=104072655","ym"),ym(0x63405cf,"init",{ssr:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!1})</script><link href=https://cdn.jsdelivr.net rel=preconnect><script type=application/ld+json>{"@context":"http://schema.org","@type":"Person","email":"mailto:gracefullight.dev@gmail.com","image":"https://avatars.githubusercontent.com/u/11773683?v=4","jobTitle":"FullStack JavaScript Developer","logo":"https://gracefullight.dev/img/apple-touch-icon.png","name":"Eunkwang Shin","nationality":"Korean","sameAs":["https://github.com/gracefullight","https://linkedin.com/in/gracefullight"],"url":"https://gracefullight.dev"}</script><link rel=stylesheet crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css type=text/css><script src=/en/assets/js/runtime~main.8cc63bf8.js defer></script><script src=/en/assets/js/main.7094eed3.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/en/img/favicon-32x32.png><link rel=preload as=image href="https://avatars.githubusercontent.com/u/11773683?v=4"><div role=region aria-label="Skip to main content"><a class=skipToContent_soTP href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/favicon-32x32.png alt="gracefullight.dev blog logo" class="themedComponent_bFbq themedComponent--light_CA8X"><img src=/en/img/favicon-32x32.png alt="gracefullight.dev blog logo" class="themedComponent_bFbq themedComponent--dark_BzJK"></div><b class="navbar__title text--truncate">gracefullight.dev</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_LGSY><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/page/64/ target=_self rel="noopener noreferrer" class=dropdown__link lang=ko>한국어</a><li><a href=/en/page/64/ target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a></ul></div><a class="navbar__item navbar__link" href=/en/archive/>Archives</a><a class="navbar__item navbar__link" href=/en/tags/>Tags</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_YAYV colorModeToggle_T40I"><button class="clean-btn toggleButton_Qe_r toggleButtonDisabled_AVvq" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_T_L2 lightToggleIcon_FRTA"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_T_L2 darkToggleIcon_zlMh"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_T_L2 systemToggleIcon_h91M"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_SXBB><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_bGoB"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_Pgmn thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_euex margin-bottom--md">Recent posts</div><div role=group><h3 class=yearGroupHeading_cosT>2025</h3><ul class="sidebarItemList_jela clean-list"><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/vocab/vocab-ai-008/>Vocabulary for AI 008</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/12/introduction-to-ai-006/>Introduction to AI @006</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/10/research-methodology/>Research methodology</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/09/fundamentals-of-data-analytics-006/>Fundamentals of data analytics @006</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/09/fundamentals-of-data-analytics-005/>Fundamentals of data analytics @005</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/vocab/vocab-ai-007/>Vocabulary for AI @007</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/08/fundamentals-of-software-development-007/>Fundamentals of software development @007</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/04/sentence-structures/>Sentence structures</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/04/vlatest-review/>VLA Test Review</a><li class=sidebarItem_drnv><a class=sidebarItemLink_hMRR href=/en/2025/09/02/introduction-to-ai-005/>Introduction to AI @005</a></ul></div></nav></aside><main class="col col--7"><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2018/01/09/나를-위한-면접-ALL/>나를 위한 면접 (ALL)</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2018-01-09T22:13:40.000Z>January 9, 2018</time> · <!-- -->11 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><p>실무에 치이느라 기본적인 걸 까먹을까봐 정리해보자
<a href=/en/tags/정보처리/>정보처리</a> 에서 컴퓨터 기초를 보면 되고.
지극히 주관적이라 정답이 아닐 수 있습니다</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=수학>수학<a href=#수학 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=미적분>미적분<a href=#미적분 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>편미분까진 안물어보더라</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=베이지안-확률>베이지안 확률<a href=#베이지안-확률 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>사후확률 = 가능도 * 사전확률 / 증거</p>
</blockquote>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// 붉은 점이 얼굴에 보일 때 수두 환자일 확률은 어떻게 구할까?</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token constant" style=color:#36acaa>P</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">수두 </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> 붉은점</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>P</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">붉은 점 </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> 수두</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>P</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">수두</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>/</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>P</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">붉은점</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=자료구조>자료구조<a href=#자료구조 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=b-tree>B Tree<a href=#b-tree class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>m-원 트리의 단점임 한쪽으로 편중된 트리를 생성되는 경우를 보완하고자 루트노드로부터 리프노드의 레벨을 같도록 유지한 트리</p>
</blockquote>
<table><thead><tr><th>BASIS FOR COMPARISON<th>B-TREE<th>BINARY TREE<tbody><tr><td>Essential constraint<td>A node can have at max M number of child nodes(where M is the order of the tree).<td>A node can have at max 2 number of subtrees.<tr><td>Used<td>It is used when data is stored on disk.<td>It is used when records and data are stored in RAM.<tr><td>Height of the tree<td>logM N (where m is the order of the M-way tree)<td>log2 N<tr><td>Application<td>Code indexing data structure in many DBMS.<td>Code optimization, Huffman coding, etc.</table>
<p>space complexity B-tree is O(n).
Insertion and deletion time complexity is O(logn).</p>
<p><a href=https://techdifferences.com/difference-between-b-tree-and-binary-tree.html target=_blank rel="noopener noreferrer">출처</a></p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=b-tree-1>B+ Tree<a href=#b-tree-1 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<blockquote>
<p>B+은 index node와 data node로 구성</p>
</blockquote>
<p><a href=http://potatoggg.tistory.com/174 target=_blank rel="noopener noreferrer">출처</a></p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=b-tree-2>B* Tree<a href=#b-tree-2 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<blockquote>
<p>B-tree의 경우에 <em>각 노드가 최소한 반 이상 차 있어야 하는 조건</em>을 <em>각 노드가 최소한 2/3이상 차있어야 한다</em>로 변경하면 이것이 B*tree이다</p>
</blockquote>
<p>공간 활용도를 높일 수 있다.
<a href=http://egloos.zum.com/LaClefaVerite/v/5639321 target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=binary-tree>Binary Tree<a href=#binary-tree class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>모든 노드의 차수가 2 이상을 넘지 않는 트리를 말한다, 왼쪽자식노드는 부모노드의 값보다 작이야하며 오른쪽 자식노드는 부모노드의 값보다 커야한다.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=binary-search-tree>Binary Search Tree<a href=#binary-search-tree class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>이진탐색(binary search)과 연결리스트(linked list)를 결합한 자료구조의 일종입니다. 이진탐색의 효율적인 탐색 능력을 유지하면서도, 빈번한 자료 입력과 삭제를 가능하게끔 고안됐습니다.</p>
</blockquote>
<ul>
<li>모든 원소는 서로 다른 유일한 키를 가짐</li>
<li>왼쪽 서브트리에 있는 원소들의 값은 그 루트의 값보다 작음</li>
<li>오른쪽 서브트리에 있는 원소의 값들은 그 루트의 값보다 큼</li>
<li>왼쪽 서브트리와 오른쪽 서브트리도 이진 탐색 트리임</li>
</ul>
<p>O(n), 완전 이진 트리에 가까울 수록 O(log2(n))</p>
<p><a href=https://ratsgo.github.io/data%20structure&algorithm/2017/10/22/bst/ target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=insertion-sort>Insertion Sort<a href=#insertion-sort class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>앞에서부터 하나씩 비교하여 위치를 삽입</p>
</blockquote>
<p>O(n^2)</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>insertionSort</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">unsortedList</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> len </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> unsortedList</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> len</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Copy of the current element.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> tmp </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> unsortedList</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check through the sorted part and compare with the number in tmp. If large, shift the number</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>var</span><span class="token plain"> j </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> j </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> unsortedList</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">j</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> j</span><span class="token operator" style=color:#393A34>--</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// Shift the number</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      unsortedList</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">j </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> unsortedList</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">j</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Insert the copied number at the correct position</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// in sorted part.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    unsortedList</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">j </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p><a href=http://codingmiles.com/sorting-algorithms-insertion-sort-using-javascript/ target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=selection-sort>Selection Sort<a href=#selection-sort class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>하나씩 뒤로 비교하여 최소값을 맨 앞으로 삽입</p>
</blockquote>
<p>O(n^2)</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>selectionSort</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">items</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> length </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> items</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> length </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Number of passes</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// min holds the current minimum number position for each pass; i holds the Initial min number</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> min </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> i</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Note that j = i + 1 as we only need to go through unsorted array</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> j </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> j </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> length</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> j</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// Compare the numbers</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">j</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">min</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// Change the current min number position if a smaller num is found</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        min </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> j</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">min </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> i</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// After each pass, if the current min num != initial min num, exchange the position.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// Swap the numbers</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> tmp </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">min</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">min</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p><a href=http://codingmiles.com/sorting-algorithms-selection-sort-using-javascript/ target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=quick-sort>Quick Sort<a href=#quick-sort class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>pivot을 하나 뽑는다 보통 list.length / 2 -1 을 선택한다.
pivot 앞에는 pivot보다 작게, pivot 뒤에는 pivot보다 크게 값을 바꿔치고 재귀를 돌린다</p>
</blockquote>
<p>최악 O(n^2), 평균 O(nlogn)</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>quickSort</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">list</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">list</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> list</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> pivot </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> list</span><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// const pivot = list[Math.floor(list.length / 2)];</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> smaller </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> list</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>filter</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">item</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> item </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> pivot</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> bigger </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> list</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>filter</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">item</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> item </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> pivot</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token spread operator" style=color:#393A34>...</span><span class="token method function property-access" style=color:#d73a49>quickSort</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">smaller</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> pivot</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token spread operator" style=color:#393A34>...</span><span class="token method function property-access" style=color:#d73a49>quickSort</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">bigger</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=참고>참고<a href=#참고 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<ul>
<li><a href=https://ko.wikipedia.org/wiki/%ED%80%B5_%EC%A0%95%EB%A0%AC target=_blank rel="noopener noreferrer">퀵 정렬</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=list>List<a href=#list class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=linked-list>Linked List<a href=#linked-list class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=list-vs-linked-list>List vs Linked List<a href=#list-vs-linked-list class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>리스트가 대부분 좋다
연결 리스트는 중간에 삽입 삭제시 좋다
리스트는 끝에 넣을 떄 좋다</p>
<p>연결 리스트는 검색시 링크를 따라가므로 비효율적이다.
리스트가 순차라 검색시에 좋다.
공간의 효율성은 연결 리스트</p>
</blockquote>
<p><a href=https://stackoverflow.com/questions/169973/when-should-i-use-a-list-vs-a-linkedlist target=_blank rel="noopener noreferrer">효율성 비교</a></p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#d73a49>LinkedList</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">LinkedList</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>push</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> node </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>value</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>next</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> node</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#00009f>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    current </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>while</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">current</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">next</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      current </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> current</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">next</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    current</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> node</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> sll </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">LinkedList</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">sll</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>push</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">sll</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>push</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">sll</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>push</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>4</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// check values by traversing LinkedList</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">sll</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Object {data: 2, next: Object}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">sll</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">next</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Object {data: 3, next: Object}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">sll</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">head</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">next</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">next</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Object {data: 4, next: null}</span><br></span></code></pre></div></div>
<p><a href=http://khan4019.github.io/front-end-Interview-Questions/linkedList.html target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=graph>Graph<a href=#graph class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>그래프(Graph)는 연결되어 있는 원소간의 관계를 표현하는 자료구조이다. 나와 연관된 인간 관계를 나타내는 인맥 지도, 수도 배관에 대한 배수 시스템, 물질의 분자 구조 등은 연결 구조가 다양하기 때문에 선형 자료 구조나 트리로는 표현 할 수가 없다.</li>
<li>그래프는 연결할 객체를 나타내는 정점(vertex)와 객체를 연결하는 간선(edge)의 집합으로 구성된다. 그래프 G를 *G=(V,E)*로 정의하는데, V는 그래프에 있는 정점들의 집합을 의미하고, E는 정점을 연결하는 간선들의 집합을 의미한다.</li>
</ul>
<p><a href=https://gist.github.com/singun/1d628d0e3d66c60f9856 target=_blank rel="noopener noreferrer">출처</a></p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Implement a Graph</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// basic operations:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//  - add vertex (node)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//  - add edge (node -> node)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#d73a49>GraphNode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">val</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#d73a49>Graph</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// O(1) operation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>addVertex</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// add vertex only if it does not exist.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">GraphNode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// O(E) operation - edges</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>removeVertex</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// once you remove a vertex, you need to remove all edges pointing</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// to the vertex.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>delete</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>keys</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>forEach</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">key</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> index</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token keyword" style=color:#00009f>delete</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>bind</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// O(1) operation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>getVertex</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// O(1) operation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>addEdge</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">start</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> end</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// check to see if vertices exists.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// if it exists, set the edges and be done.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// check to see if edge exists, if it does, increment it's weight</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">weight</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#00009f>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// edge does not exist, set weight to 1.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#36acaa>weight</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// O(1) operation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>removeEdge</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">start</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> end</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>delete</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// O(1) operation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>getEdge</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">start</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> end</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">start</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">end</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>neighbors</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>?</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">vertices</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">val</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">edges</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> graph </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Graph</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addVertex</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addVertex</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addVertex</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>6</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addVertex</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>7</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEdge</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEdge</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>6</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>7</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEdge</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>7</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>getEdge</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>getEdge</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>6</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>7</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>removeVertex</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>getEdge</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>neighbors</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>6</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">graph</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>neighbors</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p><a href=https://gist.github.com/tpae/a6d320f1b5c7e7a8c0c7a3ed752f6de3 target=_blank rel="noopener noreferrer">출처</a></p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=알고리즘>알고리즘<a href=#알고리즘 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=시간복잡도>시간복잡도<a href=#시간복잡도 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>알고리즘이 문제를 해결하는 데에 얼마나 걸리는 지를 분석하는 것</li>
<li>프로그램을 실행시켜 완료하는데 걸리는 시간을 의미</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=빅오표기법>빅오표기법<a href=#빅오표기법 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<ul>
<li>실행 시간은 최대한 이만큼 커지지만 더 천천히 커질 수도 있다는 의미인 점근적 표기법 형태를 사용하는 것 (점근 표기법)</li>
<li>최악의 경우를 표기하는 방법</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=빅오에서-n이-의미하는것>빅오에서 n이 의미하는것<a href=#빅오에서-n이-의미하는것 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<ul>
<li>입력 데이터 개수</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=최단거리-알고리즘>최단거리 알고리즘<a href=#최단거리-알고리즘 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>다익스트라 알고리즘</li>
<li>A* 알고리즘</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=슬라이딩-윈도우>슬라이딩 윈도우<a href=#슬라이딩-윈도우 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p><a href=http://codingdojang.com/scode/439 target=_blank rel="noopener noreferrer">이 문제</a>가 도움 될 듯</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=데이터베이스>데이터베이스<a href=#데이터베이스 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=정규화>정규화<a href=#정규화 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>관계형 데이터베이스의 설계에서 중복을 최소화하게 데이터를 구조화하는 프로세스</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=목적>목적<a href=#목적 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<ul>
<li>이상이 있는 관계를 재구성하여 작고 잘 조직된 관계를 생성하는 것에 있다.</li>
<li>일반적으로 정규화란 크고, 제대로 조직되지 않은 테이블들과 관계들을 작고 잘 조직된 테이블과 관계들로 나누는 것을 포함한다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=비정규화>비정규화<a href=#비정규화 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>과도한 정규화로 인해서 테이블의 수가 증가하게 되면, 다수의 JOIN이 발생함에 따라서 성능 저하가 발생할 수 있다. 보통의 경우 정규화 과정을 모두 거친 다음 마지막 단계에서 비정규화를 실시한다.</li>
<li>단, 테이블을 합치는 것만이 비정규화는 아니다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=인덱싱-자료구조>인덱싱 자료구조<a href=#인덱싱-자료구조 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-text codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-text codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">B-Tree 알고리즘은 가장 일반적으로 사용되는 인덱스 알고리즘으로서, 상당히 오래전에 도입된 알고리즘이며 그만큼 성숙해진 상태입니다. B-Tree 인덱스는 칼럼의 값을 변형하지 않고, 원래의 값을 이용해 인덱싱하는 알고리즘 입니다.</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">R-Tree 다차원 공간</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Hash 인덱스 알고리즘은 컬럼의 값으로 해시 값을 계산해서 인덱싱하는 알고리즘으로, 매우 빠른 검색을 지원합니다. 하지만 값을 변형해서 인덱싱하므로, 전방(Prefix) 일치와 같이 값의 일부만 검색하고자 할 때는 해시 인덱스를 사용할 수 없습니다. Hash 인덱스는 주로 메모리 기반의 데이터베이스에서 많이 사용합니다.</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Fractal-Tree 알고리즘은 B-Tree의 단점을 보완하기 위해 고안된 알고리즘입니다. 값을 변형하지 않고 인덱싱하며 범용적인 목적으로 사용할 수 있다는 측면에서 B-Tree와 거의 비슷하지만 데이터가 저장되거나 삭제될 때 처리 비용을 상당히 줄일 수 있게 설계된 것이 특징입니다. 아직 B-Tree 알고리즘만큼 안정적이고 성숙되진 않았지만 아마도 조만간 B-Tree 인덱스의 상당 부분을 대체할 수 있지 않을까 생각합니다.</span><br></span></code></pre></div></div>
<p><a href=http://12bme.tistory.com/138 target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=캐싱시-자료구조>캐싱시 자료구조<a href=#캐싱시-자료구조 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>Hash Table and a Linked List</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=디비-클러스터링>디비 클러스터링<a href=#디비-클러스터링 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p><a href=http://bcho.tistory.com/1062 target=_blank rel="noopener noreferrer">개념 참조</a>
<a href=https://okky.kr/article/261535 target=_blank rel="noopener noreferrer">운영 참조</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=isolation-level>Isolation level<a href=#isolation-level class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>Read Uncommitted</li>
<li>Read Committed</li>
<li>Repeatable Read</li>
<li>Serializable</li>
</ul>
<p><a href=http://egloos.zum.com/ljlave/v/1530887 target=_blank rel="noopener noreferrer">개념 참조</a>
<a href="https://docs.microsoft.com/en-us/sql/connect/jdbc/understanding-isolation-levels?view=sql-server-ver15" target=_blank rel="noopener noreferrer">이하 참조</a></p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=read-uncommitted-isolation-level>Read Uncommitted Isolation Level<a href=#read-uncommitted-isolation-level class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>SELECT 문장을 수행하는 경우 해당 데이터에 Shared Lock이 걸리지 않는 Level입니다. 따라서, 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 B라는 아직 완료되지 않은(Uncommitted 혹은 Dirty) 데이터 B를 읽을 수 있습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=read-committed-isolation-level>Read Committed Isolation Level<a href=#read-committed-isolation-level class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>SQL Server가 Default로 사용하는 Isolation Level입니다. 이 Level에선 SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸립니다. 그러므로, 어떠한 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 해당 데이터에 접근할 수 없습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=repeatable-read-isolation-level>Repeatable Read Isolation Level<a href=#repeatable-read-isolation-level class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능합니다. 가령, <code>Select col1 from A where col1 between 1 and 10</code>을 수행하였고 이 범위에 해당하는 데이터가 2건이 있는 경우(col1=1과 5) 다른 사용자가 col1이 1이나 5인 Row에 대한 UPDATE이 불가능합니다. 하지만, col1이 1과 5를 제외한 나머지 이 범위에 해당하는 Row를 INSERT하는 것이 가능합니다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=serializable-isolation-level>Serializable Isolation Level<a href=#serializable-isolation-level class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다. 예를 들어, Repeatable Read의 경우 1에서 10 사이에 해당되는 데이터에 대한 UPADTE이 가능하였습니다. 하지만 이 Level에서는 UPDATE 작업도 허용하지 않습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=acid>ACID<a href=#acid class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>원자성, 일관성, 독립성, 영속성</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=atomicity>Atomicity<a href=#atomicity class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>트랜잭션 내의 명령은 반드시 완벽히 수행
모두가 수행되거나 오류시 전부가 취소되어야함</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=consistency>Consistency<a href=#consistency class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>DB의 전체 요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야함 (질량 보존 법칙처럼)</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=isolation>Isolation<a href=#isolation class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>둘 이상의 트랜잭션이 병행 실행되는 경우 다른 트랜잭션 연산이 끼어들 수 없음
수행 중인 트랜잭션은 완료될 때 까지 다른 트랜잭션에서 참조 불가.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=durability>Durability<a href=#durability class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>시스템이 고장나도 영구적으로 반영</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=crud>CRUD<a href=#crud class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>Create(생성), Read(읽기), Update(갱신), Delete(삭제)</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=innodb와-myisam의-차이>InnoDB와 MyISAM의 차이<a href=#innodb와-myisam의-차이 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p><img decoding=async loading=lazy src=http://idchowto.com/wp-content/uploads/2015/12/db-storage-engine1.png alt="image from hexo" class=img_f7zd></p>
<ul>
<li><a href="http://idchowto.com/?p=20166" target=_blank rel="noopener noreferrer">MyISAM vs InnoDB Storage Engine</a></li>
<li><a href=http://ojava.tistory.com/25 target=_blank rel="noopener noreferrer">MySQL Storage Engine의 양대산맥! MyISAM vs InnoDB</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=mariadb가-mysql보다-나은점>MariaDB가 MySQL보다 나은점<a href=#mariadb가-mysql보다-나은점 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<ul>
<li>
<p>많은 스토리지 엔진</p>
</li>
<li>
<p>속도 개선</p>
</li>
<li>
<p>확장성과 새로운 기능들 (<code>regexp_replace</code> 등)</p>
</li>
<li>
<p>오픈 소스 및 활발한 contribute</p>
</li>
<li>
<p><a href=https://mariadb.com/kb/ko/mariadb-vs-mysql-features/ target=_blank rel="noopener noreferrer">공식 홈페이지</a></p>
</li>
<li>
<p><a href=https://xdhyix.wordpress.com/2016/03/24/mysql-%EC%97%90%EC%84%9C-mariadb-%EB%A1%9C-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%95%B4%EC%95%BC%ED%95%A0-10%EA%B0%80%EC%A7%80-%EC%9D%B4%EC%9C%A0/ target=_blank rel="noopener noreferrer">mysql-에서-mariadb-로-마이그레이션-해야할-10가지-이유</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=증분-백업>증분 백업<a href=#증분-백업 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>정해진 시간을 기준으로 그 이후에 변경된 파일만을 백업하는 방식</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=서버>서버<a href=#서버 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=서버-로드밸런싱>서버 로드밸런싱<a href=#서버-로드밸런싱 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>설명할 수 있음</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=이미지-클러스터링>이미지 클러스터링<a href=#이미지-클러스터링 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p><a href=https://ko.wikipedia.org/wiki/K-%ED%8F%89%EA%B7%A0_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98 target=_blank rel="noopener noreferrer">k-means</a>
(피벗 추출 후 2진수 비교인데 아직 이해하기가 힘들다, 18년 말에는 딥러닝을 파보자!)</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=build-process-설명>Build Process 설명<a href=#build-process-설명 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=deploy-server>Deploy Server<a href=#deploy-server class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=git-flow>Git Flow<a href=#git-flow class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<blockquote>
<p>브랜치 관리 전략</p>
</blockquote>
<ul>
<li>feature: develop에서 분기 후 기능 개발 후 develop으로</li>
<li>develop: 개발 브랜치</li>
<li>release: master로의 merge를 위한 준비</li>
<li>hotfix: master의 버그 픽스 후 develop과 master로 빠른 수정</li>
<li>master: 프로덕션 브랜치</li>
</ul>
<p><img decoding=async loading=lazy src=https://camo.githubusercontent.com/e1dae4f1f5868a9d043d39824761cff9dabe764f/687474703a2f2f646f67666565742e6769746875622e696f2f61727469636c65732f323031312f612d7375636365737366756c2d6769742d6272616e6368696e672d6d6f64656c2f6769742d6272616e6368696e672d6d6f64656c2e706e67 alt="image from hexo" class=img_f7zd></p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=참고-1>참고<a href=#참고-1 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<ul>
<li><a href=https://ujuc.github.io/2015/12/16/git-flow-github-flow-gitlab-flow/ target=_blank rel="noopener noreferrer">Git flow, GitHub flow, GitLab flow</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=was-세팅-및-튜닝>WAS 세팅 및 튜닝<a href=#was-세팅-및-튜닝 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=프론트앤드>프론트앤드<a href=#프론트앤드 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=virtual-dom>Virtual DOM<a href=#virtual-dom class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-text codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-text codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">DOM 조작의 실제 문제는 각 조작이 레이아웃 변화, 트리 변화와 렌더링을 일으킨다는겁니다.</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Virtual DOM 은 변화가 일어나면 그걸 오프라인 DOM 트리에 적용시키죠. 이 DOM 트리는 렌더링도 되지 않기때문에 연산 비용이 적어요. 연산이 끝나고나면 그 최종적인 변화를 실제 DOM 에 던져주는거에요. 딱 한번만 한는거에요.</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">사실, 이 과정은 Virtual DOM 이 없이도 이뤄질수 있어요. 그냥, 변화가 있을 때, 그 변화를 묶어서 DOM fragment 에 적용한 다음에 기존 DOM 에 던져주면 돼요.</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">그러면, Virtual DOM 이 해결 하려고 하는건 무엇이냐? 그 DOM fragment를 관리하는 과정을 수동으로 하나하나 작업 할 필요 없이, 자동화하고 추상화하는거에요. 그 뿐만 아니라, 만약에 이 작업을 여러분들이 직접 한다면, 기존 값 중 어떤게 바뀌었고 어떤게 바뀌지 않았는지 계속 파악하고 있어야하는데 (그렇지 않으면 수정 할 필요가 없는 DOM 트리도 업데이트를 하게 될 수도 있으니까요), 이것도 Virtual DOM 이 이걸 자동으로 해주는거에요. 어떤게 바뀌었는지 , 어떤게 바뀌지 않았는지 알아내주죠.</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">마지막으로, DOM 관리를 Virtual DOM 이 하도록 함으로써, 컴포넌트가 DOM 조작 요청을 할 때 다른 컴포넌트들과 상호작용을 하지 않아도 되고, 특정 DOM 을 조작할 것 이라던지, 이미 조작했다던지에 대한 정보를 공유 할 필요가 없습니다. 즉, 각 변화들의 동기화 작업을 거치지 않으면서도 모든 작업을 하나로 묶어줄 수 있다는거죠.</span><br></span></code></pre></div></div>
<p><a href=https://velopert.com/3236 target=_blank rel="noopener noreferrer">출처</a></p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=es6>ES6<a href=#es6 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=seo>SEO<a href=#seo class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=angular>Angular<a href=#angular class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=react>React<a href=#react class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=vue>Vue<a href=#vue class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/interview/>interview</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2018/01/09/Window에서-aws-cli-사용시-bad-interperter-오류/>Window에서 aws cli 사용시 bad interperter 오류</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2018-01-09T12:10:59.000Z>January 9, 2018</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><p>git bash에서 aws cli 명령어를 실행시에 c:\Program Files... bad interpreter 오류가 나오면서 실행이 안 될 때는 다음과 같이 하면 된다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=해결>해결<a href=#해결 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><strong>~/.bash_profile</strong> 에 aws alias를 추가한다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token function" style=color:#d73a49>vi</span><span class="token plain"> ~/.bash_profile</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>## aws script 경로를 강제로 지정한다</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style=color:#36acaa>aws</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>'python "C:\Program Files\Python\Scripts\aws"'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>## 추가 후 저장</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token builtin class-name">source</span><span class="token plain"> ~/.bash_profile</span><br></span></code></pre></div></div></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/windows/>windows</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/aws/>aws</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2018/01/05/Cloudfront-캐시-지우기/>Cloudfront 캐시 지우기</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2018-01-05T13:41:12.000Z>January 5, 2018</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><p>클라우드프론트로 static website hosting 을 할 경우에 삭제된 s3 의 파일이 노출되는 경우가 있다.
캐싱처리되어서 보이는 현상인데 다음과 같이 해결하면 된다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=해결>해결<a href=#해결 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><strong>Invalidate</strong> 기능을 사용해서 캐시를 지워버리자.
<strong>Cloudfront Distributions > ID 클릭 > Invalidations</strong> 에서 <strong>Create Invalidation</strong> 버튼을 누른다.</p>
<p><img decoding=async loading=lazy src=https://i.imgur.com/qFe6hKj.png alt="image from hexo" class=img_f7zd></p>
<p><strong>Object Paths</strong>에 캐시를 지울 경로를 입력한다.
예를 들어 assets/js 하위의 소스 맵 파일만 지운다면 다음과 같다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">/assets/js/*.map</span><br></span></code></pre></div></div>
<p>입력 후에 <strong>Invalidate</strong> 버튼을 누르면 5~10 분 안에 리스트의 Status 가 Completed 로 변하고 기존 캐시가 사라진다.</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/aws/>aws</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2018/01/04/pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류/>pm2 앱에서 git hook시에 nginx 502 gateway timeout 오류</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2018-01-04T10:19:13.000Z>January 4, 2018</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_IhMp" id=원인>원인<a href=#원인 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>git pull을 hook으로 실행하는데 계속 nginx 502 gateway timeout 오류가 발생해 <code>pm2 logs 앱</code> 또는 <code>nginx log</code>를 계속 추적해도 별다른 에러 로그가 없었다. (<code>exec: Internal Server error</code> 라고만 적혀있었다.)</p>
<p>삽질 끝에 watch 속성을 사용하고 있는게 문제였다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=해결>해결<a href=#해결 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>ecosystem.config.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">module</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>apps</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>name</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"server"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>script</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"server.js"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>env_production</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token constant" style=color:#36acaa>NODE_ENV</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"production"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>watch</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>ignore_watch</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"node_modules"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>".git"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"yarn.lock"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"package-lock.json"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>exec_mode</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"cluster"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>instances</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"max"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p><strong>ignore_watch</strong> 속성에 <strong>.git</strong> 폴더와 다른 폴더들이 제대로 예외처리 되었는지 확인해보자.</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/nodejs/>nodejs</a><li class=tag_wI6s><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_DbKY tagRegular_rujD" href=/en/tags/javascript/>javascript</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/pm-2/>pm2</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/nginx/>nginx</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2018/01/03/nginx-letsencrypt-fastest-way/>nginx에 letsencrypt 인증서로 https 가장 빨리 적용하기</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2018-01-03T13:29:33.000Z>January 3, 2018</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><blockquote>
<p>centos7 기준</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=nginx-설치>nginx 설치<a href=#nginx-설치 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token function" style=color:#d73a49>vi</span><span class="token plain"> /etc/yum.repos.d/nginx.repo</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">nginx</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>name</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">nginx repo</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>baseurl</span><span class="token operator" style=color:#393A34>=</span><span class="token plain">http://nginx.org/packages/centos/7/</span><span class="token variable" style=color:#36acaa>$basearch</span><span class="token plain">/</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>gpgcheck</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>enabled</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ yum makecache</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ yum </span><span class="token function" style=color:#d73a49>install</span><span class="token plain"> </span><span class="token parameter variable" style=color:#36acaa>-y</span><span class="token plain"> nginx</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token function" style=color:#d73a49>vi</span><span class="token plain"> /etc/nginx/conf.d/default.conf</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>## server_name에 도메인 연결</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>## 문법 체크</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ nginx </span><span class="token parameter variable" style=color:#36acaa>-t</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>## nginx 시작</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> nginx</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ systemctl start nginx</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=certbot-설치>certbot 설치<a href=#certbot-설치 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">$ yum </span><span class="token function" style=color:#d73a49>install</span><span class="token plain"> </span><span class="token parameter variable" style=color:#36acaa>-y</span><span class="token plain"> epel-release</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ yum </span><span class="token function" style=color:#d73a49>install</span><span class="token plain"> </span><span class="token parameter variable" style=color:#36acaa>-y</span><span class="token plain"> certbot-nginx</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>## 인증</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ certbot </span><span class="token parameter variable" style=color:#36acaa>--nginx</span><span class="token plain"> </span><span class="token parameter variable" style=color:#36acaa>-d</span><span class="token plain"> my.domain.com</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=ssl-nginx-설정>ssl nginx 설정<a href=#ssl-nginx-설정 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><a href=/en/2017/06/10/CentOS7-LEMP-Stack-적용/#nginx-%EC%97%B0%EB%8F%99>기존 포스트</a> nginx 연동 탭 참조</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=renew-설정>renew 설정<a href=#renew-설정 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token function" style=color:#d73a49>crontab</span><span class="token plain"> </span><span class="token parameter variable" style=color:#36acaa>-e</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token number" style=color:#36acaa>1</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"> * * certbot renew </span><span class="token parameter variable" style=color:#36acaa>--nginx</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ systemctl restart crond</span><br></span></code></pre></div></div>
<p><code>systemctl restart nginx</code> 하면 완료</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/linux/>linux</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/nginx/>nginx</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/letsencrypt/>letsencrypt</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2018/01/01/react-native-windows-network-setting/>리액트 네이티브 윈도우 네트워크 설정 (react-native)</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2018-01-01T23:50:31.000Z>January 1, 2018</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><p>리액트 네이티브로 개발한 앱을 <code>Expo</code>로 구동 중 <code>network response timed out</code> 에러 메세지가 보인다면 다음과 같이 해결하면 된다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=방화벽>방화벽<a href=#방화벽 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>인바운드로 19000, 19001 포트를 열어줘야한다.
<strong>방화벽 > 고급 설정 > 인바운드 규칙 > 새 규칙 > 포트</strong> 에서 아래와 같이 설정해주고 이름은 <code>react-native-expo</code> 등 원하는 이름으로 규칙을 생성하자.</p>
<p><img decoding=async loading=lazy src=https://i.imgur.com/fQkG1tn.png alt="image from hexo" class=img_f7zd></p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=hostname-설정>Hostname 설정<a href=#hostname-설정 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=아이피-확인>아이피 확인<a href=#아이피-확인 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>ipconfig로 현재 Wifi가 설정된 내부 아이피 주소를 확인한다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">무선 LAN 어댑터 Wi-Fi:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  연결별 DNS 접미사. </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  링크-로컬 IPv6 주소 </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  IPv4 주소 </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>192.168</span><span class="token plain">.0.7</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  서브넷 마스크 </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>255.255</span><span class="token plain">.255.0</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  기본 게이트웨이 </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>192.168</span><span class="token plain">.0.1</span><br></span></code></pre></div></div>
<p><strong>192.168.0.7</strong> 을 기억해 놓자.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=설정-추가>설정 추가<a href=#설정-추가 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p><code>REACT_NATIVE_PACKAGER_HOSTNAME</code> 환경 변수를 설정해줘야한다.</p>
<p>Git Bash 환경에서는 다음과 같다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style=color:#36acaa>REACT_NATIVE_PACKAGER_HOSTNAME</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>192.168</span><span class="token plain">.0.7</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=실행>실행<a href=#실행 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><code>yarn start</code> 후에 Expo 앱으로 QRCode를 찍으면 정상적으로 실행이 가능하다.</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/react/>react</a><li class=tag_wI6s><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_DbKY tagRegular_rujD" href=/en/tags/javascript/>javascript</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2017/12/27/utf8-charset에서-emoji-필터링/>utf8 charset에서 emoji 필터링하기</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2017-12-27T13:05:20.000Z>December 27, 2017</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_IhMp" id=개요>개요<a href=#개요 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>utf8 charset 에서는 이모지를 처리할 수 없다.
<a href=https://blog.lael.be/post/917 target=_blank rel="noopener noreferrer">utf8mb4 언어셋 소개 및 표현범위</a> 포스팅에 따르면 이모지가 mysql 또는 maria 의 utf8 셋의 가변공간을 사용하려 들려 하는 문제인데, utf8mb4 셋으로 변경하면 해결 된다.</p>
<p>mysql 이거나 maria 의 charset 을 변경하기 힘들 때 text 를 모두 replace 치면 된다. 시작해보자</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=php>php<a href=#php class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><a href=https://stackoverflow.com/questions/12807176/php-writing-a-simple-removeemoji-function target=_blank rel="noopener noreferrer">writing a simple removeEmoji function</a> stackoverflow 글에 좋은 함수가 있다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=소스>소스<a href=#소스 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-php codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-php codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token delimiter important">&lt;?php</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// https://stackoverflow.com/questions/12807176/php-writing-a-simple-removeemoji-function</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function-definition function" style=color:#d73a49>removeEmoji</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string double-quoted-string" style=color:#e3116c>""</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Match Emoticons</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexEmoticons</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F600}-\x{1F64F}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexEmoticons</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Match Miscellaneous Symbols and Pictographs</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexSymbols</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F300}-\x{1F5FF}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexSymbols</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Match Transport And Map Symbols</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexTransport</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F680}-\x{1F6FF}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexTransport</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Match Miscellaneous Symbols</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexMisc</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{2600}-\x{26FF}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexMisc</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Match Dingbats</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{2700}-\x{27BF}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Match Flags</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F1E6}-\x{1F1FF}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Others</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F910}-\x{1F95E}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F980}-\x{1F991}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F9C0}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'/[\x{1F9F9}]/u'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>preg_replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$regexDingbats</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>''</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$clean_text</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<div class="language-php codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-php codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token delimiter important">&lt;?php</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>$textWithEmoji</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string single-quoted-string" style=color:#e3116c>'thumbs up👍👍'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token variable" style=color:#36acaa>$text</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>removeEmoji</span><span class="token punctuation" style=color:#393A34>(</span><span class="token variable" style=color:#36acaa>$textWithEmoji</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// text => thumbs up</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=node>node<a href=#node class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><a href=https://github.com/mathiasbynens/emoji-regex target=_blank rel="noopener noreferrer">emoji-regex</a> 라이브러리를 쓰면 된다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>yarn</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>add</span><span class="token plain"> emoji-regex</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=소스-1>소스<a href=#소스-1 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> emojiRegex </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>require</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"emoji-regex"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// const regex = emojiRegex()</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> textWithEmoji </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"thumbs up👍👍"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> text </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> textWithEmoji</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>replace</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>emojiRegex</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>""</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// text => thumbs up</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=여담>여담<a href=#여담 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>이모지처리 (붙히고 제거하고), linkify 를 합친 통합 모듈이 있다면 다운로드 수가 좀 될 것 같은데.</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/php/>php</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/nodejs/>nodejs</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/mariadb/>mariadb</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/mysql/>mysql</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2017/12/26/Docker로-Swagger-설치-후-테마-설정하기/>Docker로 스웨거 설치 후 테마 설정하기 (swagger)</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2017-12-26T22:03:44.000Z>December 26, 2017</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><p><a href=https://hub.docker.com/r/swaggerapi/swagger-ui/ target=_blank rel="noopener noreferrer">Swagger UI</a>와 <a href=https://hub.docker.com/r/swaggerapi/swagger-editor/ target=_blank rel="noopener noreferrer">Swagger Editor</a>를 Docker 로 띄워서 빠르게 사용해보자.
<a href=https://swaggerhub.com/ target=_blank rel="noopener noreferrer">Swagger Hub</a>에서 작업하는건 한글 입력이 잘 되지 않는 경우가 있었고 <a href=https://github.com/OAI/OpenAPI-Specification target=_blank rel="noopener noreferrer">OAS3</a>를 사용할 겸 설치하는 게 편하다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=설치>설치<a href=#설치 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>설치는 서버 하나만 있으면 충분하다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=editor>Editor<a href=#editor class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token function" style=color:#d73a49>docker</span><span class="token plain"> run </span><span class="token parameter variable" style=color:#36acaa>-d</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>-p</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>7000</span><span class="token plain">:8080 </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>--restart</span><span class="token plain"> always </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>--name</span><span class="token plain"> swagger-editor </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    swaggerapi/swagger-editor</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=ui>UI<a href=#ui class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>UI 에서는 API 문서를 상대경로로 사용하기 위해 볼륨 마운트를 했다.
<em>Docker for Windows</em>에서 c 드라이브를 마운트하기 위해서는 아래처럼 <code>//c/path</code> 로 접근하면 된다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">$ </span><span class="token function" style=color:#d73a49>docker</span><span class="token plain"> run </span><span class="token parameter variable" style=color:#36acaa>-d</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>-p</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>9010</span><span class="token plain">:8080 </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>-v</span><span class="token plain"> //c/swagger-spec:/usr/share/nginx/html/spec </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>--restart</span><span class="token plain"> always </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token parameter variable" style=color:#36acaa>--name</span><span class="token plain"> swagger-ui </span><span class="token punctuation" style=color:#393A34>\</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    swaggerapi/swagger-ui</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=테마-추가>테마 추가<a href=#테마-추가 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>테마는 <a href=https://github.com/ostranme/swagger-ui-themes target=_blank rel="noopener noreferrer">나이스한 라이브러리</a>를 사용하자.
두 컨테이너 모두 <code>/usr/share/nginx/html/</code> 경로의 <code>index.html</code>을 열어 head 안에 넣어주면 된다.</p>
<p><code>docker exec</code>로 쉘에 접근하는 건 다 하시리라 믿고 다만, 컨테이너에 bash 쉘이 없기에 기본 sh 쉘로 접근하면 된다.</p>
<div class="language-html codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>index.html</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-html codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>link</span><span class="token tag" style=color:#00009f></span><br></span><span class=token-line style=color:#393A34><span class="token tag" style=color:#00009f>  </span><span class="token tag attr-name" style=color:#00a4db>rel</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>stylesheet</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f></span><br></span><span class=token-line style=color:#393A34><span class="token tag" style=color:#00009f>  </span><span class="token tag attr-name" style=color:#00a4db>href</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>https://unpkg.com/swagger-ui-themes@3.0.0/themes/3.x/theme-material.css</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f></span><br></span><span class=token-line style=color:#393A34><span class="token tag" style=color:#00009f></span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=여담>여담<a href=#여담 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>스웨거에 side menu 가 있는 버전이나 라이브러리가 있으면 좋을텐데, 누가 만들었을 것 같은데 아직 못 찾았다.</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/swagger/>swagger</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/docker/>docker</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2017/12/22/PWA-ServiceWorker-Web-Caching/>PWA - 서비스 워커 웹 캐싱 (Web Caching)</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2017-12-22T20:53:41.000Z>December 22, 2017</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_IhMp" id=개요>개요<a href=#개요 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>Progressive Web App의 시대가 왔다.
Client단에서 모든 static 파일을 브라우저에 캐시를 할 수 있고 <strong>웹을 앱처럼 오프라인</strong>에서 작업하게 할 수 있다.
그 첫번째로 캐싱에 대해 알아보자.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=준비>준비<a href=#준비 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>Promise, Fetch, Worker 및 Javascript 의 실행 구조, DOM 에 대한 사전지식이 필히 있어야 한다.
HTTP Cache 를 걸어봤다면 이해가 쉬울 듯 싶다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=serviceworker>ServiceWorker<a href=#serviceworker class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>서비스 워커는 <strong>브라우저가 백그라운드에서 실행하는 스크립트</strong>이며, <strong>클라이언트에 설치되는 프록시</strong>다.
이 개념은 중요해서 외워야한다. <strong>브라우저 백그라운드에서 네트워크를 가로채는 Thread</strong> 라고 보면 된다.</p>
<p>웹 캐싱 뿐만 아니라 백그라운드 동기화, 웹 푸쉬 등의 기능을 처리할 수 있다. 궁금하다면 <a href=https://serviceworke.rs/ target=_blank rel="noopener noreferrer">여기</a>를 들어가보자. (포스팅을 다 읽고 들어가보는 걸 추천한다.)</p>
<p>웹 캐싱은 <a href=https://developer.mozilla.org/ko/docs/Web/API/CacheStorage target=_blank rel="noopener noreferrer">CacheStorage</a>를 사용한다. Sqlite 같은 클라이언트 데이터베이스인데, Key<!-- -->:value<!-- --> 로 구성된 데이터베이스라고 보면 된다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=주의>주의<a href=#주의 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<blockquote>
<p>https 환경 또는 localhost 도메인에서만 이 기능을 사용할 수 있다.</p>
</blockquote>
<p>브라우저별 지원상황은 <a href=https://jakearchibald.github.io/isserviceworkerready/#service-worker-enthusiasm target=_blank rel="noopener noreferrer">다음</a>과 같다 1803기준 Safari에도 Shipped가 되었다!
<del>1712 기준 Safari가 아직도 Developement 상태인게 조금 아쉽다</del></p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=세팅>세팅<a href=#세팅 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><code>sw.js</code>란 파일을 <code>public</code>폴더(index.html이 있는)에 생성하자.
그리고 메인 script파일에 다음과 같이 service-worker를 불러오는 구문을 추가한다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// navigator (브라우저)에 serviceWorker 기능이 있는지 확인</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"serviceWorker"</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>in</span><span class="token plain"> </span><span class="token dom variable" style=color:#36acaa>navigator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 서비스워커 설치시 DOM 블로킹을 막아준다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token dom variable" style=color:#36acaa>window</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"load"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// 서비스워커를 register 하면 promise를 반환한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token dom variable" style=color:#36acaa>navigator</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">serviceWorker</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>register</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/sw.js"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"서비스 워커가 등록되었다."</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>개발자도구를 열고 <strong>Application > ServiceWorkers</strong> 탭으로 가면 설치가 된 것을 확인할 수 있다.</p>
<p><img decoding=async loading=lazy src=https://i.imgur.com/zE1BefE.png alt="image from hexo" class=img_f7zd></p>
<p>이렇게 뜨면 설치된 것이다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=basic>Basic<a href=#basic class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>서비스워커에서는 <code>self</code> 키워드로 자기 자신을 접근할 수 있다. 몇 가지 static 파일들을 캐싱처리 해보자.
모던 브라우저에서만 지원이 되므로 <code>arrow function</code>을 사용해도 된다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>sw.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>PRE_CACHE_NAME</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"캐시-스토리지1"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// 캐시하고 싶은 리소스</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> urlsToCache </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token string" style=color:#e3116c>"/public/image/image1.png"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token string" style=color:#e3116c>"/public/css/font-awesome.min.css"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// 서비스워커가 설치될 때</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"install"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시 등록 이벤트가 끝날 때까지 기다려</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>waitUntil</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// '캐시-스토리지1'을 연다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// @return {Promise} 연결된 Cache Database를 반환한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    caches</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>open</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>PRE_CACHE_NAME</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">cache</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"캐시 디비와 연결됨"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// addAll 메소드로 내가 캐싱할 리소스를 다 넣어주자.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> cache</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addAll</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">urlsToCache</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 설치 후에 바로 활성화 단계로 들어갈 수 있게 해준다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>skipWaiting</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p>이렇게 추가해주고 개발자도구의 Application 탭으로 가서 좌측 메뉴의 <strong>Cache Storage</strong> 를 새로고침 하면 방금 추가한 <strong>캐시-스토리지1</strong>에 내 이미지와 css가 등록된 걸 확인할 수 있다.</p>
<p>그리고 개발자도구의 Network 탭에서 호출하는 이미지의 size에 **(from ServiceWorker)**가 보인다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=intermediate>Intermediate<a href=#intermediate class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>내용이 업데이트 되야하는 페이지나 리소스에 대해서는 동적으로 캐싱 처리를 해야한다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=dynamic-caching>Dynamic caching<a href=#dynamic-caching class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>sw.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>DYNAMIC_CACHE_NAME</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"다이나믹-캐시-스토리지1"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// fetch event는 어딘가에서 리소스를 가져올 때 모두 실행된다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// js를 가져오거나 이미지를 가져오거나 페이지를 가져오거나 등등</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"fetch"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>respondWith</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>match</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시에 있으면 repsonse를 그대로 돌려준다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 여기서 request를 복사해준다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// request는 스트림으로 fetch 당 한 번만 사용해야하기 때문이다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 근데 event.request로 받아도 실행은 된다</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> fetchRequest </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>clone</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// if (response) return response 구문을 하나로 합칠 수도 있다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// return response || fetch(fetchRequest)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>fetch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fetchRequest</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 응답이 제대로 왔는지 체크한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 구글 문서에는 다음과 같이 처리하라고 되어있는데</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 이 경우 Cross Site Request에 대해 캐싱 처리를 할 수가 없다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// if(!response || response.status !== 200 || response.type !== 'basic') {</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 응답은 꼭 복사 해줘야한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> responseToCache </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>clone</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시 스토리지를 열고 정말 캐싱을 해준다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>open</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>DYNAMIC_CACHE_NAME</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">cache</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          cache</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>put</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> responseToCache</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 여기서 response를 내보내줘야 캐싱 처리 후에 리소스를 반환한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=오래된-캐시-삭제>오래된 캐시 삭제<a href=#오래된-캐시-삭제 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>캐시 스토리지명을 바꿔 캐시의 버전을 올리면 기존 캐시 스토리지는 삭제해줘야한다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>sw.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// 서비스 워커가 활성화 될 때</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"activate"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 영구적으로 가져갈 캐시 스트리지 화이트리스트</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> cacheWhiteList </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token constant" style=color:#36acaa>PRE_CACHE_NAME</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>DYNAMIC_CACHE_NAME</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>waitUntil</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시 스토리지의 모든 스토리지명을 가져온다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>keys</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">cacheNames</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시를 삭제하는 건 Promise를 반환하므로 Promise.all을 사용해 끝날 시점을 잡아야한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>all</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 이 결과는 [Promise, Promise...] 형태가 되시겠다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        cacheNames</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>map</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">cacheName</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token comment" style=color:#999988;font-style:italic>// 각각의 캐시 스토리지명이 화이트 리스트와 같지 않을 경우</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cacheWhitelist</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>indexOf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cacheName</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>===</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시를 삭제하는 Promise를 배열에 추가한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>delete</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">cacheName</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// activate 시에는 clients claim 메소드를 호출해서</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 브라우저에 대한 제어권을 가져와야한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">clients</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>claim</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p>결과적으로 <code>DYNAMIC_CACHE_NAME</code>이 아닌 캐시 스토리지는 삭제된다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=offline-fallback>offline fallback<a href=#offline-fallback class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>캐시된 페이지와 리소스는 오프라인에서도 접근이 가능하다.
여기서 오류가 발생하면 offline.html 같은 페이지로 떨어지게 할 수 있다. (마치 404 오류 페이지처럼)</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>sw.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"fetch"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>respondWith</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    caches</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>match</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>.</span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 에러 발생시 캐시되어있는 offline.html로 이동시킨다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>open</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>CACHE_NAME</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">cache</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token comment" style=color:#999988;font-style:italic>// 들어온 요청의 Accept 헤더가 text/html 을 포함하고 있다면 (페이지 요청이라면)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">headers</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"accept"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>includes</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"text/html"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시된 offline fallback 페이지를 보여준다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> cache</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>match</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"/offline.html"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=advanced>Advanced<a href=#advanced class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>서비스워커에 static, dynamic cache를 첨가했는데 소스가 너무 지저분하다.
직관적으로 만들어보자.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=리팩토링>리팩토링<a href=#리팩토링 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>sw.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>STATIC_CACHE_NAME</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"STATIC_CACHE_VERSION_1"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>DYNAMIC_CACHE_NAME</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"DYNAMIC_CACHE_VERSION_1"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>WEB_CACHE</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>init</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"install"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>staticCacheStrategy</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>bind</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"activate"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>deleteOldCache</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>bind</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      self</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>addEventListener</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"fetch"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>dynamicCacheStrategy</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>bind</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>staticCacheStrategy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 스태틱 캐싱</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>deleteOldCache</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 캐시 삭제</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>dynamicCacheStrategy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 다이나믹 캐싱</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token constant" style=color:#36acaa>WEB_CACHE</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>init</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p>IIFE를 사용해 좀 더 예쁘게 변했다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=cross-domain-request>cross domain request<a href=#cross-domain-request class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>서비스워커에서 fetch로 외부 리소스를 가지고오면 <code>opaque</code> response가 반환된다.
cors 정책이 설정되어 있지 않아 아무 정보도 가지고 올 수 없는 건데, 이런 리소스만 골라서 캐싱처리를 하고 싶다면 request url이나 response content-type을 가지고 처리할 수 있다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>sw.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>dynamicCacheStrategy</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// 캐싱 처리하고 싶은 content-type</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> cacheContentsTypes </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"image/png"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"image/gif"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"image/jpeg"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"application/font-woff"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>respondWith</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>match</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> fetchRequest </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>clone</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        response </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token function" style=color:#d73a49>fetch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fetchRequest</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">response</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token comment" style=color:#999988;font-style:italic>// response header에서 content-type을 가져와 비교한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token comment" style=color:#999988;font-style:italic>// 아니면 request.url이 캐싱처리를 할 외부 url인지 확인한다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              cacheContentsTypes</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>indexOf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                response</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">headers</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"content-type"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!==</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token number" style=color:#36acaa>1</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">url</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>indexOf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"external.url"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!==</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              caches</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>open</span><span class="token punctuation" style=color:#393A34>(</span><span class="token constant" style=color:#36acaa>DYNAMIC_CACHE_NAME</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>then</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">cache</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                cache</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>put</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>clone</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token punctuation" style=color:#393A34>.</span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=workbox>WorkBox<a href=#workbox class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>이제 클라이언트 캐시가 어떻게 돌아가는지 확인했으니 구글에서 만든 <a href=https://developers.google.com/web/tools/workbox/ target=_blank rel="noopener noreferrer">멋진 라이브러리</a>를 사용해보자.</p>
<p>간결하고 직관적인 문법으로 위의 구문들을 예쁘게 만들 수 있다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=stratergy>Stratergy<a href=#stratergy class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>그 전에 캐싱 전략을 알아야한다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=cachefirst>cacheFirst<a href=#cachefirst class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><img decoding=async loading=lazy src=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-falling-back-to-network.png alt="image from hexo" class=img_f7zd></p>
<p>캐시부터 요청하고 네트워크를 접근해 리소스를 보여준다.</p>
<blockquote>
<p>오프라인을 우선적으로 보여주는 페이지에 적합하다.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=cacheonly>cacheOnly<a href=#cacheonly class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><img decoding=async loading=lazy src=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-cache-only.png alt="image from hexo" class=img_f7zd></p>
<p>캐시에서만 가져온다.</p>
<blockquote>
<p>static file들이 여기에 해당된다.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=networkfirst>networkFirst<a href=#networkfirst class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><img decoding=async loading=lazy src=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-network-falling-back-to-cache.png alt="image from hexo" class=img_f7zd></p>
<p>네트워크를 먼저 접근하고 오프라인일 경우 캐시를 가져온다.
이 방법은 연결이 원활하지 않거나 느린 경우 네트워크가 실패할 때까지 기다린 뒤 리소스가 보여지므로 UX에 좋지 않을 수 있다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=networkonly>networkOnly<a href=#networkonly class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><img decoding=async loading=lazy src=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-network-only.png alt="image from hexo" class=img_f7zd></p>
<p>캐시가 필요없는 GET 메소드가 아닌 다른 메소드가 주로 여기에 해당된다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=stalewhilerevalidate>staleWhileRevalidate<a href=#stalewhilerevalidate class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><img decoding=async loading=lazy src=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/cm-stale-while-revalidate.png alt="image from hexo" class=img_f7zd></p>
<p>이 방식은 그림을 보고 이해하는게 빠르다.
캐시를 먼저 가져오고 다음 요청은 네트워크에서 요청된 리소스의 캐시를 반환한다.</p>
<blockquote>
<p>주로 이 방식이 사용된다.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=cache-then-network>Cache then network<a href=#cache-then-network class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><img decoding=async loading=lazy src=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-cache-then-network.png alt="image from hexo" class=img_f7zd></p>
<p>페이지가 두 개의 요청(캐시에 요청, 네트워크에 요청)을 동시에 하고 캐시된 데이터를 먼저 표시한 다음 네트워크 데이터가 도착하면 페이지를 업데이트를 한다.
WorkBox에는 없는 strategy인데 networkFirst보다 UX상 좋다고 한다.</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=설치>설치<a href=#설치 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>ServiceWorker에서는 라우팅 기능을 사용하기 위해 구글 CDN에서 제공하는 스크립트를 사용하고
Pre-Cache를 정의하기 위해 로컬에서 <code>workbox-cli</code>를 추가해야한다.</p>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=importscript>importScript<a href=#importscript class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p><a href=https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/importScripts target=_blank rel="noopener noreferrer">importScript</a>는 ServiceWorker 파일에서만 사용가능한 구문으로 <code>import</code>나 <code>require</code>와 같다고 보면 된다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>importScripts</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token string" style=color:#e3116c>"https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=workbox-cli>workbox-cli<a href=#workbox-cli class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>yarn</span><span class="token plain"> global </span><span class="token function" style=color:#d73a49>add</span><span class="token plain"> workbox-cli</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=메소드>메소드<a href=#메소드 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=precache>precache<a href=#precache class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>프리캐시는 정적 자원들을 미리 캐싱처리해서 <strong>Cache Only Stratergy</strong>를 사용하는 것이다.
주로 이미지나 css, vendor-js 등을 여기에 담아준다.</p>
<p>workbox-cli를 설치하고 wizard 명령어를 실행하면 <a href=https://developers.google.com/web/tools/workbox/modules/workbox-cli#configuration target=_blank rel="noopener noreferrer">config 파일</a>이 생성된다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">workbox wizard</span><br></span></code></pre></div></div>
<p>설정을 입맛에 맞게 변경해주고 pre-cache할 파일 목록을 생성해주는 명령어를 실행하자</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">workbox injectManifest config.js</span><br></span></code></pre></div></div>
<p>ServiceWorker에 <code>workbox.precaching.precacheAndRoute([])</code> 구문이 있다면 목록이 들어가 있는 걸 확인할 수 있다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">precaching</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>precacheAndRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>url</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"css/fonts/fontawesome/fontawesome-webfont.eot"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>revision</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"674f50d287a8c48dc19ba404d20fe713"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>//...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=routing>Routing<a href=#routing class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>WorkBox를 사용하는 이유는 바로 이 라우팅에 있다.
위에서 많은 양의 라우팅 분기 코드로 캐싱을 처리했는데 WorkBox는 다음과 같이 간결해진다.
아래는 이 블로그에 사용하고 있는 코드이다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>importScripts</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token string" style=color:#e3116c>"https://storage.googleapis.com/workbox-cdn/releases/3.4.1/workbox-sw.js"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// importScripts 후 타이밍 차이로 인해 모듈을 못 불러오는 경우를 방지하기 위해</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// 캐싱 정책 모듈 로드를 기다린다.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>loadModule</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"workbox-strategies"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>skipWaiting</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>clientsClaim</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// accept 헤더에 text/html 값이 있으면 (html 페이지 요청일 경우)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// networkFirst 캐싱</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">routing</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>registerRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">routeData</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> routeData</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">request</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">headers</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"accept"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>includes</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"text/html"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">strategies</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>networkFirst</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// imgur 요청일 경우 cacheFirst 캐싱</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">routing</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>registerRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token regex regex-delimiter" style=color:#36acaa>/</span><span class="token regex regex-source language-regex char-set class-name" style=color:#36acaa>.</span><span class="token regex regex-source language-regex quantifier number" style=color:#36acaa>*</span><span class="token regex regex-source language-regex group punctuation" style=color:#393A34>(?:</span><span class="token regex regex-source language-regex" style=color:#36acaa>imgur</span><span class="token regex regex-source language-regex group punctuation" style=color:#393A34>)</span><span class="token regex regex-source language-regex special-escape escape" style=color:#36acaa>\.</span><span class="token regex regex-source language-regex" style=color:#36acaa>com</span><span class="token regex regex-source language-regex char-set class-name" style=color:#36acaa>.</span><span class="token regex regex-source language-regex quantifier number" style=color:#36acaa>*</span><span class="token regex regex-source language-regex anchor function" style=color:#d73a49>$</span><span class="token regex regex-delimiter" style=color:#36acaa>/</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">strategies</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>cacheFirst</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// jsdelivr 요청일 경우 stateWhileRevalidate 캐싱</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">routing</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>registerRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token regex regex-delimiter" style=color:#36acaa>/</span><span class="token regex regex-source language-regex char-set class-name" style=color:#36acaa>.</span><span class="token regex regex-source language-regex quantifier number" style=color:#36acaa>*</span><span class="token regex regex-source language-regex group punctuation" style=color:#393A34>(?:</span><span class="token regex regex-source language-regex" style=color:#36acaa>jsdelivr</span><span class="token regex regex-source language-regex group punctuation" style=color:#393A34>)</span><span class="token regex regex-source language-regex special-escape escape" style=color:#36acaa>\.</span><span class="token regex regex-source language-regex" style=color:#36acaa>net</span><span class="token regex regex-source language-regex char-set class-name" style=color:#36acaa>.</span><span class="token regex regex-source language-regex quantifier number" style=color:#36acaa>*</span><span class="token regex regex-source language-regex anchor function" style=color:#d73a49>$</span><span class="token regex regex-delimiter" style=color:#36acaa>/</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">strategies</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>staleWhileRevalidate</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// bootcss 요청일 경우 stateWhileRevalidate 캐싱</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">routing</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>registerRoute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token regex regex-delimiter" style=color:#36acaa>/</span><span class="token regex regex-source language-regex char-set class-name" style=color:#36acaa>.</span><span class="token regex regex-source language-regex quantifier number" style=color:#36acaa>*</span><span class="token regex regex-source language-regex group punctuation" style=color:#393A34>(?:</span><span class="token regex regex-source language-regex" style=color:#36acaa>bootcss</span><span class="token regex regex-source language-regex group punctuation" style=color:#393A34>)</span><span class="token regex regex-source language-regex special-escape escape" style=color:#36acaa>\.</span><span class="token regex regex-source language-regex" style=color:#36acaa>com</span><span class="token regex regex-source language-regex char-set class-name" style=color:#36acaa>.</span><span class="token regex regex-source language-regex quantifier number" style=color:#36acaa>*</span><span class="token regex regex-source language-regex anchor function" style=color:#d73a49>$</span><span class="token regex regex-delimiter" style=color:#36acaa>/</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">strategies</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>staleWhileRevalidate</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p>코드가 너무 예뻐졌다. callback으로 Request의 모든 걸 캐치해 낼 수 있다.
더 구체적으로 쓰고 싶으면 <a href=https://developers.google.com/web/tools/workbox/guides/route-requests target=_blank rel="noopener noreferrer">문서</a>를 참조하자</p>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=부가-기능>부가 기능<a href=#부가-기능 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>이 기능 말고도 다음과 같은 멋진 기능을 사용할 수 있다, 하지만 언제 쯤 써볼 수 있을지..</p>
<ul>
<li><a href=https://developers.google.com/web/tools/workbox/modules/workbox-background-sync target=_blank rel="noopener noreferrer">backgroundSync</a> (오프라인이 되면 큐에 데이터를 넣고 연결될 시 서버에 전송)</li>
<li><a href=https://developers.google.com/web/tools/workbox/modules/workbox-broadcast-cache-update target=_blank rel="noopener noreferrer">broadcastUpdate</a> (postMessage를 사용하는 그 것 맞다)</li>
<li><a href=https://developers.google.com/web/tools/workbox/modules/workbox-cacheable-response target=_blank rel="noopener noreferrer">cacheableResponse</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_IhMp" id=offline-ga>offline GA<a href=#offline-ga class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>오프라인에서도 <a href=https://developers.google.com/web/tools/workbox/modules/workbox-google-analytics target=_blank rel="noopener noreferrer">Google Analytics</a> 를 사용할 수 있다.</p>
<p>한 줄의 코드만 삽입해주면 된다.</p>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token plain">workbox</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">googleAnalytics</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>initialize</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_IhMp" id=webpack>Webpack<a href=#webpack class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>웹팩에 <a href=https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin target=_blank rel="noopener noreferrer">WorkBox-Webpack-Plugin</a>을 붙힐 수 있는데 아직 도전을 안 해봤다. 후술할 sw-precache를 굳이 뺄 이유가 없고, 레퍼런스도 워낙 많기에..</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=sw-precache>sw-precache<a href=#sw-precache class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p><code>create-react-app</code>이나 <code>Vue-Cli</code>나 <code>@angular/cli</code> 모두 클라이언트 캐싱에 WorkBox 대신 이 라이브러리를 사용하고 있다. (WorkBox에서 캐싱기능만 떼어낸 라이브러리라고 보면 된다)</p>
<p>기본 설정을 굳이 안 건들여도 되고, <code>exact</code>해서 사용 중이라면 옵션을 <a href=https://github.com/GoogleChromeLabs/sw-precache target=_blank rel="noopener noreferrer">라이브러리</a>를 한 번 쯤 봐주는 것도 나쁘지 않다.</p>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=참고>참고<a href=#참고 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li><a href=https://developers.google.com/web/fundamentals/primers/service-workers/ target=_blank rel="noopener noreferrer">Google Web Fundementals Guides Base Technology</a></li>
<li><a href=https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/ target=_blank rel="noopener noreferrer">Google Web Fundamentals Offline cookbook</a></li>
<li><a href=https://developers.google.com/web/tools/workbox/reference-docs/latest/ target=_blank rel="noopener noreferrer">WorkBox Docs</a></li>
<li><a href=https://github.com/GoogleChrome/workbox target=_blank rel="noopener noreferrer">WorkBox</a></li>
<li><a href=https://github.com/GoogleChromeLabs/sw-precache target=_blank rel="noopener noreferrer">sw-precache</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=여담>여담<a href=#여담 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>기술 정리하는 건 시간이 너무 오래 걸린다.</li>
<li>Redis, eTag, Vanish, SW 까지 사용하면 성능상에 이점은 있겠지만 키를 어떻게 관리해야될지가 중요할 듯</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_DbKY tagRegular_rujD" href=/en/tags/javascript/>javascript</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/pwa/>pwa</a><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/serviceworker/>serviceworker</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_lZLA><a href=/en/2017/12/21/adonisjs-custom-log-format/>adonisjs 로그 포맷 변경하기 (custom log format)</a></h2><div class="container_cDO4 margin-vert--md"><time datetime=2017-12-21T15:25:45.000Z>December 21, 2017</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_FKwP"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_ofBO" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight></a><div class="avatar__intro authorDetails_t3Yw"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_HwLZ>Gracefullight</span></a></div><small class=authorTitle_ktHR title=Owner>Owner</small><div class=authorSocials_linN></div></div></div></div></div></header><div class=markdown><p>아도니스는 로깅 모듈로 winston 을 사용하는데 winston 은 로그를 json 포맷으로 출력하고 심지어 timezone 변수가 따로 나온다.</p>
<blockquote>
<p>로그는 기본적으로 프로젝트 폴더 하위의 <strong>tmp</strong> 폴더에 생성된다
이 폴더가 없으면 로깅이 되지 않으므로 먼저 만들어주자</p>
</blockquote>
<p>예를 들면 다음과 같다.</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"level"</span><span class="token builtin class-name">:</span><span class="token string" style=color:#e3116c>"info"</span><span class="token plain">,</span><span class="token string" style=color:#e3116c>"message"</span><span class="token builtin class-name">:</span><span class="token string" style=color:#e3116c>"serving app on http://127.0.0.1:3333"</span><span class="token plain">,</span><span class="token string" style=color:#e3116c>"timestamp"</span><span class="token builtin class-name">:</span><span class="token string" style=color:#e3116c>"2017-12-21T05:34:50.235Z"</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token string" style=color:#e3116c>"level"</span><span class="token builtin class-name">:</span><span class="token string" style=color:#e3116c>"info"</span><span class="token plain">,</span><span class="token string" style=color:#e3116c>"message"</span><span class="token builtin class-name">:</span><span class="token string" style=color:#e3116c>"serving app on http://127.0.0.1:3333"</span><span class="token plain">,</span><span class="token string" style=color:#e3116c>"timestamp"</span><span class="token builtin class-name">:</span><span class="token string" style=color:#e3116c>"2017-12-21T05:45:32.220Z"</span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>이걸 다음과 같이 바꿔보자</p>
<div class="language-bash codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-bash codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>2017</span><span class="token plain">-12-21 </span><span class="token number" style=color:#36acaa>15</span><span class="token plain">:01:03.506</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> INFO serving app on http://127.0.0.1:3333</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=수정>수정<a href=#수정 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<blockquote>
<p>오늘 날짜를 구하기 위해 <code>moment</code>를 먼저 설치하자.
<code>winston</code> 패키지는 <code>@adonisjs/framework</code> 패키지에 종속된다.</p>
</blockquote>
<div class="language-js codeBlockContainer_QFtC theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_oZDj>config/app.js</div><div class=codeBlockContent_vdmG><pre tabindex=0 class="prism-code language-js codeBlock_CpxK thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines__0Nl><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> moment </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"moment"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> config </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>use</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"winston"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">module</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>logger</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>transport</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"file"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>file</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>driver</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"file"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>name</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"adonis-app"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 파일명을 바꿔준다</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>filename</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>adonis_</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation function" style=color:#d73a49>moment</span><span class="token template-string interpolation punctuation" style=color:#393A34>(</span><span class="token template-string interpolation punctuation" style=color:#393A34>)</span><span class="token template-string interpolation punctuation" style=color:#393A34>.</span><span class="token template-string interpolation method function property-access" style=color:#d73a49>format</span><span class="token template-string interpolation punctuation" style=color:#393A34>(</span><span class="token template-string interpolation string" style=color:#e3116c>"YYYYMMDD"</span><span class="token template-string interpolation punctuation" style=color:#393A34>)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c>.log</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>level</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"debug"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// json 로그 포맷을 해제하고</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token literal-property property" style=color:#36acaa>json</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// 원하는 형태로 바꿔준다</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function-variable function" style=color:#d73a49>formatter</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter punctuation" style=color:#393A34>{</span><span class="token parameter"> level</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> message</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> meta </span><span class="token parameter punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> now </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>moment</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>format</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"YYYY-MM-DD HH:mm:ss.SSS"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// 로그 레벨에 색상을 추가하는 작업인데, 굳이 필요하진 않다</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> logLevel </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> config</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>colorize</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">level</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> level</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>toUpperCase</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> formattedMeta </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          meta </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>keys</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">meta</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>?</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"\n\t"</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>stringify</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">meta</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>""</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>[</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">now</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c>] </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">logLevel</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c> </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">message </span><span class="token template-string interpolation operator" style=color:#393A34>||</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style=color:#e3116c>""</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c> </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">formattedMeta</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_IhMp" id=버전>버전<a href=#버전 class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ul>
<li>@adonis/framework: 4.0.28</li>
<li>winston: 2.4.0</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_Vgw9 padding--none margin-left--sm"><li class=tag_wI6s><a rel=tag class="tag_DbKY tagRegular_rujD" href=/en/tags/nodejs/>nodejs</a><li class=tag_wI6s><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_DbKY tagRegular_rujD" href=/en/tags/javascript/>javascript</a></ul></div></footer></article><nav class=pagination-nav aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/page/63/><div class=pagination-nav__label>Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/page/65/><div class=pagination-nav__label>Older Entries</div></a></nav></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Support Me</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.buymeacoffee.com/LOUB2kN target=_blank rel="noopener noreferrer" style="cursor: pointer;">
                <img src=https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png style="height: auto !important;width: auto !important;">
              </a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Feeds</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://gracefullight.dev/rss.xml target=_blank rel="noopener noreferrer" class=footer__link-item>RSS<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_E7SL><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://gracefullight.dev/atom.xml target=_blank rel="noopener noreferrer" class=footer__link-item>Atom<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_E7SL><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2016 - 2023 Gracefullight. Built with Docusaurus.</div></div></div></footer></div>