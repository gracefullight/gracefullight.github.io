<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Blog | gracefullight.dev</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://gracefullight.dev/en/page/59/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true property=og:locale:alternate content=ko /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true content=gcY9SiftHgQoJjBZ7IgwNNN5_atLPAX6kWb1nFVfa6E name=google-site-verification /><meta data-rh=true content=65AD1E28C0D057CEB3C68FBC0293E55B name=msvalidate.01 /><meta data-rh=true content=d024c2837887f72dc7b3792b958be74d69ba9593 name=naver-site-verification /><meta data-rh=true content=f7c93483a6f87c79 name=yandex-verification /><meta data-rh=true content=yZEdU1ABcR name=baidu-site-verification /><meta data-rh=true content=uelupjqqsm5egzlhy1aev2rfxow5yt name=facebook-domain-verification /><meta data-rh=true property=og:title content="Blog | gracefullight.dev"/><meta data-rh=true name=description content=Blog /><meta data-rh=true property=og:description content=Blog /><meta data-rh=true name=docusaurus_tag content=blog_posts_list /><meta data-rh=true name=docsearch:docusaurus_tag content=blog_posts_list /><link data-rh=true rel=icon href=/en/img/favicon.ico /><link data-rh=true rel=canonical href=https://gracefullight.dev/en/page/59/ /><link data-rh=true rel=alternate href=https://gracefullight.dev/page/59/ hreflang=ko /><link data-rh=true rel=alternate href=https://gracefullight.dev/en/page/59/ hreflang=en /><link data-rh=true rel=alternate href=https://gracefullight.dev/page/59/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://RFS69RSYOJ-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://gracefullight.dev/en/page/59","@type":"Blog","blogPost":[{"@id":"https://gracefullight.dev/en/2023/06/25/atomic-state-management-with-valtio","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-06-25T07:45:45.480Z","description":"Shifting from Redux and Recoil to embracing Valtio for efficient state management.","headline":"Atom-based state management and Valtio","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/06/25/atomic-state-management-with-valtio","name":"Atom-based state management and Valtio","url":"https://gracefullight.dev/en/2023/06/25/atomic-state-management-with-valtio"},{"@id":"https://gracefullight.dev/en/2023/06/17/tech-retrospective","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-06-17T01:38:32.173Z","description":"A 10-year programmer's tech retrospective","headline":"A 10-year programmer's tech retrospective","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/06/17/tech-retrospective","name":"A 10-year programmer's tech retrospective","url":"https://gracefullight.dev/en/2023/06/17/tech-retrospective"},{"@id":"https://gracefullight.dev/en/2023/06/17/migrate-yarn-to-pnpm","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-06-16T23:42:13.449Z","description":"Exploring the limitations and issues of Yarn Berry while comparing and analyzing the superiority of Pnpm in package management.","headline":"Migrate from yarn to pnpm","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/06/17/migrate-yarn-to-pnpm","name":"Migrate from yarn to pnpm","url":"https://gracefullight.dev/en/2023/06/17/migrate-yarn-to-pnpm"},{"@id":"https://gracefullight.dev/en/2023/02/26/my-awesome-chatgpt","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-02-25T15:29:33.470Z","description":"Explore useful repositories for developers, including ChatGPT and other tools that can streamline your workflow and increase productivity.","headline":"My Awesome ChatGPT","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/02/26/my-awesome-chatgpt","name":"My Awesome ChatGPT","url":"https://gracefullight.dev/en/2023/02/26/my-awesome-chatgpt"},{"@id":"https://gracefullight.dev/en/2023/01/21/백년허리","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-01-21T10:29:08.768Z","description":"A review of the book \"백년허리\", which focuses on maintaining spinal hygiene and preventing disc damage","headline":"The durable back over a hundread years","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/01/21/백년허리","name":"The durable back over a hundread years","url":"https://gracefullight.dev/en/2023/01/21/백년허리"},{"@id":"https://gracefullight.dev/en/2023/01/19/chatgpt-use-case","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-01-19T13:44:09.237Z","description":"How to use ChatGPT for real-world applications beyond just coding","headline":"ChatGPT use cases","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/01/19/chatgpt-use-case","name":"ChatGPT use cases","url":"https://gracefullight.dev/en/2023/01/19/chatgpt-use-case"},{"@id":"https://gracefullight.dev/en/2023/01/10/migrate-blog-from-hexo-to-docu","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2023-01-10T14:26:34.674Z","description":"Migrating from Hexo to Docusaurus; Overview of benefits, troubleshooting tips for SEO and Site Verification.","headline":"Migrate a blog from hexo to docusaurus","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2023/01/10/migrate-blog-from-hexo-to-docu","name":"Migrate a blog from hexo to docusaurus","url":"https://gracefullight.dev/en/2023/01/10/migrate-blog-from-hexo-to-docu"},{"@id":"https://gracefullight.dev/en/2022/11/24/nextjs-13-app-dir","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2022-11-24T23:16:14.000Z","description":"How to use the Next.js 13 app directory and its limitations.","headline":"Nextjs App Directory","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2022/11/24/nextjs-13-app-dir","name":"Nextjs App Directory","url":"https://gracefullight.dev/en/2022/11/24/nextjs-13-app-dir"},{"@id":"https://gracefullight.dev/en/2022/07/30/yarn-ts-스타터-체크리스트","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2022-07-30T14:28:02.000Z","description":"A checklist for starting a blank repository with yarn and TypeScript for testing and collaboration.","headline":"yarn, ts 스타터 체크리스트","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2022/07/30/yarn-ts-스타터-체크리스트","name":"yarn, ts 스타터 체크리스트","url":"https://gracefullight.dev/en/2022/07/30/yarn-ts-스타터-체크리스트"},{"@id":"https://gracefullight.dev/en/2022/01/29/node-redis-vs-ioredis","@type":"BlogPosting","author":{"@type":"Person","description":"Owner","image":"https://avatars.githubusercontent.com/u/11773683?v=4","name":"Gracefullight","url":"https://github.com/gracefullight"},"datePublished":"2022-01-29T22:16:22.000Z","description":"전제조건","headline":"node-redis vs ioredis","keywords":[],"mainEntityOfPage":"https://gracefullight.dev/en/2022/01/29/node-redis-vs-ioredis","name":"node-redis vs ioredis","url":"https://gracefullight.dev/en/2022/01/29/node-redis-vs-ioredis"}],"description":"Blog","headline":"Blog","mainEntityOfPage":"https://gracefullight.dev/en/page/59"}</script><link rel=alternate type=application/rss+xml href=/en/rss.xml title="gracefullight.dev RSS Feed"><link rel=alternate type=application/atom+xml href=/en/atom.xml title="gracefullight.dev Atom Feed"><link rel=alternate type=application/json href=/en/feed.json title="gracefullight.dev JSON Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-E99DNE7S05"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E99DNE7S05",{})</script><link rel=search type=application/opensearchdescription+xml title=gracefullight.dev href=/en/opensearch.xml><link href=/en/img/favicon-32x32.png rel=icon><link href=/en/manifest.json rel=manifest><meta content=#f28913 name=theme-color><meta content=yes name=mobile-web-app-capable><meta content=#f28913 name=apple-mobile-web-app-status-bar-style><link href=/en/img/apple-touch-icon.png rel=apple-touch-icon><link rel=preconnect href=https://pagead2.googlesyndication.com><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3004788392777865" async crossorigin=anonymous></script><link rel=preconnect href=https://www.clarity.ms><script>!function(t,e,n,a,c,i,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(i=e.createElement(a)).async=1,i.src="https://www.clarity.ms/tag/"+c,(r=e.getElementsByTagName(a)[0]).parentNode.insertBefore(i,r)}(window,document,"clarity","script","aongv9xgi6")</script><link rel=preconnect href=https://wcs.naver.net><script src=https://wcs.naver.net/wcslog.js async></script><script>if(!wcs_add)var wcs_add={};wcs_add.wa="156bc73a81e3bd0",window.wcs&&wcs_do()</script><link rel=preconnect href=https://cdn.channel.io><script>!function(){var n=window;if(n.ChannelIO)return(window.console.error||window.console.log||function(){})("ChannelIO script included twice.");var e=function(){e.c(arguments)};function t(){if(!n.ChannelIOInitialized){n.ChannelIOInitialized=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.channel.io/plugin/ch-plugin-web.js",e.charset="UTF-8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}e.q=[],e.c=function(n){e.q.push(n)},n.ChannelIO=e,"complete"===document.readyState?t():window.attachEvent?window.attachEvent("onload",t):(window.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1))}(),ChannelIO("boot",{pluginKey:"0fd130ba-a1a6-4b7e-802a-e82a885a7fd8"})</script><link rel=preconnect href=https://static.cloudflareinsights.com><script src=https://static.cloudflareinsights.com/beacon.min.js defer data-cf-beacon='{"token":"c0899829e72b45e98dff77241127252c"}'></script><link href=https://mc.yandex.ru rel=preconnect><script>!function(e,t,c,n,r,a,s){e[r]=e[r]||function(){(e[r].a=e[r].a||[]).push(arguments)},e[r].l=+new Date;for(var i=0;i<document.scripts.length;i++)if(document.scripts[i].src===n)return;a=t.createElement(c),s=t.getElementsByTagName(c)[0],a.async=1,a.src=n,s.parentNode.insertBefore(a,s)}(window,document,"script","https://mc.yandex.ru/metrika/tag.js?id=104072655","ym"),ym(0x63405cf,"init",{ssr:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!1})</script><link href=https://cdn.jsdelivr.net rel=preconnect><script type=application/ld+json>{"@context":"http://schema.org","@type":"Person","email":"mailto:gracefullight.dev@gmail.com","image":"https://avatars.githubusercontent.com/u/11773683?v=4","jobTitle":"FullStack JavaScript Developer","logo":"https://gracefullight.dev/img/apple-touch-icon.png","name":"Eunkwang Shin","nationality":"Korean","sameAs":["https://github.com/gracefullight","https://linkedin.com/in/gracefullight"],"url":"https://gracefullight.dev"}</script><link rel=stylesheet crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css type=text/css><link rel=stylesheet href=/en/assets/css/styles.60923ef7.css /><script src=/en/assets/js/runtime~main.1b51a719.js defer></script><script src=/en/assets/js/main.bdbba33d.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/en/img/favicon-32x32.png /><link rel=preload as=image href="https://avatars.githubusercontent.com/u/11773683?v=4"/><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/favicon-32x32.png alt="gracefullight.dev blog logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/en/img/favicon-32x32.png alt="gracefullight.dev blog logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">gracefullight.dev</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/page/59/ target=_self rel="noopener noreferrer" class=dropdown__link lang=ko>한국어</a><li><a href=/en/page/59/ target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a></ul></div><a class="navbar__item navbar__link" href=/en/archive/>Archives</a><a class="navbar__item navbar__link" href=/en/tags/>Tags</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role=group><h3 class=yearGroupHeading_rMGB>2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/02/27/free-up-storage-space-on-mac/>Free up storage space on mac</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/02/27/promoting-an-opensource-project/>Promoting an opensource project</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/02/24/iqc-002/>IQC 002</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/02/23/tim-002/>TIM 002</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/02/17/innovation-tactics/>Innovation Tactics</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/01/31/agentic-sdlc/>Agentic SDLC</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/2026/01/29/local-docker-env/>로컬 도커 환경 툴 비교</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/vocab/phrasal-verbs-01/>Phrasal Verbs 01</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/vocab/phrasal-verbs-014/>Phrasal Verbs 014</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/en/vocab/phrasal-verbs-013/>Phrasal Verbs 013</a></ul></div></nav></aside><main class="col col--7"><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/06/25/atomic-state-management-with-valtio/>Atom-based state management and Valtio</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-06-25T07:45:45.480Z>June 25, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">At one point, redux-saga seemed like a cool way to solve redux's tired state management, and then a combination of atomic states seemed like the way to go.</li>
<li class="">That's why I've mostly used recoil, but if you're using query or swr, you don't need such a complicated feature to manage local UI state.</li>
<li class="">recoil seems to be an almost abandoned project with only bug fixes in the meta. <a href=https://github.com/facebookexperimental/Recoil/discussions/2171 target=_blank rel="noopener noreferrer" class="">discussion#2171</a></li>
<li class="">Anyway, local UI state just needs to have a pub/sub pattern.</li>
<li class="">The winner of the 2023 state management library seems to be <strong>zustand</strong>.<!-- -->
<ul>
<li class="">If you're building an event/messaging based system, it makes sense to use that library with the Flux pattern.</li>
<li class="">If you're building an editor with action-based behavior for all front-end features, or if you're integrating with a chat system that receives function call requests, that's one thing.</li>
</ul>
</li>
<li class="">But for a typical use case, Flux is overkill, except for cascading forms, badges, modals, etc.</li>
<li class="">If I were developing alone, I would want to separate the backend from the frontend, separate the Local, Dev, Stage, and Prod stages, and have a DB, scheduler, queue, API, and SSR stack.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=atom>atom<a href=#atom class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">Read first; <a href=https://medium.com/@yujso66/%EB%B2%88%EC%97%AD-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%83%81%ED%83%9C-%EA%B4%80%EB%A6%AC%EC%9D%98-%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%9D%90%EB%A6%84-6e5ed0022e39 target=_blank rel="noopener noreferrer" class="">The new wave of React state management</a>을 보자.</li>
<li class="">Atomic, pub/sub, and derived are possible.</li>
<li class="">Using derived state is also rarely necessary unless you need a new state per ID. For data, query already does the job.</li>
<li class="">Atomic design and atomic state management became a necessity.</li>
<li class="">With many developers working asynchronously, it was important to keep track of which files were atoms and what they were for.</li>
<li class="">We have a <code>*.atom.ts</code> file superfix and a <code>*State</code> variable name superfix.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=valtio>valtio<a href=#valtio class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">Both <a href=https://github.com/pmndrs/jotai/blob/main/src/vanilla/atom.ts#L83 target=_blank rel="noopener noreferrer" class="">jotai/atom</a> and <a href=https://github.com/facebookexperimental/Recoil/blob/main/packages/recoil/recoil_values/Recoil_atom.js#L185 target=_blank rel="noopener noreferrer" class="">Recoil/atom</a> manage atom-based state and propagate state.</li>
<li class=""><a href=https://github.com/pmndrs/valtio/blob/main/src/vanilla.ts#L156 target=_blank rel="noopener noreferrer" class="">valtio/proxy</a> implements the same functionality using Proxy and Reflect.</li>
<li class="">Memory management is not the worst, as you can see from the <a href=https://krausest.github.io/js-framework-benchmark/2023/table_chrome_114.0.5735.90.html target=_blank rel="noopener noreferrer" class="">Results for js web frameworks benchmark</a>.</li>
<li class="">zustand, jotai, and valtio are all open source, covered by the <a href="https://github.com/orgs/pmndrs/repositories?q=&type=all&language=&sort=stargazers" target=_blank rel="noopener noreferrer" class="">pmndrs</a> community, with <a href=https://github.com/dai-shi target=_blank rel="noopener noreferrer" class="">the same person</a> as a contributor and maintainer.</li>
<li class="">It just works, as his comments in <a href=https://github.com/pmndrs/valtio/discussions/128 target=_blank rel="noopener noreferrer" class="">valito/discussion#128</a> show.</li>
<li class=""><a href=https://github.com/pmndrs/valtio/issues/141#issuecomment-891214314 target=_blank rel="noopener noreferrer" class="">valito/issues#141</a> Having spent a year on Redux and Redux-saga, and two years on Mobx POC and Recoil, this comment really resonated with me.</li>
<li class="">For the time being, I'm going to create several projects and try to use this state management library in all of them.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/react/>react</a><li class=tag_QGVx><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_zVej tagRegular_sFm0" href=/en/tags/javascript/>javascript</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/06/17/tech-retrospective/>A 10-year programmer's tech retrospective</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-06-17T01:38:32.173Z>June 17, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=programmer>Programmer<a href=#programmer class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>What is a programmer?</p>
<ul>
<li class="">People who like to categorize will call it a coder, developer, or engineer.</li>
<li class="">To strangers, it may seem like a job that pays a lot of money, or that you have to pay on demand,</li>
<li class="">To an employer, you're a mechanic.</li>
</ul>
<p>What does this job mean to me?</p>
<ul>
<li class="">At the point where your short-term memory turns into long-term memory, you suddenly have an idea that will solve everything and you grab the keyboard.</li>
<li class="">Throwing myself into a gradient descent and not getting out of my chair until I hear the birds in the morning.</li>
<li class="">You want to code so badly that you can't because you're required to take a liberal arts major.</li>
</ul>
<p>These days, I tell stories like this.</p>
<blockquote>
<p>I build houses on the internet.</p>
</blockquote>
<ul>
<li class="">Front-end? That's interior construction.</li>
<li class="">Backend? That's tooling and gutting.</li>
<li class="">DevOps? That's digging and rebarring.</li>
<li class="">Security? That's keeping unknowns out of the complex.</li>
</ul>
<p>Programming is about borrowing concepts from the real world to automate what humans do, and I feel like it took me too long to realize this.</p>
<p>I finally understand why so many of my professors used to tell me that the more you know, the more important the basics are. I can see why so many of my professors used to say, "The more time you have, the more important the basics are.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=programming>Programming<a href=#programming class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>Do programming skills matter in the age of GPT?</p>
<p>My answer is no. There comes a point where the idea of the service is more important than the technology stack.
Even people who have never heard of Claude Shannon can create a service, and edge computing has made it possible to deploy that code.</p>
<p>You can't say, "If you go this way, it's going to fall apart at some point.
You can't pour gasoline on a burning house and then say, "I told you it would happen.</p>
<p>The social climate is making it more so.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=technology-stack>Technology stack<a href=#technology-stack class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>All technology is a tradeoff.</p>
<p>New things always cost money. You have to look at it from the perspective of staff skill and maintenance.</p>
<p>I think, <em>This is not an academy, if you want to write something new, use your personal time and show me a prototype in a week</em>, but there are also people who think, Who am I studying for?</p>
<p>This is why software engineering is so important.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=my-utopia>My utopia<a href=#my-utopia class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>So what was it that I didn't like, I don't even know if it was bad construction. You may not know.
But not being able to say it's bad construction is overloading my body.</p>
<p>To keep myself from stressing out, I'm going to keep a checklist of ideal features.</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Do we have a code owner feature? Have we created a culture where certain code changes can be reviewed by a per-file owner?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->What is the average number of comments in a code review?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->What is the branching strategy?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Are unit tests run in the pipeline, and if so, what is the coverage?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Are integration tests based on real data executed in the pipeline, and if so, what are the criteria for inclusion in the integration tests?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Are E2E tests executed periodically, and if so, who is responsible for managing them?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Are cases given enough time to be implemented before going to test driven?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Do they perform chaos testing for external factors? Do they recognize the need for disaster recovery?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->How is open source managed? Is the software versioned on a specific cycle?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Do developers manage their own Docker files and deployments, and if not, who does?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Is there support from the systems team to configure a private network? If not, is there an environment where a VPC can be configured?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->What is being done mechanically to maintain the quality of the code, such as lint and static analysis?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->If there is a failure, is the failure publicized and a failure report created?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Does everyone in the team have ownership of the service?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->What is the SLA for the services you represent? What is the frequency of OOM failures or top 500 failures?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Is the SLA a standard for the HR department?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Is the direction of the owner visible to all members?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Are decisions made based on data? What tools are used to collect logs?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Is the logging format standardized with Open Telemetry, and if not, what format is being managed?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Collecting web metrics?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Is there a foundation for A/B testing to introduce features? If not, how is the HR department involved in planning?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Using a design system?</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Are Storybooks managed in the same repository?</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag title="Life Logging" class="tag_zVej tagRegular_sFm0" href=/en/tags/me/>me</a><li class=tag_QGVx><a rel=tag title=회고 class="tag_zVej tagRegular_sFm0" href=/en/tags/retro/>retrospective</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/06/17/migrate-yarn-to-pnpm/>Migrate from yarn to pnpm</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-06-16T23:42:13.449Z>June 16, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">Yarn berry was all the rage.</li>
<li class="">I tried it and found quite a few problems, which is why I ended up choosing pnpm.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=problems>Problems<a href=#problems class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=zipfs>zipfs<a href=#zipfs class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">It stores all the packages and logs all the diffs. This is a major culprit for repository size. Difficult to manage images under 1GB.</li>
<li class="">If typescript goes up, yarn berry version should go up. I want to use the latest syntax in typescript right away, but I can't keep up.</li>
<li class="">I need to update the executable with <code>yarn dlx @yarnpkg/sdks vscode</code> whenever typescript, eslint, and prettier are released.</li>
<li class="">In a project with 20+ front-end developers, this is hard to enforce.</li>
<li class="">It is not possible to test this by making small changes to the source inside the package.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=opensource>opensource<a href=#opensource class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">Monolithic tools like turbo, environments with postinstall hooks like prism, or preset configurators like <code>create-*</code> reference <code>node_modules</code> directly.</li>
<li class="">Often it won't even run, and you'll have to wait for an open issue in each repo. I'm not writing this to analyze yarn berry's pnp script.</li>
<li class="">In this case, I'd have to give it a <code>nodeLinker</code> and use it the same way I would with yarn 1, with no advantage.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=workspaces>workspaces<a href=#workspaces class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">The yarn workspaces feature is cool, and <a href=https://github.com/yarnpkg/berry target=_blank rel="noopener noreferrer" class="">yarnpkg/berry</a> is a perfect example of it.</li>
<li class="">But it's only cool if you're only developing node.js libraries. Libraries for the frontend need a bundler, and there's no reference for that.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=benchmarks>Benchmarks<a href=#benchmarks class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">Benchmark scores are managed by Pnpm on a daily basis.</li>
<li class="">Slowness is acceptable with pipeline cache and lock files enabled. It's a one-time slowdown, not a request/response slowdown, so it can be handled by probes anyway.</li>
</ul>
<p><img decoding=async loading=lazy src=https://d33wubrfki0l68.cloudfront.net/0cb4f1b1466c5e04cdfd5047d6d509a6a3726996/ea3c9/img/benchmarks/alotta-files.svg alt=https://pnpm.io/benchmarks class=img_ev3q /></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=conclusion>Conclusion<a href=#conclusion class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">The plugin features in yarn berry are cool, but they add more stress to dependency management.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/nodejs/>nodejs</a><li class=tag_QGVx><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_zVej tagRegular_sFm0" href=/en/tags/javascript/>javascript</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/02/26/my-awesome-chatgpt/>My Awesome ChatGPT</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-02-25T15:29:33.470Z>February 25, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">The programmers who are good at asking questions and quickly determining if the answers are right or wrong will be the ones who survive.</li>
<li class="">Here's a list of repositories that can be used in the field, not just for development tips.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=aicommits>aicommits<a href=#aicommits class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class=""><a href=https://github.com/Nutlope/aicommits target=_blank rel="noopener noreferrer" class="">Nutlope/aicommits</a>: Automated commits.</li>
<li class="">As soon as <a href=https://github.com/Nutlope/aicommits/issues/32 target=_blank rel="noopener noreferrer" class="">#32 Add support for conventional commits</a> is resolved, I'll be using it.</li>
<li class="">Personally, I think the following prompts should be changed, but I'm also curious about how to improve them.</li>
<li class=""><a href=https://github.com/Nutlope/aicommits/pull/177/files target=_blank rel="noopener noreferrer" class="">#177 feat: enable Conventional Commits standard as flag</a> I think it's coming soon.</li>
</ul>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>src/utils/openai.ts#L7</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class="token-line theme-code-block-highlighted-line" style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> promptTemplate </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token string" style=color:#e3116c>"Write an insightful but concise Git commit message in a complete sentence in present tense for the following diff without prefacing it with anything:"</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div>
<ul>
<li class=""><a href=https://github.com/Nutlope/aicommits/issues/81#issuecomment-1443077579 target=_blank rel="noopener noreferrer" class="">#81 Quick improvement suggestion: Reduce diff size with --ignore-all-space</a> is also interesting.</li>
<li class="">Since the Openai API is billed by the number of tokens, it looks like they plan to reduce the diff as much as possible.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=node-chatgpt>node chatgpt<a href=#node-chatgpt class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class=""><a href=https://github.com/transitive-bullshit/chatgpt-api target=_blank rel="noopener noreferrer" class="">transitive-bullshit/chatgpt-api</a></li>
<li class=""><a href=https://platform.openai.com/docs/api-reference/completions/create#completions/create-temperature target=_blank rel="noopener noreferrer" class="">openai: docs</a></li>
<li class="">I think we need to utilize <a href=https://github.com/transitive-bullshit/chatgpt-api/blob/main/src/types.ts#L62 target=_blank rel="noopener noreferrer" class="">completionParams</a> appropriately.</li>
<li class="">I checked several third parties and none of them give temperature as 1.</li>
</ul>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> completionParams </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  temperature</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.7</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  top_p</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  frequency_penalty</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  presence_penalty</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=tiktoken>tiktoken<a href=#tiktoken class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">You may need to get the exact number of tokens to use the openai API.</li>
<li class="">You should use <a href=https://github.com/openai/tiktoken target=_blank rel="noopener noreferrer" class="">openai/tiktoken</a>, but it's Python.</li>
<li class=""><a href=https://github.com/dqbd/tiktoken target=_blank rel="noopener noreferrer" class="">dqbd/tiktoken</a> already has a node wrapper already out there. 3.5 Turbo support</li>
</ul>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> encoding_for_model </span><span class="token keyword" style=color:#00009f>as</span><span class="token plain"> encodingForModel </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"@dqbd/tiktoken"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> encoder </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>encodingForModel</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"gpt-3.5-turbo"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> tokenLength </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> encoder</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>encode</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"YOUR_CHAT"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">length</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=chatgpt-retrieval-plugin>chatgpt-retrieval-plugin<a href=#chatgpt-retrieval-plugin class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p><a href=https://github.com/openai/chatgpt-retrieval-plugin target=_blank rel="noopener noreferrer" class="">openai/chatgpt-retrieval-plugin</a></p>
<ul>
<li class="">ai-plugin.json in the .well-known path acts as a manifest.json</li>
<li class="">Openapi.yaml in the same path for this endpoint specification</li>
<li class="">There are four types of authentication: <code>none | user_http | service_http | oauth</code>.</li>
<li class="">For simple services, <code>service_http</code> seems to be sufficient, <code>user_http</code> requires the customer to enter an API key, and <code>oauth</code> requires additional permissions such as <code>search:read</code>.</li>
<li class="">It seems to use Vector DB for document similarity comparison, but there is no proper Node.js wrapper for it, so it can be implemented in Redis, but you need the Redisearch module.<!-- -->
<ul>
<li class=""><a href=https://github.com/openai/chatgpt-retrieval-plugin/blob/main/datastore/providers/redis_datastore.py target=_blank rel="noopener noreferrer" class="">datastore/providers/redis_datastore.py</a></li>
<li class=""><a href=https://github.com/openai/chatgpt-retrieval-plugin/blob/38b46e1926ba1b4bf04263e85afe6b661efec1b6/services/openai.py#L23 target=_blank rel="noopener noreferrer" class="">services/openai.py</a></li>
</ul>
</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/chatgpt/>chatgpt</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/01/21/백년허리/>The durable back over a hundread years</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-01-21T10:29:08.768Z>January 21, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=백년허리>백년허리<a href=#백년허리 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>I got a herniated disc from Sumo-deadlift, and I think it would be good for many people to read this before it happens.
If I had, I would have had a good posture before the disc between L5-S1 came out.</p>
<p>The overall content is a book review of <a href=https://link.coupang.com/a/MTwds target=_blank rel="noopener noreferrer" class="">백년허리</a> to protect spinal hygiene.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=diagnosis>Diagnosis<a href=#diagnosis class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">Vertebrae: Cervical, thoracic, lumbar, sacral, and coccyx<!-- -->
<ul>
<li class="">The cervical and lumbar vertebrae are curved forward, with cervical lordosis and lumbar lordosis.</li>
</ul>
</li>
<li class="">Disc damage is the main cause of back pain</li>
<li class="">Discs: Nucleus pulposus, annulus fibrosus, and endplates<!-- -->
<ul>
<li class="">The posterior annulus fibrosus and endplates are most commonly injured</li>
</ul>
</li>
<li class="">Muscles protect the torn disc.<!-- -->
<ul>
<li class="">When a disc tears, the muscles tighten to protect it.</li>
<li class="">Low back pain is a sign of a torn disc</li>
</ul>
</li>
<li class="">Lumbar lordosis is a new posture.</li>
<li class="">A healthy disc creates a lumbar lordosis curve, and the lumbar lordosis curve protects the disc.</li>
<li class="">Sciatica is a typical symptom of a herniated disc and is a sign that the disc has herniated.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=treatment>Treatment<a href=#treatment class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">The idea that you can cure a bad back by doing stronger back exercises is like saying that you can cure a broken arm by exercising the arm muscles.</li>
<li class="">The hip muscles and obliques are important.</li>
<li class="">You need to know exactly how much impact your workout will have on your back, and make sure your back can handle the strain.</li>
<li class="">Stretches that bend at the waist are very bad exercises for lumbar lordosis</li>
<li class="">Stiffness in the lower back when a disc injury is healing is a natural part of the process of the wound turning into scarring.</li>
<li class="">It's essential to regain lumbar lordosis through frequent standing and extension movements.</li>
<li class="">It is spinal hygiene to try to never re-tear a disc wound as it heals.</li>
<li class="">Maintaining lumbar lordosis 24 hours a day</li>
<li class="">If you suffer from sciatica when doing lumbar lordosis, you should treat the nerve root inflammation and practice good spinal hygiene.</li>
<li class="">Leaning on a backrest or cushion is an advantage.</li>
<li class="">The basics of spinal hygiene are maximum lumbar lordosis and extension movements.</li>
<li class="">If it hurts to do extension movements, lie on your stomach and do them frequently, for about 5 minutes, with your elbows under your shoulders.</li>
<li class="">Lumbar lordosis should not collapse when standing, sitting, or bending at the waist.</li>
<li class="">Your back is most comfortable when your knees are slightly lower than your pelvis.</li>
<li class="">There is no such thing as a bad back. Your back improves with good posture.</li>
<li class="">Standing lumbar lordosis: place your hands on your waist and hold for 5 seconds while breathing.</li>
<li class="">Standing Chest: Standing, lift your chest and grab your shoulder blades. No duckbills</li>
<li class="">Walking: keep both shoulder blades together, open chest, chin up, graceful chin and proud chest.</li>
<li class="">Sitting: knees should be lower than the pelvis. Sit with an upright chest.<!-- -->
<ul>
<li class="">The height of the screen should be high enough.</li>
<li class="">When sitting with good spinal alignment, you should be able to see the screen without bending your back and neck too much.</li>
</ul>
</li>
<li class="">The best place for a lumbar strap is between the 3rd and 4th lumbar vertebrae.</li>
<li class="">Avoid the knees.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=prohibited-positions>Prohibited positions<a href=#prohibited-positions class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">Squatting</li>
<li class="">Sitting long</li>
<li class="">Cross-legged</li>
<li class="">Slouching</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/review/>review</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/01/19/chatgpt-use-case/>ChatGPT use cases</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-01-19T13:44:09.237Z>January 19, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>Here's a list of use cases where you can get past the hype and actually use it for something useful.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=extracting-regular-expressions>Extracting regular expressions<a href=#extracting-regular-expressions class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>Creating regular expressions usually involves a lot of testing.
I usually put the desired text in regexr, regex101, and match the negative/positive lookahead from memory, and use negative/positive lookbehind, but often find that negative lookbehind is not supported by different programming versions/languages.</p>
<p>Now I ask ChatGPT. Suppose you want to extract the package name from the package update history below.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Hello GPT.</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Can you give me a regex pattern for getting to-be result?</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">as-is:</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Orignal content</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">to-be:</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Refined string #1</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Refined string #2</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">...and so on.</span><br/></span></code></pre></div></div>
<p>It will get it for you.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=writing-documentation-with-code>Writing documentation with code<a href=#writing-documentation-with-code class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>If you want your code to be documented, put it in and ask it to create a README.md.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Can you write a README.md with this code?</span><br/></span></code></pre></div></div>
<p>It will get it for you.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=create-an-object-validation-schema-with-the-interface>Create an Object Validation Schema with the interface<a href=#create-an-object-validation-schema-with-the-interface class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>Let's create a Joi Schema with a TypeScript interface.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=create-a-query-dsl-with-raw-sql>Create a Query DSL with Raw SQL<a href=#create-a-query-dsl-with-raw-sql class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>Pass in a raw query and ask it to create a query DSL and query helper syntax.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=create-a-ddl-with-data>Create a DDL with Data<a href=#create-a-ddl-with-data class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>Pass in a query and ask it to generate a table schema query like the interface example above.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=see>See<a href=#see class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>awesome is now live. <a href=https://github.com/f/awesome-chatgpt-prompts target=_blank rel="noopener noreferrer" class="">https://github.com/f/awesome-chatgpt-prompts</a></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/chatgpt/>chatgpt</a><li class=tag_QGVx><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_zVej tagRegular_sFm0" href=/en/tags/javascript/>javascript</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2023/01/10/migrate-blog-from-hexo-to-docu/>Migrate a blog from hexo to docusaurus</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2023-01-10T14:26:34.674Z>January 10, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>I've been using hexo since 2016, and I love it because it has a lot of plugins and themes.
Since 2019. As there are many other Static Site Generators, the advantages of hexo are no longer available.
The updates of ecosystem libraries such as theme and plugin development have also decreased.</p>
<p>The stack was theme-dependent: ejs -> njk, less -> sass -> stylus.
Crucially, it's a nodejs-based core, so even if I uploaded a troubleshooting, it was a waste of resources.</p>
<p>Docusaurus didn't have algolia search when it was 1-2 alpha.
There was a shovel to swizzle and use the local search community plugin to attach it, and Korean did not work normally.</p>
<p>In 2023, version 2 was launched, the frontend stack was unified based on React, and it seemed like it was okay to proceed with this work.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=troubleshooting>Troubleshooting<a href=#troubleshooting class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=seo>SEO<a href=#seo class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=uri>URI<a href=#uri class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h4>
<ul>
<li class="">hexo puts the date inside the front-matter syntax as <code>date: 2023-01-10 09:00:00</code>.</li>
<li class="">docusaurus should use the <a href=https://docusaurus.io/docs/blog#blog-post-date target=_blank rel="noopener noreferrer" class="">nested folder structure</a>.</li>
<li class="">It will parse the front-matter.date in the md file and treat it like <code>/2023/01/10/title</code> in the URL.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=site-verification>Site Verification<a href=#site-verification class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h4>
<ul>
<li class="">I put it in the configuration without any problems.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>docusaurus.config.js</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"themeConfig"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"metadata"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token comment" style=color:#999988;font-style:italic>// ? https://search.google.com/search-console</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token property" style=color:#36acaa>"name"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"google-site-verification"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token property" style=color:#36acaa>"content"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"g"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=hexo-new>hexo new<a href=#hexo-new class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class=""><code>hexo new post "title"</code> This command creates a post, but I needed a compatible command.</li>
<li class="">I used <code>yarn cmd new title</code> to generate what looks like <code>blog/2023/01/10/title.mdx</code> as of today.</li>
<li class="">For URL normalization, you can use <code>import { slugize } from "hexo-util";</code>.<!-- -->
<ul>
<li class="">slugify also removes Korean characters.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=archive>archive<a href=#archive class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">The archive of hexo is Order by Created DESC, while docusaurus is ASC sorted.</li>
<li class="">There was an issue to provide this as a plugin option, but it was closed, and do it yourself was the answer.</li>
<li class="">I created one, <a href=https://github.com/facebook/docusaurus/blob/main/packages/docusaurus-theme-classic/src/theme/BlogArchivePage/index.tsx target=_blank rel="noopener noreferrer" class="">overwrote the existing component</a>, rearranged it, and linked it.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>docusaurus.config.js</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"presets"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"classic"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"blog"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>// path.resolve needed</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token property" style=color:#36acaa>"blogArchiveComponent"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"./src/component/BlogArchiveDescendingPage.tsx"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=tag>tag<a href=#tag class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">A docusaurus tag is defined as <code>tags: [tag1, tag2]</code> and must satisfy this format.</li>
<li class="">I asked ChatGPT for a regular expression and replaced it with the whole thing.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=github-action>github action<a href=#github-action class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">Set up the target repo and branch.</li>
<li class="">Issue a personal access token and insert the two values appropriately.</li>
<li class="">Run yarn build, yarn deploy and it should work fine.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>docusaurus.config.js</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"organizationName"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"gracefullight"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"projectName"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"gracefullight.github.io"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"deploymentBranch"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"main"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"trailingSlash"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>workflows/main.yml</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>env</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>GIT_USER</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> $</span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> secrets.GIT_USER </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>GIT_PASS</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> $</span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> secrets.GIT_PASS </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=dark-only>dark only<a href=#dark-only class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">Dark only, also deleted the switch.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>docusaurus.config.js</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"themeConfig"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"colorMode"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"defaultMode"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"dark"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"disableSwitch"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=code-block>code block<a href=#code-block class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">has a different format, so I replaced it with a regular expression.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># hexo</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>\</span><span class="token variable" style=color:#36acaa>`</span><span class="token variable punctuation" style=color:#393A34>\</span><span class="token variable" style=color:#36acaa>`</span><span class="token punctuation" style=color:#393A34>\</span><span class="token variable" style=color:#36acaa>`</span><span class="token variable" style=color:#36acaa>language title</span><br/></span><span class=token-line style=color:#393A34><span class="token variable" style=color:#36acaa></span><br/></span><span class=token-line style=color:#393A34><span class="token variable" style=color:#36acaa></span><span class="token variable comment" style=color:#999988;font-style:italic># docusaurus</span><span class="token variable" style=color:#36acaa></span><br/></span><span class=token-line style=color:#393A34><span class="token variable" style=color:#36acaa></span><span class="token variable punctuation" style=color:#393A34>\</span><span class="token variable" style=color:#36acaa>`</span><span class="token punctuation" style=color:#393A34>\</span><span class="token variable" style=color:#36acaa>`</span><span class="token variable punctuation" style=color:#393A34>\</span><span class="token variable" style=color:#36acaa>`</span><span class="token plain">language </span><span class="token assign-left variable" style=color:#36acaa>title</span><span class="token operator" style=color:#393A34>=</span><span class="token string" style=color:#e3116c>"title"</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=comment>comment<a href=#comment class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">I don't have time to answer questions about the comment feature.</li>
<li class="">I tried to delete it, but I customized it and integrated gitalk.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=search>search<a href=#search class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<ul>
<li class="">I requested free indexing because algolia is not an open source documentation, but the ticket status didn't change.</li>
<li class="">I used <a href=https://github.com/easyops-cn/docusaurus-search-local target=_blank rel="noopener noreferrer" class="">@easyops-cn/docusaurus-search-local</a>, but it doesn't support mobile.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>docusaurus.config.js</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token property" style=color:#36acaa>"themes"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"@easyops-cn/docusaurus-search-local"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/** @type {import("@easyops-cn/docusaurus-search-local").PluginOptions} */</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"indexDocs"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"blogRouteBasePath"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"/"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"hashed"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token property" style=color:#36acaa>"language"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"en"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"ko"</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<ul>
<li class="">After about a week, algolia replied and the indexing was successfully completed.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=result>Result<a href=#result class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">LGTM</li>
<li class="">I think I need to build <a href=https://docusaurus.io/docs/search#using-typesense-docsearch target=_blank rel="noopener noreferrer" class="">typesense</a> first, so it won't be easy.</li>
<li class="">If you don't need to view it on mobile, the above plugin should be enough.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/nodejs/>nodejs</a><li class=tag_QGVx><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_zVej tagRegular_sFm0" href=/en/tags/javascript/>javascript</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2022/11/24/nextjs-13-app-dir/>Nextjs App Directory</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2022-11-24T23:16:14.000Z>November 24, 2022</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=개요>개요<a href=#개요 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">nextjs 13버전에서 app 디렉토리가 생기면서 client/server 컴포넌트를 쉽게 사용할 수 있는 환경이 되었다.</li>
<li class=""><code>getStaticProps</code>, <code>getServerSideProps</code> 와 같은 메소드가 사라졌고, 양쪽이 <code>fetch</code> 로 통합이 되었다.</li>
<li class="">페이지별 상태 초기화를 위한 HOC 중첩을 가져가지 않아도 될 것 같았다.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=app>App<a href=#app class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=nodejs--react-dom-renderer>Node.js + React DOM Renderer<a href=#nodejs--react-dom-renderer class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<p>app 내의 모든 로직은 Node.js 이다. 따라서 이런 로직이 가능하다.</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>app/page.tsx</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> hostname </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"os"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>default</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>div</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>{</span><span class="token function" style=color:#d73a49>hostname</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>div</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>이벤트를 바인딩할 수 없다.</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>app/page.tsx</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token maybe-class-name">SyntheticEvent</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"react"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>default</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>handleSubmit</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token maybe-class-name">SyntheticEvent</span><span class="token operator" style=color:#393A34>&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token operator" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"submitting"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>form</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>onSubmit</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#393A34>=</span><span class="token tag script language-javascript punctuation" style=color:#393A34>{</span><span class="token tag script language-javascript" style=color:#00009f>handleSubmit</span><span class="token tag script language-javascript punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain-text">      </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>button</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>type</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>submit</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text">submit</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>button</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>form</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-html codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Error: Event handlers cannot be passed to Client Component props.</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>form</span><span class="token tag" style=color:#00009f> </span><span class="token tag special-attr attr-name" style=color:#00a4db>onSubmit</span><span class="token tag special-attr attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag special-attr attr-value punctuation" style=color:#393A34>"</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style=color:#393A34>{</span><span class="token tag special-attr attr-value value javascript language-javascript keyword" style=color:#00009f>function</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style=color:#393A34>}</span><span class="token tag special-attr attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>children</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>...</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  ^^^^^^^^^^ If you need interactivity, consider converting part of this to a</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Client Component.</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>form</span><span class="token tag punctuation" style=color:#393A34>></span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=design-system>Design system<a href=#design-system class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<p>대부분의 디자인 시스템 라이브러리는 <code>ThemeProvider</code> 로 테마 상태를 공유하고 Baseline StyleSheet를 전역에 넣어준다.
스타일시트를 위해 <a href=https://beta.nextjs.org/docs/styling/css-in-js#styled-components target=_blank rel="noopener noreferrer" class="">RootStyleRegistry</a> 란 HOC 만들어 Baseline StyleSheet 를 동적으로 넣어주면 초기화는 가능하지만,</p>
<p>문제는 Server Component 내에서 use 을 사용할 수 없으니 <code>ThemeProvider</code> 로 기능동작이 불가능하다.
어찌저찌 <code>'use-client'</code> directive 로 Client Component 로 설정한다고 하여도 Provider 로 인해 하위 모든 컴포넌트가 Client Component 로 동작해야할 것이다.</p>
<p>그래서 문서에서 <a href=https://beta.nextjs.org/docs/styling/css-in-js#configuring-css-in-js-in-app target=_blank rel="noopener noreferrer" class="">다음과 같이 표기</a>가 된 것으로 보인다.</p>
<blockquote>
<p>If you want to style Server Components, we recommend using CSS Modules or other solutions that output CSS files, like PostCSS or Tailwind CSS.</p>
</blockquote>
<p>위 방식으로 <a href=https://github.com/mui/material-ui/blob/master/examples/material-next-app-router-ts/src/components/Theme/ThemeRegistry/EmotionCache.tsx target=_blank rel="noopener noreferrer" class="">mui/material-ui/examples/material-next-app-router-ts</a> 예시가 추가되었지만, 이렇게 쓸바에 pages 폴더 라우트와 다를 게 없다고 생각한다.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=결론>결론<a href=#결론 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">아직 app 폴더를 사용하기엔 이르다.</li>
<li class=""><a href=https://github.com/vercel/app-playground target=_blank rel="noopener noreferrer" class="">vercel/app-playground</a>에 충분한 예시가 갖춰지고, 생태계가 React Server Component 를 충분히 지원할 때까지는 프로덕션에서 사용은 불가능하다고 보인다.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=사견>사견<a href=#사견 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>개인적으로는 왜 이렇게 많이 클라이언트에서 렌더링해야해? 그냥 필요한 영역만 클라이언트에서 그려주면 되잖아? 라는 접근방식은 디버깅 관점에서 마음에 들진 않는다. 웹을 하나의 Client 관점에서 본다면, 설치의 유무만 다를 뿐 앱에서 서버에서 렌더링된 HTML을 받고 일정부분만을 Server Driven UI 로 가는거와 마찬가지다. 복잡도가 크게 증가한다.</p>
<p>이러한 시도는 이미 Dotnet, Laravel Livewire 등 다른 언어에서 많이 진행되어왔고, Remix 에서는 이미 잘 동작 중이다.
단지 React 를 서버에서 쓰기 위해 다시 MVC 시절로 회귀하려는지 모르겠다.</div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_zVej tagRegular_sFm0" href=/en/tags/javascript/>javascript</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/typescript/>typescript</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/react/>react</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/nextjs/>nextjs</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2022/07/30/yarn-ts-스타터-체크리스트/>yarn, ts 스타터 체크리스트</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2022-07-30T14:28:02.000Z>July 30, 2022</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=개요>개요<a href=#개요 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<p>벤치마킹, 툴 테스팅, 엑셀 스트리밍, 맵 리듀스 등 여러가지 테스트를 위해서 빈 레파지토리를 시작해야하는 경우가 많다.
복사해서 사용하기 위해 기록해두자.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=cmd>CMD<a href=#cmd class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>yarn</span><span class="token plain"> init </span><span class="token parameter variable" style=color:#36acaa>-2</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>yarn</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>add</span><span class="token plain"> </span><span class="token parameter variable" style=color:#36acaa>-D</span><span class="token plain"> typescript ts-node @types/node</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>yarn</span><span class="token plain"> tsc </span><span class="token parameter variable" style=color:#36acaa>--init</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>touch</span><span class="token plain"> src/index.ts</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">code </span><span class="token builtin class-name">.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic># package.json</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token string" style=color:#e3116c>"start"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"ts-node src/index.ts"</span><br/></span></code></pre></div></div>
<p>협업 여부에 따라 commitlint, eslint, yarn plugins 등등..</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=패키지>패키지<a href=#패키지 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">csv/tsv: <a href=https://csv.js.org/parse/options/delimiter/ target=_blank rel="noopener noreferrer" class="">csv-parse</a></li>
<li class="">zip: node zlib 로는 압축파일이 깨진다. 아래 스트리밍 unzip 라이브러리를 사용해야한다.<!-- -->
<ul>
<li class=""><a href=https://github.com/maxogden/extract-zip target=_blank rel="noopener noreferrer" class="">maxogden/extract-zip</a> 👍</li>
<li class=""><a href=https://github.com/antelle/node-stream-zip target=_blank rel="noopener noreferrer" class="">antelle/node-stream-zip</a></li>
<li class=""><a href=https://github.com/ZJONSSON/node-unzipper target=_blank rel="noopener noreferrer" class="">ZJONSSON/node-unzipper</a></li>
</ul>
</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag title="Any application that can be written in JavaScript, will eventually be written in JavaScript" class="tag_zVej tagRegular_sFm0" href=/en/tags/javascript/>javascript</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/typescript/>typescript</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/yarn/>yarn</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/en/2022/01/29/node-redis-vs-ioredis/>node-redis vs ioredis</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2022-01-29T22:16:22.000Z>January 29, 2022</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/11773683?v=4" alt=Gracefullight /></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=https://github.com/gracefullight target=_blank rel="noopener noreferrer"><span class=authorName_yefp translate=no>Gracefullight</span></a></div><small class=authorTitle_nd0D title=Owner>Owner</small><div class=authorSocials_rSDt></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=전제조건>전제조건<a href=#전제조건 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">보통 IOredis 가 퍼포먼스면에서 더 빠르다고 알고 있는데, node-redis가 4버전으로 올라오면서 바뀌었는지 궁금했다.</li>
<li class="">먼저 IOredis 의 <a href=https://github.com/luin/ioredis#benchmarks target=_blank rel="noopener noreferrer" class="">벤치마크 문서</a> 에는 node-redis 와의 비교는 없고 <code>enableAutoPipelining</code> 옵션을 켜라는 말만 나온다.</li>
<li class="">다른 참고할만한 자료는 <a href=https://ably.com/blog/migrating-from-node-redis-to-ioredis target=_blank rel="noopener noreferrer" class="">Ably: Migrating from Node Redis to Ioredis: a slightly bumpy but faster road</a> 인데 몇 버전의 라이브러리로 비교를 했는지는 나오지 않는다.</li>
<li class="">최신 node-redis 라이브러리와 비교를 해야했다.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=node-redis>node-redis<a href=#node-redis class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">버전 4에서 호환되지 않는 메소드가 많은데 Breaking Changes 나 <a href=https://github.com/redis/node-redis/blob/master/docs/v3-to-v4.md target=_blank rel="noopener noreferrer" class="">v3 to v4 마이그레이션 가이드</a>에 추가가 되어있지 않다. 😡</li>
<li class="">열려있는 이슈는 다음과 같다.<!-- -->
<ul>
<li class=""><a href=https://github.com/redis/node-redis/issues/1765 target=_blank rel="noopener noreferrer" class="">#1765</a>: <code>hgetall, hget, hset, hmset, setex</code></li>
<li class=""><a href=https://github.com/redis/node-redis/issues/1796 target=_blank rel="noopener noreferrer" class="">#1796</a>: <code>batch</code></li>
</ul>
</li>
<li class="">레디스 사의 레파지토리가 맞는지 의문이 든다.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=벤치마크>벤치마크<a href=#벤치마크 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class=""><a href=https://github.com/redis/node-redis/tree/master/benchmark target=_blank rel="noopener noreferrer" class="">redis/node-redis/benchmark</a> 벤치마크 폴더가 있는데 결과가 정리된 문서를 못 찾았다.</li>
<li class=""><a href=https://github.com/poppinlp/node_redis-vs-ioredis target=_blank rel="noopener noreferrer" class="">poppinlp/node_redis-vs-ioredis</a> 레파지토리가 있었지만 node-redis 버전이 아쉽게 <a href=https://github.com/poppinlp/node_redis-vs-ioredis/blob/master/package.json#L26 target=_blank rel="noopener noreferrer" class="">3.0.2</a>였다.</li>
<li class="">직접 수정해서 돌려봐야했다.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=테스트>테스트<a href=#테스트 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h3>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>docker-compose.yml</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>version</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"3.9"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>services</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>redis</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>image</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"redis:6.2-alpine"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>ports</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"6379:6379"</span><br/></span></code></pre></div></div>
<p>띄워놓고 진행했다. IOredis 의 <code>options.dropBufferSupport</code> 옵션을 켜면 <a href=https://github.com/luin/ioredis/blob/master/API.md#new-redisport-host-options target=_blank rel="noopener noreferrer" class="">퍼포먼스가 향상된다라고 나와있어서</a> 두 경우를 모두 테스트했다.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=dropbuffersuppport-true>dropBufferSuppport: true<a href=#dropbuffersuppport-true class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h4>
<blockquote>
<p>ioredis</p>
</blockquote>
<ul>
<li class="">node-redis (avg): 9586.215</li>
<li class="">ioredis (avg): 9488.689</li>
</ul>
<table><thead><tr><th>Operation<th>node-redis(ms)<th>node-redis with multi(ms)<th>node-redis with pipeline(ms)<tbody><tr><td>set<td>26525.039<td>170.461<td>112.881<tr><td>get<td>26334.277<td>252.904<td>183.610<tr><td>hset<td>26461.201<td>224.977<td>133.728<tr><td>hgetall<td>31394.670<td>389.773<td>306.851<tr><td>incr<td>28580.127<td>206.482<td>116.846<tr><td>keys<td>29647.691<td>772.989<td>737.362</table>
<table><thead><tr><th>Operation<th>ioredis(ms)<th>ioredis with multi(ms)<th>ioredis with pipeline(ms)<tbody><tr><td>set<td>25684.449<td>260.598<td>173.958<tr><td>get<td>25720.408<td>290.935<td>226.623<tr><td>hmset<td>25857.690<td>338.286<td>200.380<tr><td>hgetall<td>31666.897<td>480.690<td>380.761<tr><td>incr<td>28392.304<td>257.203<td>150.187<tr><td>keys<td>29061.574<td>915.112<td>738.331</table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=dropbuffersuppport-false>dropBufferSuppport: false<a href=#dropbuffersuppport-false class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h4>
<blockquote>
<p>node-redis</p>
</blockquote>
<ul>
<li class="">node-redis (avg): 9764.244</li>
<li class="">ioredis (avg): 9993.67</li>
</ul>
<table><thead><tr><th>Operation<th>node-redis(ms)<th>node-redis with multi(ms)<th>node-redis with pipeline(ms)<tbody><tr><td>set<td>29100.469<td>176.660<td>126.425<tr><td>get<td>28317.308<td>321.528<td>189.664<tr><td>hset<td>28963.134<td>194.640<td>139.163<tr><td>hgetall<td>29219.324<td>406.834<td>357.909<tr><td>incr<td>29009.774<td>211.714<td>133.763<tr><td>keys<td>27309.474<td>847.218<td>731.385</table>
<table><thead><tr><th>Operation<th>ioredis(ms)<th>ioredis with multi(ms)<th>ioredis with pipeline(ms)<tbody><tr><td>set<td>27995.198<td>265.654<td>160.538<tr><td>get<td>30821.817<td>335.706<td>245.901<tr><td>hmset<td>28127.822<td>288.023<td>216.563<tr><td>hgetall<td>28732.957<td>406.565<td>372.790<tr><td>incr<td>30576.902<td>277.081<td>133.760<tr><td>keys<td>29278.756<td>863.351<td>786.658</table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=결론>결론<a href=#결론 class=hash-link aria-label="Direct link to heading" title="Direct link to heading" translate=no>​</a></h2>
<ul>
<li class="">IOredis 를 쓰려면 <code>dropBufferSupport: true</code> 를 권장</li>
<li class="">두 라이브러리의 퍼포먼스 차이는 미미하다.</li>
<li class="">node-redis 는 공식 라이브러리이지만 아직 문서가 완벽하지 않다.</li>
<li class="">redis 에서 제공하는 RedisJson, RediSearch 의 확장성을 위해 node-redis 를 선택할 것 같다.</li>
<li class="">영속성을 위한 aof, rdb 설정은 둘 다 사용하라 <a href=https://redis.io/topics/persistence#ok-so-what-should-i-use target=_blank rel="noopener noreferrer" class="">문서</a>에 나와있다.</li>
<li class=""><a href=https://github.com/redis/redis-om-node target=_blank rel="noopener noreferrer" class="">Redis/redis-om-node</a> 와 <a href=https://oss.redis.com/redisjson/ target=_blank rel="noopener noreferrer" class="">RedisJson</a>, <a href=https://oss.redis.com/redisearch/ target=_blank rel="noopener noreferrer" class="">RediSearch</a> 를 다 사용한다면 BFF 모델을 쉽게 만들 수 있을 것 같다. 레퍼런스는 아직 없는듯...</li>
<li class=""><a href=https://github.com/RedisJSON/RedisJSON/blob/master/Dockerfile target=_blank rel="noopener noreferrer" class="">RedisJSON/RedisJson/Dockerfile</a> 에 두 모듈이 모두 설치되어있다.</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/nodejs/>nodejs</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/en/tags/redis/>redis</a></ul></div></footer></article><nav class=pagination-nav aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/page/58/><div class=pagination-nav__label>Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/page/60/><div class=pagination-nav__label>Older Entries</div></a></nav></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Support Me</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.buymeacoffee.com/LOUB2kN target=_blank rel="noopener noreferrer" style="cursor: pointer;">
                <img src=https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png style="height: auto !important;width: auto !important;">
              </a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Feeds</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://gracefullight.dev/rss.xml target=_blank rel="noopener noreferrer" class=footer__link-item>RSS<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://gracefullight.dev/atom.xml target=_blank rel="noopener noreferrer" class=footer__link-item>Atom<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2016 - 2023 Gracefullight. Built with Docusaurus.</div></div></div></footer></div></body>